"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[4443],{54443:(e,s,l)=>{l.r(s),l.d(s,{default:()=>z});var t=l(65043),i=l(96446),a=l(85865),r=l(68903),n=l(79650),d=l(63336),o=l(71806),c=l(84882),u=l(28076),x=l(39652),m=l(73460),h=(l(8781),l(26240)),v=l(42518),p=(l(91284),l(77020),l(24858)),A=(l(18285),l(20566)),j=l(93445),g=l(44563),b=(l(99543),l(37230)),y=(l(22030),l(88073),l(50857),l(85900)),S=(l(2722),l(95692)),_=(l(86178),l(73216)),f=(l(70255),l(28153),l(54620),l(14398),l(19668)),w=l(2010),k=l(70579);const z=function(){var e,s,l,z,C,q;(0,h.A)();const{user:I}=(0,f.A)(),T=(0,_.Zp)(),[D,P]=(0,t.useState)(!1),[L,F]=(0,t.useState)(!1),[N,R]=(0,t.useState)("no"),[E,V]=(0,t.useState)("no"),[Y,B]=(0,t.useState)(0),[M,W]=(0,t.useState)(0),[G,O]=(0,t.useState)([]);console.log(G,"data");const[Q,U]=(0,t.useState)([{itemCode:"",itemDescription:"TASHEEL AUTO 19",totalCharge:17.1,mbNo:"",applicationId:"",total:17.1}]),{register:H,handleSubmit:Z,getValues:J,setValue:K,watch:X,reset:$,formState:{errors:ee}}=(0,p.mN)(),{register:se,handleSubmit:le,setValue:te,getValues:ie,control:ae,watch:re,formState:{errors:ne}}=(0,p.mN)(),de=X("govt_fee",0),oe=X("center_fee",0),ce=X("bank_charges",0),ue=X("qty",1);(0,t.useEffect)((()=>{const e=X("discount")||0,s=((parseFloat(de)||0)+(parseFloat(oe)||0)+(parseFloat(ce)||0)-parseFloat(e))*(parseFloat(ue)||1);K("total",s>0?s:0)}),[de,oe,ce,ue,X("discount")]);const[xe,me]=(0,t.useState)([]),[he,ve]=t.useState(1),[pe,Ae]=(0,t.useState)(0),[je,ge]=(0,t.useState)(0),[be,ye]=(0,t.useState)([]),[Se,_e]=(0,t.useState)({id:"Instant",name:"Instant"}),[fe,we]=(0,t.useState)(),[ke,ze]=(0,t.useState)(!1),[Ce,qe]=(0,t.useState)(!1),[Ie,Te]=(0,t.useState)(!1),[De,Pe]=(0,t.useState)(!1),[Le,Fe]=(0,t.useState)(!1),[Ne,Re]=(0,t.useState)(!1),[Ee,Ve]=(0,t.useState)({monthlyVisaServiceCharges:!1,vipMedical:!1,extraTyping:!0}),[Ye,Be]=(0,t.useState)(null),[Me,We]=(0,t.useState)(null),[Ge,Oe]=(0,t.useState)(),[Qe,Ue]=(0,t.useState)(),[He,Ze]=(0,t.useState)(null),[Je,Ke]=(0,t.useState)(null),[Xe,$e]=(0,t.useState)(null),[es,ss]=(0,t.useState)(null),[ls,ts]=((0,t.useRef)(null),(0,t.useState)(!1)),[is,as]=(0,t.useState)([]),[rs,ns]=(0,t.useState)(null),[ds,os]=(0,t.useState)(null),[cs,us]=(0,t.useState)(null),[xs,ms]=(0,t.useState)(null),[hs,vs]=(0,t.useState)(null),[ps,As]=(0,t.useState)(null),[js,gs]=(0,t.useState)(null),[bs,ys]=(0,t.useState)([]),[Ss,_s]=(0,t.useState)(null),[fs,ws]=(0,t.useState)(null),[ks,zs]=(0,t.useState)(null),[Cs,qs]=(0,t.useState)(null),[Is,Ts]=(0,t.useState)(null),[Ds,Ps]=(0,t.useState)(null),[Ls,Fs]=(0,t.useState)(null),[Ns,Rs]=(0,t.useState)(null),[Es,Vs]=(0,t.useState)(null),[Ys,Bs]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{try{var e,s;let l={page:1,limit:1e3};const{data:t}=await w.A.getAccounts(l);console.log(null===t||void 0===t||null===(e=t.accounts)||void 0===e?void 0:e.rows),as(null===t||void 0===t||null===(s=t.accounts)||void 0===s?void 0:s.rows)}catch(l){(0,g.LY)(l)}})(),(async()=>{try{var e;let s={page:1,limit:1e3};const{data:l}=await w.A.getTax(s);console.log(null===l||void 0===l||null===(e=l.accounts)||void 0===e?void 0:e.rows),ys(null===l||void 0===l?void 0:l.tax)}catch(s){(0,g.LY)(s)}})(),(async()=>{try{let e={page:1,limit:1e3};const{data:s}=await y.A.getCategoryList(e);zs(null===s||void 0===s?void 0:s.categories)}catch(e){(0,g.LY)(e)}})(),(async()=>{try{let e={page:1,limit:1e3};const{data:s}=await y.A.getServiceItem(e);Fs(null===s||void 0===s?void 0:s.rows)}catch(e){(0,g.LY)(e)}})()}),[]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(i.A,{sx:{width:"100%"}}),(0,k.jsx)(i.A,{m:3,sx:{backgroundColor:"white",borderRadius:"12px"},children:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.A,{component:"form",onSubmit:le((async e=>{console.log(e);try{var s,l;let t={token_number:null===e||void 0===e?void 0:e.token,token_date:Je,invoice_prefix:"AAD",cost_center:null===e||void 0===e?void 0:e.cost_center,customer_name:null===e||void 0===e?void 0:e.display_customer,reception_id:null===Ys||void 0===Ys?void 0:Ys.id,customer_mobile:null===e||void 0===e?void 0:e.mobile,customer_email:null===e||void 0===e?void 0:e.email,ref:null===e||void 0===e?void 0:e.ref,total_amount:M,due_date:null===e||void 0===e?void 0:e.due_date,payment_method:null===e||void 0===e||null===(s=e.payment_method)||void 0===s?void 0:s.id,po_number:null===e||void 0===e?void 0:e.po_number,payment_status:null===e||void 0===e||null===(l=e.payment_status)||void 0===l?void 0:l.id,notes:null===e||void 0===e?void 0:e.notes,items:G};console.log(e,"formData");const i=y.A.CreateSaleReceipt(t);(0,S.y8)(i,"Saving...","Added Successfully","Something Went Wrong");const a=await i;200===(null===a||void 0===a?void 0:a.responseCode)&&T("/pre-sales")}catch(t){(0,g.LY)(t)}})),children:[(0,k.jsx)(i.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",p:3,alignItems:"flex-end"},children:(0,k.jsx)(a.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:"Purchase Receipt"})}),(0,k.jsx)(i.A,{sx:{p:3},children:(0,k.jsxs)(r.Ay,{container:!0,sx:{gap:"5px 25px"},children:[(0,k.jsx)(r.Ay,{item:!0,md:5.5,sm:12,xs:12,sx:{border:"2px solid black",p:2,borderRadius:"15px"},children:(0,k.jsxs)(r.Ay,{container:!0,sx:{gap:"5px 25px"},children:[(0,k.jsx)(r.Ay,{item:!0,md:5.7,sm:12,xs:12,children:(0,k.jsx)(A.A,{label:"Invoice No",size:"small",placeholder:"TSL/83540",register:se("invoice_no")})}),(0,k.jsx)(r.Ay,{item:!0,xs:5.7,children:(0,k.jsx)(j.A,{label:"Invoice Date :*",value:Je,size:"small",error:null===ne||void 0===ne||null===(e=ne.date)||void 0===e?void 0:e.message,register:se("date",{required:!Je&&"please enter  date."}),onChange:e=>{te("date",e),Ke(new Date(e))}})}),(0,k.jsx)(r.Ay,{item:!0,xs:5.7,children:(0,k.jsx)(j.A,{label:"Due Date :",size:"small",register:se("due_date"),onChange:e=>{te("due_date",e)}})}),(0,k.jsx)(r.Ay,{item:!0,xs:5.7,children:(0,k.jsx)(b.A,{size:"small",label:"Payment Method:",options:[{id:"cash",name:"Cash"},{id:"bank_transfer",name:"Bank Transfer"},{id:"credit_card",name:"Credit Card"},{id:"check",name:"Check"}],selected:re("payment_method"),onSelect:e=>{te("payment_method",e)},register:se("payment_method")})}),(0,k.jsx)(r.Ay,{item:!0,xs:5.7,children:(0,k.jsx)(b.A,{size:"small",label:"Vendors *:",options:[{id:"amazon",name:"Amazon"},{id:"ebay",name:"eBay"},{id:"alibaba",name:"Alibaba"}],selected:Es,onSelect:e=>{Vs(e)},error:null===ne||void 0===ne||null===(s=ne.customer)||void 0===s?void 0:s.message,register:se("customer",{required:!1})})})]})}),(0,k.jsx)(r.Ay,{item:!0,md:5.5,sm:12,xs:12,sx:{border:"2px solid black",p:2,borderRadius:"15px",mt:{md:0,sm:2,xs:2}},children:(0,k.jsxs)(r.Ay,{container:!0,sx:{gap:"5px 25px"},children:[(0,k.jsx)(r.Ay,{item:!0,md:5.7,sm:12,xs:12,children:(0,k.jsx)(A.A,{label:"Display Customer",size:"small",placeholder:"Walk-in Customer",register:se("display_customer",{required:"please enter display name."}),error:null===ne||void 0===ne||null===(l=ne.display_customer)||void 0===l?void 0:l.message})}),(0,k.jsx)(r.Ay,{item:!0,md:5.7,sm:12,xs:12,children:(0,k.jsx)(A.A,{label:"Mobile",size:"small",placeholder:"Mobile No",register:se("mobile",{required:"please enter mobile ."}),error:null===ne||void 0===ne||null===(z=ne.display_customer)||void 0===z?void 0:z.message})}),(0,k.jsx)(r.Ay,{item:!0,md:5.7,sm:12,xs:12,children:(0,k.jsx)(A.A,{label:"Email",size:"small",placeholder:"Email",register:se("email",{required:"please enter email ."}),error:null===ne||void 0===ne||null===(C=ne.email)||void 0===C?void 0:C.message})}),(0,k.jsx)(r.Ay,{item:!0,md:5.7,sm:12,xs:12,children:(0,k.jsx)(A.A,{label:"Ref",size:"small",placeholder:"Reference",register:se("ref")})}),(0,k.jsx)(r.Ay,{item:!0,md:5.7,sm:12,xs:12,children:(0,k.jsx)(A.A,{label:"Address",size:"small",placeholder:"Address",multiline:!0,rows:2,register:se("address",{required:"please enter address ."}),error:null===ne||void 0===ne||null===(q=ne.address)||void 0===q?void 0:q.message})}),(0,k.jsx)(r.Ay,{item:!0,md:5.7,sm:12,xs:12,children:(0,k.jsx)(A.A,{label:"Purchase Order #",size:"small",placeholder:"PO Number",register:se("po_number")})}),(0,k.jsx)(r.Ay,{item:!0,md:5.7,sm:12,xs:12,children:(0,k.jsx)(b.A,{size:"small",label:"Payment Status:",options:[{id:"paid",name:"Paid"},{id:"unpaid",name:"Unpaid"},{id:"partial",name:"Partially Paid"}],selected:re("payment_status"),onSelect:e=>{te("payment_status",e)},register:se("payment_status")})})]})})]})})]}),(0,k.jsx)("form",{onSubmit:Z((e=>{e.total;O((s=>{const l=[...s,e],t=l.reduce(((e,s)=>e+s.total),0);return W(t),l})),$(),Rs("")})),children:(0,k.jsx)(n.A,{component:d.A,children:(0,k.jsxs)(o.A,{children:[(0,k.jsx)(c.A,{children:(0,k.jsxs)(u.A,{children:[(0,k.jsx)(x.A,{sx:{width:"150px"},children:"Item Code"}),(0,k.jsx)(x.A,{sx:{width:"400px"},children:"Service"}),(0,k.jsx)(x.A,{sx:{width:"150px"},children:"Qty"}),(0,k.jsx)(x.A,{sx:{width:"150px"},children:"Govt fee"}),(0,k.jsx)(x.A,{sx:{width:"150px"},children:"Center fee"}),(0,k.jsx)(x.A,{sx:{width:"150px"},children:"Bank Charge"}),(0,k.jsx)(x.A,{sx:{width:"150px"},children:"Discount"}),(0,k.jsx)(x.A,{sx:{width:"150px"},children:"Tax"}),(0,k.jsx)(x.A,{sx:{width:"150px"},children:"Total"}),(0,k.jsx)(x.A,{sx:{width:"150px"},children:"Action"})]})}),(0,k.jsxs)(m.A,{children:[(0,k.jsxs)(u.A,{children:[(0,k.jsxs)(x.A,{children:[(0,k.jsx)(A.A,{size:"small",disabled:!0,placeholder:"Item code",register:H("item_code",{required:"Item code is required"})}),ee.item_code&&(0,k.jsx)("span",{children:ee.item_code.message})]}),(0,k.jsxs)(x.A,{children:[(0,k.jsx)(b.A,{size:"small",options:Ls,selected:Ns,onSelect:async e=>{console.log(e,"idididid"),Rs(e);try{var s,l,t,i;let a={service_id:null===e||void 0===e?void 0:e.id};const{data:r}=await y.A.DetailServiceItem(a);K("item_code",null===r||void 0===r||null===(s=r.service)||void 0===s?void 0:s.id),K("govt_fee",null===r||void 0===r||null===(l=r.service)||void 0===l?void 0:l.bank_service_charge),K("center_fee",null===r||void 0===r||null===(t=r.service)||void 0===t?void 0:t.center_fee),K("bank_charges",null===r||void 0===r||null===(i=r.service)||void 0===i?void 0:i.bank_service_charge),K("qty",1)}catch(a){(0,g.LY)(a)}},register:H("service",{required:"Please select a service."})}),ee.service&&(0,k.jsx)("span",{style:{color:"red"},children:ee.service.message})]}),(0,k.jsxs)(x.A,{children:[(0,k.jsx)(A.A,{size:"small",placeholder:"Quantity",type:"number",register:H("qty",{required:"Quantity is required"})}),ee.qty&&(0,k.jsx)("span",{style:{color:"red"},children:ee.qty.message})]}),(0,k.jsxs)(x.A,{children:[(0,k.jsx)(A.A,{size:"small",placeholder:"Govt fee",type:"number",register:H("govt_fee",{required:"Govt fee is required"})}),ee.govt_fee&&(0,k.jsx)("span",{style:{color:"red"},children:ee.govt_fee.message})]}),(0,k.jsxs)(x.A,{children:[(0,k.jsx)(A.A,{size:"small",placeholder:"Center Fee",type:"number",register:H("center_fee",{required:"Center fee is required"})}),ee.center_fee&&(0,k.jsx)("span",{style:{color:"red"},children:ee.center_fee.message})]}),(0,k.jsxs)(x.A,{children:[(0,k.jsx)(A.A,{size:"small",placeholder:"Bank Charges",type:"number",register:H("bank_charges",{required:"Bank charges are required"}),disabled:!0}),ee.bank_charges&&(0,k.jsx)("span",{style:{color:"red"},children:ee.bank_charges.message})]}),(0,k.jsx)(x.A,{children:(0,k.jsx)(A.A,{size:"small",placeholder:"Discount",type:"number",register:H("discount")})}),(0,k.jsx)(x.A,{children:(0,k.jsx)(b.A,{size:"small",options:bs||[],selected:Ss,onSelect:e=>{_s(e),K("tax",null===e||void 0===e?void 0:e.id)},register:H("tax")})}),(0,k.jsx)(x.A,{children:(0,k.jsx)(A.A,{disabled:!0,style:{border:"none"},size:"small",placeholder:"Narration",register:H("total")})}),(0,k.jsx)(x.A,{children:(0,k.jsx)(v.A,{variant:"contained",color:"primary",type:"submit",sx:{textTransform:"capitalize",backgroundColor:"rgb(189 155 74)",fontSize:"12px",":hover":{backgroundColor:"rgb(189 155 74)"}},children:"Add Item"})})]}),G.map(((e,s)=>(0,k.jsxs)(u.A,{children:[(0,k.jsx)(x.A,{children:null===e||void 0===e?void 0:e.item_code}),(0,k.jsx)(x.A,{children:null===e||void 0===e?void 0:e.service}),(0,k.jsx)(x.A,{children:null===e||void 0===e?void 0:e.qty}),(0,k.jsx)(x.A,{children:null===e||void 0===e?void 0:e.govt_fee}),(0,k.jsx)(x.A,{children:null===e||void 0===e?void 0:e.center_fee}),(0,k.jsx)(x.A,{children:null===e||void 0===e?void 0:e.bank_charges}),(0,k.jsx)(x.A,{children:null===e||void 0===e?void 0:e.discount}),(0,k.jsx)(x.A,{children:null===e||void 0===e?void 0:e.tax}),(0,k.jsx)(x.A,{children:null===e||void 0===e?void 0:e.total})]},s))),(0,k.jsx)(u.A,{children:(0,k.jsx)(x.A,{colSpan:8,align:"left",children:(0,k.jsx)(A.A,{label:"Notes",size:"small",placeholder:"Add notes about this purchase",multiline:!0,rows:2,register:se("notes")})})}),(0,k.jsxs)(u.A,{children:[(0,k.jsx)(x.A,{colSpan:9,align:"right",children:(0,k.jsx)(a.A,{variant:"h6",sx:{fontSize:"15px"},children:"Sub-total:"})}),(0,k.jsxs)(x.A,{children:[(0,k.jsx)(a.A,{variant:"h6",sx:{fontSize:"15px"},children:M})," "]})]}),(0,k.jsxs)(u.A,{children:[(0,k.jsx)(x.A,{colSpan:9,align:"right",children:(0,k.jsx)(a.A,{variant:"h6",sx:{fontSize:"15px"},children:"Amount Total:"})}),(0,k.jsxs)(x.A,{children:[(0,k.jsx)(a.A,{variant:"h6",sx:{fontSize:"15px"},children:M})," "]})]}),(0,k.jsx)(u.A,{children:(0,k.jsxs)(x.A,{colSpan:10,align:"center",children:[" ",(0,k.jsxs)(i.A,{sx:{display:"flex",gap:2,justifyContent:"center"},children:[(0,k.jsx)(v.A,{type:"submit",disabled:0===(null===G||void 0===G?void 0:G.length),variant:"contained",sx:{width:"350px",textTransform:"capitalize",backgroundColor:"#bd9b4a",":hover":{backgroundColor:"rgb(189 155 74)"}},children:"Place Purchase"}),(0,k.jsx)(v.A,{onClick:()=>T("/aldeed-list"),variant:"contained",sx:{width:"350px",textTransform:"capitalize",backgroundColor:"#bd9b4a",":hover":{backgroundColor:"rgb(189 155 74)"}},children:"Cancel"})]})]})})]})]})})})]})})]})}}}]);
//# sourceMappingURL=4443.195f47fb.chunk.js.map