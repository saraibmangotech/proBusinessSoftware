"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[9400],{19400:(e,l,o)=>{o.r(l),o.d(l,{default:()=>h});var i=o(65043),n=o(96446),t=o(68903),r=o(85865),s=o(91284),a=o(77020),d=o(20566),m=o(37230),u=o(24858),c=o(22030),v=o(85900),g=o(95692),b=o(29542),x=o(44563),p=o(73216),y=o(70579);const h=function(){var e,l,o,h,f,A,j,N,C,S,_,k,w;const z=(0,p.Zp)(),[E,P]=(0,i.useState)("company"),[R,W]=(0,i.useState)(null),[q,T]=(0,i.useState)(!0),[U,V]=(0,i.useState)(!0),[L,M]=(0,i.useState)(!1),[Y,$]=(0,i.useState)([]),[D,F]=(0,i.useState)(null),[I,O]=(0,i.useState)(null),[Q,Z]=(0,i.useState)([]),[B,G]=(0,i.useState)(!1),[H,J]=(0,i.useState)(!1),[K,X]=(0,i.useState)([]),[ee,le]=(0,i.useState)(null),{id:oe}=(0,p.g)(),{register:ie,handleSubmit:ne,getValues:te,setValue:re,formState:{errors:se}}=(0,u.mN)(),{register:ae,handleSubmit:de,setValue:me,getValues:ue,control:ce,watch:ve,formState:{errors:ge}}=(0,u.mN)(),{register:be,handleSubmit:xe,setValue:pe,getValues:ye,formState:{errors:he}}=(0,u.mN)(),fe=async e=>{try{let l={customer_id:e||(null===I||void 0===I?void 0:I.id)};const{data:o}=await v.A.getCompanies(l);Z(null===o||void 0===o?void 0:o.companies)}catch(l){console.error("Error fetching location:",l)}};return console.log(I,"selectedCustomer"),(0,i.useEffect)((()=>{(async()=>{try{let e={page:1,limit:1e3};const{data:l}=await v.A.getCategoryList(e);X(null===l||void 0===l?void 0:l.categories)}catch(e){(0,g.Ni)(e)}})(),(async()=>{try{let e={reception_id:oe};const{data:l}=await v.A.getReceptionDetail(e);let o=null===l||void 0===l?void 0:l.token;console.log(o),W(o),null===o||void 0===o||o.customer_name;let i=await Y.find((e=>(null===e||void 0===e?void 0:e.id)==(null===o||void 0===o?void 0:o.customer_id)));console.log(i,"filterfilter"),O(i),me("customer",i),re("mobile",null===o||void 0===o?void 0:o.mobile),re("customerName",null===o||void 0===o?void 0:o.customer_name),re("tokenNumber",null===o||void 0===o?void 0:o.token_number),re("reference",null===o||void 0===o?void 0:o.reference),re("email",null===o||void 0===o?void 0:o.email),le(null===o||void 0===o?void 0:o.service_category),me("service",null===o||void 0===o?void 0:o.service_category),me("mobile",null===o||void 0===o?void 0:o.mobile),me("customerName",null===o||void 0===o?void 0:o.customer_name),me("tokenNumber",null===o||void 0===o?void 0:o.token_number),me("reference",null===o||void 0===o?void 0:o.reference),me("email",null===o||void 0===o?void 0:o.email),fe(null===o||void 0===o?void 0:o.customer_id)}catch(e){console.error("Error fetching location:",e)}})(),(async()=>{try{let e={page:1,limit:1e3};const{data:l}=await v.A.getCustomerQueue(e);$(null===l||void 0===l?void 0:l.rows)}catch(e){(0,g.Ni)(e)}})()}),[]),(0,i.useEffect)((()=>{const e=Q.find((e=>(null===e||void 0===e?void 0:e.id)==(null===R||void 0===R?void 0:R.company_id))),l=Y.find((e=>(null===e||void 0===e?void 0:e.id)==(null===R||void 0===R?void 0:R.customer_id)));console.log(l,"filterfilter"),e&&l&&(console.log("Company:",e),console.log("Customer:",l),O(l),O(l),me("customer",l),O(l),re("company",e),F(e))}),[Y,Q,R]),(0,y.jsxs)(n.A,{m:3,sx:{backgroundColor:"white",borderRadius:"12px"},children:[(0,y.jsx)(b.A,{open:B,onClose:()=>G(!1),title:"Change Status?",children:(0,y.jsx)(n.A,{component:"form",onSubmit:xe((async e=>{console.log(e);try{let l={code:null===e||void 0===e?void 0:e.code,name:null===e||void 0===e?void 0:e.name,customer_id:null===I||void 0===I?void 0:I.id};const o=v.A.addCompany(l);(0,g.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const i=await o;200===(null===i||void 0===i?void 0:i.responseCode)&&(fe(),G(!1))}catch(l){(0,x.LY)(l)}})),children:(0,y.jsx)(t.Ay,{container:!0,spacing:2,children:(0,y.jsxs)(t.Ay,{container:!0,sx:{justifyContent:"center"},children:[(0,y.jsx)(t.Ay,{item:!0,xs:12,children:(0,y.jsx)(d.A,{label:"Name *:",size:"small",placeholder:" Name",error:null===he||void 0===he||null===(e=he.name)||void 0===e?void 0:e.message,register:be("name",{required:"Please enter  name."})})}),(0,y.jsx)(t.Ay,{item:!0,xs:12,children:(0,y.jsx)(d.A,{label:"Code *:",size:"small",placeholder:" Code",error:null===he||void 0===he||null===(l=he.code)||void 0===l?void 0:l.message,register:be("code",{required:"Please enter  code."})})}),(0,y.jsxs)(t.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,y.jsx)(s.jn,{bgcolor:a.A.primary,title:"Yes,Confirm",type:"submit"}),(0,y.jsx)(s.jn,{onClick:()=>G(!1),bgcolor:"#FF1F25",title:"No,Cancel"})]})]})})})}),(0,y.jsx)(n.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",p:3,alignItems:"flex-end"},children:(0,y.jsx)(r.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:"Update Reception"})}),"individual"==E?(0,y.jsx)(n.A,{component:"form",onSubmit:ne((async e=>{M(!0),console.log(e);try{let l={customer_id:null===I||void 0===I?void 0:I.id,service_category_id:null===ee||void 0===ee?void 0:ee.id,service_category:null===ee||void 0===ee?void 0:ee.name,customer_name:null===e||void 0===e?void 0:e.customerName,email:null===e||void 0===e?void 0:e.email,mobile:null===e||void 0===e?void 0:e.mobile,token_number:null===e||void 0===e?void 0:e.tokenNumber,reference:null===e||void 0===e?void 0:e.reference,company_id:null===D||void 0===D?void 0:D.id};const o=v.A.CreateReception(l);(0,g.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const i=await o;200===(null===i||void 0===i?void 0:i.responseCode)&&z("/reception-list")}catch(l){(0,x.LY)(l)}finally{M(!1)}})),children:(0,y.jsx)(n.A,{sx:{p:3},children:(0,y.jsxs)(t.Ay,{container:!0,sx:{gap:"5px 25px"},children:[(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Mobile *:",size:"small",type:"number",placeholder:"Mobile",error:null===se||void 0===se||null===(o=se.mobile)||void 0===o?void 0:o.message,register:ie("mobile",{required:"Please enter your mobile.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."},onChange:e=>{console.log(e.target.value),10==e.target.value.length&&(0,c.O0)((()=>(async e=>{try{let l={mobile:e};const{data:o}=await v.A.getCustomerDetail(l);let i=null===o||void 0===o?void 0:o.customer;console.log(i),re("customerName",null===i||void 0===i?void 0:i.name),re("email",null===i||void 0===i?void 0:i.email),re("mobile",null===i||void 0===i?void 0:i.mobile)}catch(l){console.error("Error fetching location:",l)}})(e.target.value)))}})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Token Number *:",size:"small",placeholder:"Token Number",error:null===se||void 0===se||null===(h=se.tokenNumber)||void 0===h?void 0:h.message,register:ie("tokenNumber",{required:"Enter Token Number"})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Customer Name *:",size:"small",placeholder:"Customer Name",error:null===se||void 0===se||null===(f=se.customerName)||void 0===f?void 0:f.message,register:ie("customerName",{required:"Please enter customer name."})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Reference :",size:"small",placeholder:"Reference",error:null===se||void 0===se||null===(A=se.reference)||void 0===A?void 0:A.message,register:ie("reference")})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Email *:",size:"small",type:"email",placeholder:"Email",error:null===se||void 0===se||null===(j=se.email)||void 0===j?void 0:j.message,register:ie("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})}),(0,y.jsx)(t.Ay,{container:!0,justifyContent:"flex-end",children:(0,y.jsx)(s.jn,{disabled:q||L,bgcolor:"#bd9b4a",title:"Update",type:"submit"})})]})})}):(0,y.jsx)(n.A,{component:"form",onSubmit:de((async e=>{M(!0),console.log(e);try{let l={id:oe,customer_name:null===e||void 0===e?void 0:e.customerName,service_category_id:null===ee||void 0===ee?void 0:ee.id,customer_id:null===I||void 0===I?void 0:I.id,mobile:null===e||void 0===e?void 0:e.mobile,token_number:null===e||void 0===e?void 0:e.tokenNumber,email:null===e||void 0===e?void 0:e.email,reference:null===e||void 0===e?void 0:e.reference};const o=v.A.UpdateReception(l);(0,g.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const i=await o;200===(null===i||void 0===i?void 0:i.responseCode)&&z("/reception-list")}catch(l){(0,x.LY)(l)}finally{M(!1)}})),children:(0,y.jsx)(n.A,{sx:{p:3},children:(0,y.jsxs)(t.Ay,{container:!0,sx:{gap:"5px 25px"},children:[(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Mobile *:",size:"small",type:"number",placeholder:"Mobile",error:null===ge||void 0===ge||null===(N=ge.mobile)||void 0===N?void 0:N.message,register:ae("mobile",{required:"Please enter your mobile.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."},onChange:e=>{console.log(e.target.value),10==e.target.value.length&&(0,c.O0)((()=>(async e=>{try{let l={mobile:e};const{data:o}=await v.A.getCustomerDetail(l);let i=null===o||void 0===o?void 0:o.customer;if(console.log(i),null!==o&&void 0!==o&&o.customer)O(i),me("customer",i),me("customerName",null===i||void 0===i?void 0:i.name),me("email",null===i||void 0===i?void 0:i.email),me("mobile",null===i||void 0===i?void 0:i.mobile);else{let e=await Y.find((e=>"Walk-In Customer"==(null===e||void 0===e?void 0:e.name)));console.log(e),O(e),me("customer",null===e||void 0===e?void 0:e.name)}}catch(l){console.error("Error fetching location:",l)}})(e.target.value)))}})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Token Number *:",size:"small",placeholder:"Token Number",error:null===ge||void 0===ge||null===(C=ge.tokenNumber)||void 0===C?void 0:C.message,register:ae("tokenNumber",{required:"Enter Token Number"})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Customer Name *:",size:"small",placeholder:"Customer Name",error:null===ge||void 0===ge||null===(S=ge.customerName)||void 0===S?void 0:S.message,register:ae("customerName",{required:"Please enter customer name."})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Reference:",size:"small",placeholder:"Reference",error:null===ge||void 0===ge||null===(_=ge.reference)||void 0===_?void 0:_.message,register:ae("reference")})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Email :",size:"small",type:"email",placeholder:"Email",error:null===ge||void 0===ge||null===(k=ge.email)||void 0===k?void 0:k.message,register:ae("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(m.A,{size:"small",label:"Customer *:",options:Y,selected:I,onSelect:e=>{O(e),"Walk-In Customer"==(null===e||void 0===e?void 0:e.name)?(J(!0),me("customerName",""),me("email",""),me("mobile","")):(console.log(e),me("customerName",null===e||void 0===e?void 0:e.name),me("email",null===e||void 0===e?void 0:e.email),me("mobile",null===e||void 0===e?void 0:e.mobile),J(!1))},error:null===ge||void 0===ge||null===(w=ge.customer)||void 0===w?void 0:w.message,register:ae("customer")})}),(0,y.jsx)(t.Ay,{container:!0,justifyContent:"flex-end",children:(0,y.jsx)(s.jn,{bgcolor:"#bd9b4a",title:"Update",type:"submit"})})]})})})]})}}}]);
//# sourceMappingURL=9400.d659c528.chunk.js.map