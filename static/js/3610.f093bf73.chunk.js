"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[3610],{43610:(e,t,i)=>{i.r(t),i.d(t,{default:()=>U});var n=i(65043),l=i(28076),s=i(39652),a=i(77502),o=i(96446),r=i(68903),d=i(85865),c=i(79650),p=i(63336),x=i(71806),u=i(84882),m=i(73460),h=i(54620),g=i(45903),A=i(73216),f=i(77020),y=i(23602),j=(i(44563),i(36838),i(42165),i(66535),i(85900),i(83992)),v=i(91395),b=i(22030),S=(i(20566),i(24858)),C=i(79456),w=i(4841),k=i(29542),E=i(91284),F=(i(37230),i(72450),i(86005)),N=i(86178),_=i.n(N),W=(i(54667),i(99543)),z=i(95692),M=(i(70255),i(61137)),T=i(70579);const D=(0,g.A)(l.A)((e=>{let{theme:t}=e;return{border:0}})),I=(0,g.A)(s.A)((e=>{let{theme:t}=e;return{[`&.${a.A.head}`]:{fontSize:14,fontFamily:"Public Sans",border:"1px solid #EEEEEE",padding:"15px",textAlign:"left",whiteSpace:"nowrap",color:"#434343",paddingRight:"50px",background:"transparent",fontWeight:"bold"},[`&.${a.A.body}`]:{fontSize:14,fontFamily:"Public Sans",textWrap:"nowrap",padding:"5px !important",paddingLeft:"15px !important",".MuiBox-root":{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",".MuiBox-root":{cursor:"pointer"}},svg:{width:"auto",height:"24px"},".MuiTypography-root":{textTransform:"capitalize",fontFamily:h.ay.NunitoRegular,textWrap:"nowrap"},".MuiButtonBase-root":{padding:"8px",width:"28px",height:"28px"}}}})),R=(0,j.A)({loaderWrap:{display:"flex",height:100,"& svg":{width:"40px !important",height:"40px !important"}}});const U=function(){const{register:e,handleSubmit:t,getValues:i,setValue:l,formState:{errors:s}}=(0,S.mN)(),a=(0,A.Zp)(),g=(R(),(0,C.wA)()),j=(0,n.useRef)(null),[N,U]=(0,n.useState)(!1),[P,Y]=(0,n.useState)("asc"),[B,$]=(0,n.useState)([]),[H,J]=(0,n.useState)(0),[L,V]=(0,n.useState)(50),[X,Z]=(0,n.useState)(1),[q,G]=(0,n.useState)(!1),[K,O]=(0,n.useState)(),[Q,ee]=(0,n.useState)({}),[te,ie]=(0,n.useState)(),[ne,le]=(0,n.useState)(!1),[se,ae]=(0,n.useState)(),oe=async(e,t,i)=>{try{var n,l;const s=e||X,a=t||L,o=i?{...Q,...i}:null;Z(s),V(a),ee(o);let r={page:s,limit:a};r={...r,...o};const{data:d}=await M.A.getUsers(r);$(null===d||void 0===d||null===(n=d.users)||void 0===n?void 0:n.rows),J(null===d||void 0===d||null===(l=d.users)||void 0===l?void 0:l.count),console.log((0,b.TJ)(null===d||void 0===d?void 0:d.permissions)),ie((0,b.TJ)(null===d||void 0===d?void 0:d.permissions)),null===d||void 0===d||d.permissions.forEach((e=>{null!==e&&void 0!==e&&e.route&&null!==e&&void 0!==e&&e.identifier&&null!==e&&void 0!==e&&e.permitted&&g((0,w.Ft)(null===e||void 0===e?void 0:e.route))}))}catch(s){(0,z.Ni)(s)}},re=async e=>{le(!0);try{let t={id:se,is_active:e};console.log(t);const i=M.A.updateUser(t);(0,z.y8)(i,"Saving ...","Success","Something Went Wrong");const n=await i;200===(null===n||void 0===n?void 0:n.responseCode)&&(oe(),G(!1))}catch(t){(0,z.Ni)(t)}finally{le(!1)}};return(0,n.useEffect)((()=>{oe()}),[]),(0,T.jsxs)(o.A,{sx:{p:3},children:[(0,T.jsx)(k.A,{open:q,onClose:()=>G(!1),title:"Are You Sure?",children:(0,T.jsx)(r.Ay,{container:!0,spacing:2,children:(0,T.jsx)(r.Ay,{container:!0,sx:{justifyContent:"center"},children:(0,T.jsxs)(r.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,T.jsx)(E.jn,{bgcolor:f.A.primary,title:"Activate",onClick:()=>re(!0)}),(0,T.jsx)(E.jn,{onClick:()=>re(!1),bgcolor:"#FF1F25",title:"Deactivate"})]})})})}),(0,T.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,T.jsx)(d.A,{sx:{fontSize:"24px",fontWeight:"bold"},children:"User Management"}),(0,T.jsx)(E.jn,{bgcolor:"#bd9b4a",title:"Create User",onClick:()=>a("/create-user"),loading:ne})]}),(0,T.jsxs)(o.A,{children:[(0,T.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,T.jsx)(r.Ay,{item:!0,xs:6,children:(0,T.jsx)(W.A,{type:"text",bgcolor:"#FAFAFA",color:f.A.primary,border:"3px solid #FAFAFA",StartLabel:"Search",placeholder:"Search",register:e("search")})}),(0,T.jsxs)(r.Ay,{item:!0,xs:6,display:"flex",justifyContent:"flex-end",gap:2,children:[(0,T.jsx)(E.jn,{bgcolor:"#0076bf",textcolor:f.A.white,title:"Reset",onClick:()=>{l("search",""),oe(1,"",null)},loading:ne}),(0,T.jsx)(E.jn,{bgcolor:"#bd9b4a",title:"Search",onClick:()=>(()=>{let e={search:i("search")};(0,b.S$)((()=>oe(1,"",e)))})(),loading:ne})]})]}),(0,T.jsx)(r.Ay,{item:!0,md:11,children:B&&(0,T.jsxs)(o.A,{children:[(0,T.jsx)(r.Ay,{container:!0,mb:2}),B&&(0,T.jsxs)(n.Fragment,{children:[(0,T.jsx)(F.X,{ref:j,landscape:!0,paperSize:"A4",margin:5,fileName:"Import Customers",children:(0,T.jsx)(c.A,{component:p.A,sx:{maxHeight:"calc(100vh - 200px)",mt:5,backgroundColor:"transparent",boxShadow:"none !important",borderRadius:"0px !important"},children:(0,T.jsxs)(x.A,{stickyHeader:!0,sx:{minWidth:500},children:[(0,T.jsx)(u.A,{children:(0,T.jsx)(D,{children:[{name:"Create Date",key:""},{name:"User Name ",key:"name"},{name:"Employee ID",key:"employee_id"},{name:"User Role",key:""},{name:"Status",key:""},{name:"Actions",key:""}].map(((e,t)=>(0,T.jsx)(I,{style:{textAlign:"left !important"},className:"pdf-table",children:(0,T.jsx)(o.A,{children:null===e||void 0===e?void 0:e.name})},t)))})}),(0,T.jsx)(m.A,{children:B.map(((e,t)=>{var i;return(0,T.jsxs)(D,{sx:{border:"1px solid #EEEEEE !important"},children:[(0,T.jsx)(I,{style:{textAlign:"left"},className:"pdf-table",children:_()(null===e||void 0===e?void 0:e.created_at).format("MM-DD-YYYY")}),(0,T.jsx)(I,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.name}),(0,T.jsx)(I,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.employee_id}),(0,T.jsx)(I,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e||null===(i=e.role)||void 0===i?void 0:i.name}),(0,T.jsx)(I,{style:{textAlign:"left"},className:"pdf-table",children:(0,T.jsxs)(o.A,{component:"div",onClick:()=>{null!==te&&void 0!==te&&te.status_update&&(G(!0),ae(null===e||void 0===e?void 0:e.id))},sx:{cursor:"pointer",display:"flex !important",justifyContent:"flex-start !important"},children:[(0,T.jsx)(o.A,{component:"img",src:null!==e&&void 0!==e&&e.is_active?h.To.successIcon:h.To.errorIcon,width:"13px"}),null!==e&&void 0!==e&&e.is_active?"Activated":"Deactivated"]})}),(0,T.jsx)(I,{style:{textAlign:"left"},className:"pdf-table",children:(0,T.jsx)(o.A,{sx:{display:"flex !important",justifyContent:"flex-start !important"},children:(null===te||void 0===te?void 0:te.edit)&&(0,T.jsx)(o.A,{component:"img",src:h.To.editIcon,onClick:()=>a("/update-user",{state:e}),width:"35px"})})})]},t)}))})]})})}),(0,T.jsx)(v.A,{currentPage:X,pageSize:L,onPageSizeChange:e=>oe(1,e.target.value),tableCount:null===B||void 0===B?void 0:B.length,totalCount:H,onPageChange:e=>oe(e,"")})]}),N&&(0,T.jsx)(y.$,{})]})})]})]})}}}]);
//# sourceMappingURL=3610.f093bf73.chunk.js.map