"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[562],{10562:(e,l,i)=>{i.r(l),i.d(l,{default:()=>K});var a=i(96446),o=i(90035),t=i(26600),s=i(35316),r=i(98533),n=i(68903),d=i(85865),u=i(53193),c=i(78492),p=i(74605),v=i(14256),y=i(51962),m=i(29347),x=i(42518),h=i(17392),g=i(77020),_=i(91284),A=i(93445),b=i(20566),j=i(99543),C=i(95692),f=i(37230),k=i(44563),w=i(18285),S=i(88073),q=i(86178),R=i.n(q),D=i(65043),E=i(24858),P=i(85900),L=i(50857),N=i(22030),F=i(63471),I=i(87383),W=i(73216),O=i(70255),z=i(19668),V=i(51593),Y=i(14398),U=i(45479),M=i(16819),B=i(68145),T=i(4055),$=i(70579);const K=()=>{var e,l,i,q,K,H,Z,Q,G,J,X,ee,le,ie,ae,oe,te,se,re,ne,de,ue,ce,pe,ve;const ye=(0,W.Zp)(),{register:me,handleSubmit:xe,getValues:he,setValue:ge,control:_e,formState:{errors:Ae},reset:be}=(0,E.mN)(),[je,Ce]=(0,D.useState)(!1),[fe]=(0,Y.Z)(je),{register:ke,handleSubmit:we,setValue:Se,formState:{errors:qe}}=(0,E.mN)(),{register:Re,handleSubmit:De,setValue:Ee,getValues:Pe,formState:{errors:Le}}=(0,E.mN)(),[Ne,Fe]=(0,D.useState)([]),[Ie,We]=(0,D.useState)(null),[Oe,ze]=D.useState(!1),[Ve,Ye]=D.useState(!1),[Ue,Me]=D.useState("paper"),[Be,Te]=(0,D.useState)("In"),[$e,Ke]=(0,D.useState)("1 year"),[He,Ze]=(0,D.useState)(null),[Qe,Ge]=(0,D.useState)(),[Je,Xe]=(0,D.useState)(),[el,ll]=(0,D.useState)(!1),[il,al]=(0,D.useState)(!1),[ol,tl]=(0,D.useState)([]),[sl,rl]=(0,D.useState)(null),[nl,dl]=(0,D.useState)(!1),[ul,cl]=(0,D.useState)(0),[pl,vl]=(0,D.useState)(50),[yl,ml]=(0,D.useState)(1),xl=["image/png","image/jpg","image/jpeg","application/pdf","application/vnd.ms-excel","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],[hl,gl]=(0,D.useState)(0),[_l,Al]=(0,D.useState)(0),[bl,jl]=(0,D.useState)(null),[Cl,fl]=(0,D.useState)(null),[kl,wl]=(0,D.useState)(),[Sl,ql]=(0,D.useState)(),[Rl,Dl]=(0,D.useState)(),[El,Pl]=(0,D.useState)(),[Ll,Nl]=(0,D.useState)(),[Fl,Il]=(0,D.useState)([]),[Wl,Ol]=(0,D.useState)(),{user:zl,userLogout:Vl}=(0,z.A)(),[Yl,Ul]=(0,D.useState)(!1),[Ml,Bl]=(0,D.useState)(!1),[Tl,$l]=(0,D.useState)(!1),[Kl,Hl]=(0,D.useState)([]),[Zl,Ql]=(0,D.useState)(!1),[Gl,Jl]=(0,D.useState)(!1),[Xl,ei]=(0,D.useState)(!1),[li,ii]=(0,D.useState)(),[ai,oi]=(0,D.useState)(!1),[ti,si]=(0,D.useState)(!1),[ri,ni]=(0,D.useState)(null),[di,ui]=(0,D.useState)(null),[ci,pi]=(0,D.useState)({}),[vi,yi]=(0,D.useState)(null),[mi,xi]=(0,D.useState)({monthlyVisaServiceCharges:!0,vipMedical:!1,extraTyping:!0}),[hi,gi]=(0,D.useState)([{name:"Employee Undertaking",key:"undertaking",path:"",expiry_date:null,is_required:!0},{name:"Company Undertaking",key:"cundertaking",path:"",expiry_date:null,is_required:!0},{name:"Passport Copy",key:"passportcopy",path:"",expiry_date:null,is_required:!0},{name:"Digital Photo",key:"digitalphoto",path:"",expiry_date:null,is_required:!0},{name:"Employment Contract",key:"contract",path:"",expiry_date:null,is_required:!0},{name:"Offer Letter",key:"offerletter",path:"",expiry_date:null,is_required:!0},{name:"Previous Emirates Ids",key:"emiratesids",path:"",expiry_date:null,is_required:!1},{name:"Previous UAE Visa Copy",key:"uaevisa",path:"",expiry_date:null,is_required:!1},{name:"Cancellation",key:"cancellation",path:"",expiry_date:null,is_required:!1},{name:"UAE Driving License",key:"drivinglicense",path:"",expiry_date:null,is_required:!1},{name:"Work Permit",key:"workpermit",path:"",expiry_date:null,is_required:!1},{name:"Other Documents",key:"otherdoc",path:"",expiry_date:null,is_required:!1}]),_i=e=>{try{if("Invalid Date"==e)return void yi("invalid");yi(new Date(e))}catch(l){(0,k.LY)(l)}},Ai=()=>{ze(!1)},bi=(e,l)=>{console.log(l);const i=hi.map((i=>i.key===e?{...i,path:l}:i));console.log(i,"updatedDocuments"),gi(i)},ji=async(e,l)=>{ei(l);try{e.preventDefault();let l="";console.log(e.target.files.length,"length");const i=e.target;for(let a=0;a<e.target.files.length;a++){const i=e.target.files[a];let o=[{name:null===i||void 0===i?void 0:i.name,file:"",type:null===i||void 0===i?void 0:i.type.split("/")[1],size:(0,N.KU)(i.size),isUpload:!1}],t=10485760;if(i.size>t)(0,C.Ni)("File Size Must Be Less than 10 MB");else{const e=`${(new Date).toISOString().split("T")[0]}_${i.name}`,a=new File([i],e,{type:i.type}),t=await fi(a,o);l?l+=","+t:l=t,ei(!1)}}return console.log(l,"path"),i.value="",l}catch(i){(0,k.LY)(i)}},Ci=async e=>{Ce(!1),console.log(Ie);const l=Fl.reduce(((e,l)=>e+l.visa_charges),0),i=Fl.reduce(((e,l)=>e+l.visa_cost),0);Fl.reduce(((e,l)=>e+l.salary_total),0);if(Wl<kl&&!di)(0,C.Ni)("Deposit Balance Is Low");else{console.log(l);try{let e="visa"===Cl?parseFloat(Ll)*Fl.length:kl,a={customer_id:null===Ie||void 0===Ie?void 0:Ie.id,customer_name:null===Ie||void 0===Ie?void 0:Ie.name,due_date:null===He||void 0===He?void 0:He.due_date_policy,agent_id:null===He||void 0===He?void 0:He.agent_id,force_create:di,deposit_balance:parseFloat(Wl)-parseFloat(e),total_deposit_charges:"visa"===Cl?parseFloat(Ll)*Fl.length:kl,total_visa_charges:l,total_visa_cost:i,request_date:new Date,candidates:Fl};console.log(a,"obj");const o=I.A.AddVisa(a);(0,C.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const t=await o;200===(null===t||void 0===t?void 0:t.responseCode)&&ye("/visa-list")}catch(a){console.log(a)}}},fi=async(e,l)=>{gl(0);try{const o=new FormData;o.append("document",e),console.log(e);const{data:t}=await S.A.post(L.A.uploadDocuments,o,{onUploadProgress:e=>{const l=e.loaded,i=Math.round(100*l/e.total);gl(i),console.log((0,N.KU)(l)),Al((0,N.KU)(l))}});var i,a;if(t)return l[0].isUpload=!0,l[0].file=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.nations,console.log(t,"asddasasd"),null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.path}catch(o){(0,k.LY)(o)}},ki=D.useRef(null);D.useEffect((()=>{if(Oe){const{current:e}=ki;null!==e&&e.focus()}}),[Oe]);const wi=e=>{if("update"==e){let e=Pe("basic"),l=Pe("allowance");if(e&&l){let i=parseFloat(e)+parseFloat(l);Ee("totalSalary",i),console.log(i),console.log(Je),al(i*(Sl/100)>Wl),i>Je?"payroll"==li.toLowerCase()&&ll(!0):(ll(!1),al(!1))}}else{let e=he("basic"),l=he("allowance");if(e&&l){let i=parseFloat(e)+parseFloat(l);ge("totalSalary",i),console.log(i),console.log(Je),al(i*(Sl/100)>Wl),i>Je?"payroll"==li.toLowerCase()&&ll(!0):ll(!1)}}},Si=()=>{let e=[];$e.includes("1")&&"in"==Be.toLowerCase()?e=["1yearInsideRate","1yearRenewalRates","monthlyVisaServiceCharges","vipMedical","extraTyping"]:$e.includes("1")&&"out"==Be.toLowerCase()?e=["1yearOutsideRate","1yearRenewalRates","monthlyVisaServiceCharges","vipMedical","extraTyping"]:$e.includes("2")&&"in"==Be?e=["2yearInsideRate","2yearRenewalRates","monthlyVisaServiceCharges","vipMedical","extraTyping"]:$e.includes("2")&&"out"===Be.toLowerCase()&&(e=["2yearOutsideRate","2yearRenewalRates","monthlyVisaServiceCharges","vipMedical","extraTyping"]);const l=he(e).reduce(((e,l)=>e+(parseFloat(l)||0)),0);Pl(l),console.log("Total Visa Charges:",l)},qi=async(e,l)=>{try{let y={customer_id:e};if(e){var i,a,o,t,s,r,n,d;const{data:m}=await P.A.getCustomerDetail(y);var u,c,p,v;if(console.log(null===m||void 0===m||null===(i=m.details)||void 0===i?void 0:i.security_deposit_scenario),ui(null===m||void 0===m||null===(a=m.details)||void 0===a?void 0:a.bypass_requirements),null!==m&&void 0!==m&&null!==(o=m.details)&&void 0!==o&&o.bypass_requirements?Ql(!1):Ri(1,1,{},e),fl(null===m||void 0===m||null===(t=m.details)||void 0===t?void 0:t.security_deposit_scenario),Ol(null===m||void 0===m||null===(s=m.details)||void 0===s?void 0:s.deposit_balance),ii(null===m||void 0===m||null===(r=m.details)||void 0===r?void 0:r.security_deposit_scenario),"visa"==(null===m||void 0===m||null===(n=m.details)||void 0===n?void 0:n.security_deposit_scenario))Xe(null===m||void 0===m||null===(u=m.details)||void 0===u?void 0:u.visa_eligibility_remaining),Nl(null===m||void 0===m||null===(c=m.details)||void 0===c?void 0:c.deposit_per_visa);else ql(parseFloat(null===m||void 0===m||null===(p=m.details)||void 0===p?void 0:p.payroll_percentage)),Xe(null===m||void 0===m||null===(v=m.details)||void 0===v?void 0:v.payroll_eligibility);Dl(parseFloat(null===m||void 0===m||null===(d=m.details)||void 0===d?void 0:d.deposit_balance)),Ze(null===m||void 0===m?void 0:m.details);let x=null===m||void 0===m?void 0:m.details;"update"==l&&(Ee("1yearInsideRate",null===x||void 0===x?void 0:x.one_year_inside),Ee("1yearOutsideRate",null===x||void 0===x?void 0:x.one_year_outside),Ee("1yearRenewalRates",null===x||void 0===x?void 0:x.one_year_renewal),Ee("2yearInsideRate",null===x||void 0===x?void 0:x.two_year_inside),Ee("2yearOutsideRate",null===x||void 0===x?void 0:x.two_year_outside),Ee("2yearRenewalRates",null===x||void 0===x?void 0:x.two_year_renewal),Ee("monthlyVisaServiceCharges",null===x||void 0===x?void 0:x.monthly_visa_service),Si()),ge("1yearInsideRate",null===x||void 0===x?void 0:x.one_year_inside),ge("1yearOutsideRate",null===x||void 0===x?void 0:x.one_year_outside),ge("1yearRenewalRates",null===x||void 0===x?void 0:x.one_year_renewal),ge("2yearInsideRate",null===x||void 0===x?void 0:x.two_year_inside),ge("2yearOutsideRate",null===x||void 0===x?void 0:x.two_year_outside),ge("2yearRenewalRates",null===x||void 0===x?void 0:x.two_year_renewal),ge("monthlyVisaServiceCharges",null===x||void 0===x?void 0:x.monthly_visa_service),ge("vipMedical",null===x||void 0===x?void 0:x.medical_extra),Ee("vipMedical",null===x||void 0===x?void 0:x.medical_extra),parseFloat(null===x||void 0===x?void 0:x.medical_extra)>0?dl(!0):dl(!1),Si()}}catch(y){(0,C.Ni)(y)}},Ri=async(e,l,i,a)=>{try{const o=e||yl,t=l||pl,s={...ci,...i};ml(o),vl(t),pi(s);let r={page:o,limit:1,customer_id:"C"==(null===zl||void 0===zl?void 0:zl.user_type)?null===zl||void 0===zl?void 0:zl.customer_id:a};r={...r,...s};const{data:n}=await P.A.checkWPS(r);Ql(null===n||void 0===n?void 0:n.wpsRequired),console.log(n)}catch(o){(0,C.Ni)(o)}},Di=async(e,l,i)=>{if(console.log(hi),"path"===e){const e=hi.map((e=>e.key===i?{...e,path:l}:e));console.log(e),gi(e)}else{const e=hi.map((e=>e.key===i?{...e,expiry_date:R()(l).format("YYYY-MM-DD")}:e));console.log(e),gi(e)}};return(0,D.useEffect)((()=>{(async(e,l,i)=>{try{const o=e||yl,t=l||pl,s={...ci,...i};ml(o),vl(t),pi(s);let r={page:o,limit:1e3};r={...r,...s};const{data:n}=await P.A.getCustomerQueue(r);if("C"==(null===zl||void 0===zl?void 0:zl.user_type)){var a;console.log(Ne);let e=null===n||void 0===n||null===(a=n.rows)||void 0===a?void 0:a.find((e=>(null===e||void 0===e?void 0:e.id)==(null===zl||void 0===zl?void 0:zl.customer_id)));console.log(e),We(e),Se("customer",e),qi(null===e||void 0===e?void 0:e.id)}Fe(null===n||void 0===n?void 0:n.rows)}catch(o){(0,C.Ni)(o)}})(),(async()=>{try{var e;const{data:l}=await O.A.getCountries();tl(null===l||void 0===l||null===(e=l.countries)||void 0===e?void 0:e.rows)}catch(l){(0,k.LY)(l)}})(),(async e=>{console.log(e);try{let e={charges_type:"cost"};const{data:l}=await O.A.getRates(e);let i=null===l||void 0===l?void 0:l.charges;ni(i)}catch(l){}})()}),[]),(0,D.useEffect)((()=>{Fl.length>0&&Ce(!0);const e=Fl.reduce(((e,l)=>e+parseFloat(l.salary_total)),0);console.log(e);let l=Sl/100;wl(parseFloat(parseFloat(e)*parseFloat(l)))}),[Fl]),(0,$.jsxs)(a.A,{sx:{p:3},children:[(0,$.jsx)(B.A,{warning:!0,open:Tl,onClose:()=>$l(!1),action:()=>{$l(!1),Ci()}}),(0,$.jsx)(V.A,{open:Yl,onClose:()=>Ul(!1),message:"You Have Unsaved Changes on this Page",action:()=>{Ul(!1),Ai(),Ye(!1)}}),(0,$.jsx)(V.A,{open:Ml,onClose:()=>Bl(!1),message:"You Have Unsaved Changes on this Page",action:()=>{Bl(!1)}}),(0,$.jsxs)(o.A,{component:"form",onSubmit:xe((async e=>{Ai(),console.log(e);let l=0,i=0;$e.includes("1")?("in"===Be.toLowerCase()?l+=parseFloat(Number(e["1yearInsideRate"])):"out"===Be.toLowerCase()&&(l+=parseFloat(Number(e["1yearOutsideRate"]))),l+=nl&&parseFloat(Number(e.vipMedical))||0):$e.includes("2")&&("in"===Be.toLowerCase()?l+=parseFloat(Number(e["2yearInsideRate"])):"out"===Be.toLowerCase()&&(l+=parseFloat(Number(e["2yearOutsideRate"]))),l+=nl&&parseFloat(Number(e.vipMedical))||0),$e.includes("1")?("in"===Be.toLowerCase()?i+=parseFloat(Number(null===ri||void 0===ri?void 0:ri.one_year_inside)):"out"===Be.toLowerCase()&&(i+=parseFloat(Number(null===ri||void 0===ri?void 0:ri.one_year_outside))),i+=nl&&parseFloat(Number(null===ri||void 0===ri?void 0:ri.medical_extra))||0):$e.includes("2")&&("in"===Be.toLowerCase()?i+=parseFloat(Number(null===ri||void 0===ri?void 0:ri.two_year_inside)):"out"===Be.toLowerCase()&&(i+=parseFloat(Number(null===ri||void 0===ri?void 0:ri.two_year_outside))),i+=nl&&parseFloat(Number(null===ri||void 0===ri?void 0:ri.medical_extra))||0),console.log(l,"sum"),console.log(i,"sum");try{Il((a=>{const o=a[a.length-1];console.log(o);let t=Sl/100,s={serial_id:(null===a||void 0===a?void 0:a.length)>0?Number(o.serial_id)+1:1,name:null===e||void 0===e?void 0:e.candidateName,phone:null===e||void 0===e?void 0:e.Phone,email:null===e||void 0===e?void 0:e.email,visa_charges:l,visa_cost:i,visa_type:Be,visa_tenure:$e,employee_id:null===e||void 0===e?void 0:e.employeeid,deposit_consumed:"visa"===Cl?Ll:parseFloat(parseFloat(null===e||void 0===e?void 0:e.basic)+parseFloat(null===e||void 0===e?void 0:e.allowance))*t,security_deposit_visa:Ll,payroll_percentage:Sl,inside_rate:$e.includes("1")?e["1yearInsideRate"]:e["2yearInsideRate"],outside_rate:$e.includes("1")?e["1yearOutsideRate"]:e["2yearOutsideRate"],renewal_rate:0,vip_medical_temp:null===e||void 0===e?void 0:e.vipMedical,vip_medical_extra:nl&&null!==e&&void 0!==e&&e.vipMedical?null===e||void 0===e?void 0:e.vipMedical:null,camp_location:null===e||void 0===e?void 0:e.campLocation,nationality:sl,nationality_id:null===sl||void 0===sl?void 0:sl.id,passport_number:null===e||void 0===e?void 0:e.passportNumber.toUpperCase(),passport_expiry:R()(null===e||void 0===e?void 0:e.passportExp).format("YYYY-MM-DD"),visa_designation:null===e||void 0===e?void 0:e.visaDesignation,salary_basic:null===e||void 0===e?void 0:e.basic,salary_allowance:null===e||void 0===e?void 0:e.allowance,salary_total:parseFloat(parseFloat(null===e||void 0===e?void 0:e.basic)+parseFloat(null===e||void 0===e?void 0:e.allowance)).toFixed(2),end_consumer:null===e||void 0===e?void 0:e.endConsumer,end_consumer_company:null===e||void 0===e?void 0:e.endConsumerCompany,documents:hi};return console.log("Adding candidate:",s),console.log("Previous candidates:",a),[...a,s]})),gi([{name:"Employee Undertaking",key:"undertaking",path:"",expiry_date:null,is_required:!0},{name:"Company Undertaking",key:"cundertaking",path:"",expiry_date:null,is_required:!0},{name:"Passport Copy",key:"passportcopy",path:"",expiry_date:null,is_required:!0},{name:"Digital Photo",key:"digitalphoto",path:"",expiry_date:null,is_required:!0},{name:"Employment Contract",key:"contract",path:"",expiry_date:null,is_required:!0},{name:"Offer Letter",key:"offerletter",path:"",expiry_date:null,is_required:!0},{name:"Previous Emirates Ids",key:"emiratesids",path:"",expiry_date:null,is_required:!1},{name:"Previous UAE Visa Copy",key:"uaevisa",path:"",expiry_date:null,is_required:!1},{name:"Cancellation",key:"cancellation",path:"",expiry_date:null,is_required:!1},{name:"UAE Driving License",key:"drivinglicense",path:"",expiry_date:null,is_required:!1},{name:"Work Permit",key:"workpermit",path:"",expiry_date:null,is_required:!1},{name:"Other Documents",key:"otherdoc",path:"",expiry_date:null,is_required:!1}]),be(),yi(null),rl(null),console.log(Fl)}catch(a){console.error("Error adding candidate:",a)}})),open:Oe,maxWidth:"md",fullWidth:!0,scroll:Ue,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[(0,$.jsx)(t.A,{id:"scroll-dialog-title",children:"Add Candidate"}),(0,$.jsx)(s.A,{dividers:"paper"===Ue,children:(0,$.jsx)(r.A,{id:"scroll-dialog-description",ref:ki,tabIndex:-1,children:(0,$.jsxs)(n.Ay,{container:!0,spacing:2,children:[(0,$.jsxs)(n.Ay,{container:!0,mt:5,pl:3,children:[(0,$.jsxs)(n.Ay,{item:!0,xs:3,sm:3,children:[(0,$.jsx)(d.A,{sx:{fontSize:"15px",color:g.A.black,mb:2,fontWeight:"bold"},children:"Visa Type : "}),(0,$.jsx)(u.A,{children:(0,$.jsxs)(c.A,{row:!0,defaultValue:Be,onChange:e=>{Te(e.target.value),console.log(he("1yearInsideRate")),console.log(he("1yearOutsideRate")),setTimeout((()=>{ge("1yearInsideRate",he("1yearInsideRate")),ge("1yearOutsideRate",he("1yearOutsideRate")),console.log(he("1yearInsideRate"),"asdasdasdasd")}),1e3)},children:[(0,$.jsx)(p.A,{sx:{color:"#000"},value:"In",control:(0,$.jsx)(v.A,{}),label:"In"}),(0,$.jsx)(p.A,{sx:{color:"#000"},value:"out",control:(0,$.jsx)(v.A,{}),label:"Out"})]})})]}),(0,$.jsxs)(n.Ay,{item:!0,xs:3,sm:3,children:[(0,$.jsx)(d.A,{sx:{fontSize:"15px",color:g.A.black,mb:2,fontWeight:"bold"},children:"Visa Tenure : "}),(0,$.jsx)(u.A,{children:(0,$.jsxs)(c.A,{row:!0,defaultValue:$e,onChange:e=>{console.log(e.target.value),Ke(e.target.value)},children:[(0,$.jsx)(p.A,{sx:{color:"#000"},value:"1 year",control:(0,$.jsx)(v.A,{}),label:"1 Year"}),(0,$.jsx)(p.A,{sx:{color:"#000"},value:"2 year",control:(0,$.jsx)(v.A,{}),label:"2 Years"})]})})]})]}),(0,$.jsx)(d.A,{sx:{fontSize:"18px",fontWeight:"bold",color:g.A.textColorDarkBlue,p:3},children:"Visa Rates : "}),(0,$.jsx)(d.A,{sx:{fontSize:"20px",fontWeight:"bold",color:g.A.textColorDarkBlue,mt:3},children:$e.includes("1")?"1 Year Rates ":"2 Years Rates "}),(0,$.jsxs)(n.Ay,{container:!0,pl:3,children:[$e.includes("1")&&"in"==Be.toLowerCase()&&(0,$.jsx)(n.Ay,{container:!0,sx:{gap:"20px 25px"},children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsx)(j.A,{label:"Year Inside Rates :* ",StartLabel:"AED",disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type)||"A"==(null===zl||void 0===zl?void 0:zl.user_type),register:me("1yearInsideRate",{required:"Enter year inside rate",onChange:()=>Si()}),postfix:"C"!=(null===zl||void 0===zl?void 0:zl.user_type)&&"A"!=(null===zl||void 0===zl?void 0:zl.user_type)})})}),$e.includes("1")&&"out"==Be.toLowerCase()&&(0,$.jsx)(n.Ay,{container:!0,sx:{gap:"20px 25px"},children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsx)(j.A,{label:"Year Outside Rates :*  ",disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type)||"A"==(null===zl||void 0===zl?void 0:zl.user_type),StartLabel:"AED",register:me("1yearOutsideRate",{required:"Enter year outside rate",onChange:()=>Si()}),postfix:"C"!=(null===zl||void 0===zl?void 0:zl.user_type)&&"A"!=(null===zl||void 0===zl?void 0:zl.user_type)})})}),$e.includes("2")&&"in"==Be.toLowerCase()&&(0,$.jsx)($.Fragment,{children:(0,$.jsx)(n.Ay,{container:!0,sx:{gap:"20px 25px"},children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsx)(j.A,{label:"Year Inside Rates :*  ",disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type)||"A"==(null===zl||void 0===zl?void 0:zl.user_type),StartLabel:"AED",register:me("2yearInsideRate",{required:"Enter year inside rate",onChange:()=>Si()}),postfix:"C"!=(null===zl||void 0===zl?void 0:zl.user_type)&&"A"!=(null===zl||void 0===zl?void 0:zl.user_type)})})})}),$e.includes("2")&&"out"==Be.toLowerCase()&&(0,$.jsx)($.Fragment,{children:(0,$.jsx)(n.Ay,{container:!0,sx:{gap:"20px 25px"},children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsx)(j.A,{label:"Year Outside Rates :*  ",disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type)||"A"==(null===zl||void 0===zl?void 0:zl.user_type),StartLabel:"AED",register:me("2yearOutsideRate",{required:"Enter year outside rate",onChange:()=>Si()}),postfix:"C"!=(null===zl||void 0===zl?void 0:zl.user_type)&&"A"!=(null===zl||void 0===zl?void 0:zl.user_type)})})})})]}),(0,$.jsxs)(n.Ay,{container:!0,p:3,children:[(0,$.jsx)(d.A,{sx:{fontSize:"20px",fontWeight:"bold",color:g.A.textColorDarkBlue,mb:2},children:"Extra Costing : "}),(0,$.jsx)(n.Ay,{container:!0,sx:{gap:"20px 25px"},children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsxs)(a.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,$.jsx)(a.A,{sx:{marginTop:"22px"},children:(0,$.jsx)(y.A,{checked:nl,onChange:()=>dl(!nl)})}),(0,$.jsx)(j.A,{label:"VIP Medical Charges : ",disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type)||"A"==(null===zl||void 0===zl?void 0:zl.user_type)||!nl,StartLabel:"AED",register:me("vipMedical",{required:!1}),postfix:"C"!=(null===zl||void 0===zl?void 0:zl.user_type)&&"A"!=(null===zl||void 0===zl?void 0:zl.user_type)})]})})})]}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Candidate Name :*",size:"small",fullWidth:!0,placeholder:"Candidate Name",error:null===Ae||void 0===Ae||null===(e=Ae.candidateName)||void 0===e?void 0:e.message,register:me("candidateName",{required:"Please enter your candidate name."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Phone :*",size:"small",fullWidth:!0,type:"number",placeholder:"Phone",error:null===Ae||void 0===Ae||null===(l=Ae.Phone)||void 0===l?void 0:l.message,register:me("Phone",{required:"Please enter your Phone.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."}})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Email :*",fullWidth:!0,size:"small",placeholder:"Email",error:null===Ae||void 0===Ae||null===(i=Ae.email)||void 0===i?void 0:i.message,register:me("email",{required:"Please enter your email.",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Camp Location  :*",size:"small",fullWidth:!0,placeholder:"Camp Location ",error:null===Ae||void 0===Ae||null===(q=Ae.campLocation)||void 0===q?void 0:q.message,register:me("campLocation",{required:"Please enter your camp location."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Employee ID :*",size:"small",fullWidth:!0,placeholder:"Employee ID",error:null===Ae||void 0===Ae||null===(K=Ae.employeeid)||void 0===K?void 0:K.message,register:me("employeeid",{required:"Please enter your employee id."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(f.A,{size:"small",label:"Nationality :*",options:ol,selected:sl,onSelect:e=>rl(e),error:null===Ae||void 0===Ae||null===(H=Ae.nationality)||void 0===H?void 0:H.message,register:me("nationality",{required:"Please select nationality"})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Passport Number :*",size:"small",fullWidth:!0,placeholder:"Passport Number",error:null===Ae||void 0===Ae||null===(Z=Ae.passportNumber)||void 0===Z?void 0:Z.message,register:me("passportNumber",{required:"Please enter your passport number.",onChange:e=>{console.log("asdas"),(0,N.O0)((()=>(async()=>{let e=he("passportNumber");if(e)try{let l={passport_number:e.toUpperCase()};console.log(l);const{data:i}=await P.A.getCandidateDetail(l);console.log(i),null===i||void 0===i||!i.customer_id||"Pending"!=i.approval_status&&"Approved"!=i.approval_status&&0!=i.admin_rejected&&null!=i.admin_rejected?oi(!1):(oi(!0),(0,C.Ni)("Passport Number  already exists"))}catch(l){console.log(l),oi(!1),(0,C.Ni)(l)}})()))}})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(A.A,{label:"Passport Expiry :*",value:vi,disablePast:!0,minDate:(0,U.A)((0,M.A)(new Date,6),1),size:"small",error:null===Ae||void 0===Ae||null===(Q=Ae.passportExp)||void 0===Q?void 0:Q.message,...me("passportExp",{required:"Please enter your passport expiry date.",validate:e=>{const l=(0,M.A)(new Date,6);return console.log(e,"value"),console.log(R()(l),"value"),console.log(R()(e)>R()(l),"value"),R()(e)>R()(l)||"Passport expiry date must be at least 6 months from today."}}),onChange:e=>{_i(e),ge("passportExp",e,{shouldValidate:!0})}})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Visa Designation :*",size:"small",fullWidth:!0,placeholder:"Visa Designation",error:null===Ae||void 0===Ae||null===(G=Ae.visaDesignation)||void 0===G?void 0:G.message,register:me("visaDesignation",{required:"Please enter your visa designation ."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:12,children:(0,$.jsx)(d.A,{sx:{fontSize:"20px",fontWeight:"bold",color:g.A.textColorDarkBlue},children:"Salary : "})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(j.A,{label:"Basic :* ",StartLabel:"AED",placeholder:"Basic",error:null===Ae||void 0===Ae||null===(J=Ae.basic)||void 0===J?void 0:J.message,register:me("basic",{required:"Enter basic  salary",onChange:e=>wi()})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(j.A,{allowance:!0,label:"Allowance : ",StartLabel:"AED",placeholder:"Allowance",error:null===Ae||void 0===Ae||null===(X=Ae.allowance)||void 0===X?void 0:X.message,register:me("allowance",{required:"Enter allowance ",onChange:e=>wi()})})}),(0,$.jsxs)(n.Ay,{item:!0,xs:6,children:[(0,$.jsx)(j.A,{disabled:!0,label:"Total Salary : ",StartLabel:"AED",placeholder:"Total",register:me("totalSalary")}),"payroll"==Cl&&el?(0,$.jsx)("p",{style:{color:"red"},children:"Salary Limit Exceeded "}):"","payroll"==Cl&&il?(0,$.jsx)("p",{style:{color:"red"},children:"Deposit Balance is Low "}):""]}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"End Consumer Company :*",size:"small",fullWidth:!0,placeholder:"End Consumer Company ",error:null===Ae||void 0===Ae||null===(ee=Ae.endConsumerCompany)||void 0===ee?void 0:ee.message,register:me("endConsumerCompany",{required:"Please enter your end consumer company ."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:12,children:(0,$.jsx)(d.A,{sx:{fontSize:"20px",fontWeight:"bold",color:g.A.textColorDarkBlue},children:"Documents : "})}),(null===hi||void 0===hi?void 0:hi.length)>0&&(null===hi||void 0===hi?void 0:hi.map(((e,l)=>{var i,a;return(0,$.jsxs)(n.Ay,{item:!0,xs:5,children:[(0,$.jsxs)(d.A,{sx:{fontSize:"18px",fontWeight:"bold",color:g.A.gray},children:[null!==e&&void 0!==e&&e.is_required?null===e||void 0===e?void 0:e.name:(null===e||void 0===e?void 0:e.name)+" (If Any)"," : ",null!==e&&void 0!==e&&e.is_required?"*":""," "]}),(0,$.jsx)(w.A,{Memo:!0,accept:xl,file:hi,multiple:!0,updateResult:bi,fileId:null===e||void 0===e?void 0:e.key,loader:Xl,error:null===(i=Ae[null===e||void 0===e?void 0:e.key])||void 0===i?void 0:i.message,disabled:Gl,register:me(`${null===e||void 0===e?void 0:e.key}`,{required:!(null===e||void 0===e||!e.is_required)&&(""==(null===(a=hi.find((l=>(null===l||void 0===l?void 0:l.key)==(null===e||void 0===e?void 0:e.key))))||void 0===a?void 0:a.path)&&"Please upload document."),onChange:async l=>{Jl(!0);const i=await ji(l,null===e||void 0===e?void 0:e.key);i&&(Di("path",i,null===e||void 0===e?void 0:e.key),console.log(i)),Jl(!1)}})})]})})))]})})}),(0,$.jsxs)(m.A,{children:[(0,$.jsx)(x.A,{sx:{fontFamily:"Public Sans"},onClick:()=>{Ul(!0),oi(!1),gi([{name:"Employee Undertaking",key:"undertaking",path:"",expiry_date:null,is_required:!0},{name:"Company Undertaking",key:"cundertaking",path:"",expiry_date:null,is_required:!0},{name:"Passport Copy",key:"passportcopy",path:"",expiry_date:null,is_required:!0},{name:"Digital Photo",key:"digitalphoto",path:"",expiry_date:null,is_required:!0},{name:"Employment Contract",key:"contract",path:"",expiry_date:null,is_required:!0},{name:"Offer Letter",key:"offerletter",path:"",expiry_date:null,is_required:!0},{name:"Previous Emirates Ids",key:"emiratesids",path:"",expiry_date:null,is_required:!1},{name:"Previous UAE Visa Copy",key:"uaevisa",path:"",expiry_date:null,is_required:!1},{name:"Cancellation",key:"cancellation",path:"",expiry_date:null,is_required:!1},{name:"UAE Driving License",key:"drivinglicense",path:"",expiry_date:null,is_required:!1},{name:"Work Permit",key:"workpermit",path:"",expiry_date:null,is_required:!1},{name:"Other Documents",key:"otherdoc",path:"",expiry_date:null,is_required:!1}])},children:"Cancel"}),(0,$.jsx)(x.A,{sx:{fontFamily:"Public Sans"},disabled:!!("payroll"==Cl&&(el||il)||ai),type:"submit",children:"Add"})]})]}),(0,$.jsxs)(o.A,{component:"form",onSubmit:De((async e=>{if(el||di)(0,C.Ni)("Salary Limit Exceeded");else{Ai(),console.log(Qe);let i=0,a=0;$e.includes("1")?("in"===Be.toLowerCase()?i+=parseFloat(Number(e["1yearInsideRate"])):"out"===Be.toLowerCase()&&(i+=parseFloat(Number(e["1yearOutsideRate"]))),i+=nl&&parseFloat(Number(e.vipMedical))||0):$e.includes("2")&&("in"===Be.toLowerCase()?i+=parseFloat(Number(e["2yearInsideRate"])):"out"===Be.toLowerCase()&&(i+=parseFloat(Number(e["2yearOutsideRate"]))),i+=nl&&parseFloat(Number(e.vipMedical))||0),$e.includes("1")?("in"===Be.toLowerCase()?a+=parseFloat(Number(null===ri||void 0===ri?void 0:ri.one_year_inside)):"out"===Be.toLowerCase()&&(a+=parseFloat(Number(null===ri||void 0===ri?void 0:ri.one_year_outside))),a+=nl&&parseFloat(Number(null===ri||void 0===ri?void 0:ri.medical_extra))||0):$e.includes("2")&&("in"===Be.toLowerCase()?a+=parseFloat(Number(null===ri||void 0===ri?void 0:ri.two_year_inside)):"out"===Be.toLowerCase()&&(a+=parseFloat(Number(null===ri||void 0===ri?void 0:ri.two_year_outside))),a+=nl&&parseFloat(Number(null===ri||void 0===ri?void 0:ri.medical_extra))||0),console.log(a,"sum"),console.log(nl,"sum2");let o=Sl/100;try{let l={serial_id:Qe,name:null===e||void 0===e?void 0:e.candidateName,phone:null===e||void 0===e?void 0:e.Phone,email:null===e||void 0===e?void 0:e.email,camp_location:null===e||void 0===e?void 0:e.campLocation,visa_charges:i,visa_cost:a,visa_type:Be,visa_tenure:$e,deposit_consumed:"visa"===Cl?Ll:parseFloat(parseFloat(null===e||void 0===e?void 0:e.basic)+parseFloat(null===e||void 0===e?void 0:e.allowance))*o,security_deposit_visa:Ll,payroll_percentage:Sl,inside_rate:$e.includes("1")?e["1yearInsideRate"]:e["2yearInsideRate"],outside_rate:$e.includes("1")?e["1yearOutsideRate"]:e["2yearOutsideRate"],renewal_rate:0,vip_medical_temp:null===e||void 0===e?void 0:e.vipMedical,vip_medical_extra:nl?null===e||void 0===e?void 0:e.vipMedical:null,nationality:sl,nationality_id:null===sl||void 0===sl?void 0:sl.id,passport_number:null===e||void 0===e?void 0:e.passportNumber.toUpperCase(),employee_id:null===e||void 0===e?void 0:e.employeeid,passport_expiry:R()(null===e||void 0===e?void 0:e.passportExp).format("YYYY-MM-DD"),visa_designation:null===e||void 0===e?void 0:e.visaDesignation,salary_basic:null===e||void 0===e?void 0:e.basic,salary_allowance:null===e||void 0===e?void 0:e.allowance,salary_total:parseFloat(parseFloat(null===e||void 0===e?void 0:e.basic)+parseFloat(null===e||void 0===e?void 0:e.allowance)).toFixed(2),end_consumer:null===e||void 0===e?void 0:e.endConsumer,end_consumer_company:null===e||void 0===e?void 0:e.endConsumerCompany,documents:hi};console.log(l);const t=Fl.map((e=>e.serial_id===Qe?l:e));console.log(t),Ye(!1),Il(t),be(),gi([{name:"Employee Undertaking",key:"undertaking",path:"",expiry_date:null,is_required:!0},{name:"Company Undertaking",key:"cundertaking",path:"",expiry_date:null,is_required:!0},{name:"Passport Copy",key:"passportcopy",path:"",expiry_date:null,is_required:!0},{name:"Digital Photo",key:"digitalphoto",path:"",expiry_date:null,is_required:!0},{name:"Employment Contract",key:"contract",path:"",expiry_date:null,is_required:!0},{name:"Offer Letter",key:"offerletter",path:"",expiry_date:null,is_required:!0},{name:"Previous Emirates Ids",key:"emiratesids",path:"",expiry_date:null,is_required:!1},{name:"Previous UAE Visa Copy",key:"uaevisa",path:"",expiry_date:null,is_required:!1},{name:"Cancellation",key:"cancellation",path:"",expiry_date:null,is_required:!1},{name:"UAE Driving License",key:"drivinglicense",path:"",expiry_date:null,is_required:!1},{name:"Work Permit",key:"workpermit",path:"",expiry_date:null,is_required:!1},{name:"Other Documents",key:"otherdoc",path:"",expiry_date:null,is_required:!1}]),console.log(Fl)}catch(l){console.error("Error adding candidate:",l)}}})),open:Ve,maxWidth:"md",fullWidth:!0,scroll:Ue,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[(0,$.jsx)(t.A,{id:"scroll-dialog-title",children:"Update Candidate"}),(0,$.jsx)(s.A,{dividers:"paper"===Ue,children:(0,$.jsx)(r.A,{id:"scroll-dialog-description",ref:ki,tabIndex:-1,children:(0,$.jsxs)(n.Ay,{container:!0,spacing:2,children:[(0,$.jsxs)(n.Ay,{container:!0,mt:5,pl:3,children:[(0,$.jsxs)(n.Ay,{item:!0,xs:3,sm:3,children:[(0,$.jsx)(d.A,{sx:{fontSize:"15px",color:g.A.black,mb:2,fontWeight:"bold"},children:"Visa Type : "}),(0,$.jsx)(u.A,{children:(0,$.jsxs)(c.A,{row:!0,defaultValue:Be,onChange:e=>{Te(e.target.value),console.log(he("1yearInsideRate")),console.log(he("1yearOutsideRate")),qi(null===Ie||void 0===Ie?void 0:Ie.id,"update"),setTimeout((()=>{Ee("2yearInsideRate",he("2yearInsideRate")),Ee("2yearOutsideRate",he("2yearOutsideRate")),console.log(he("1yearInsideRate"),"asdasdasdasd")}),1e3)},children:[(0,$.jsx)(p.A,{sx:{color:"#000"},value:"In",control:(0,$.jsx)(v.A,{}),label:"In"}),(0,$.jsx)(p.A,{sx:{color:"#000"},value:"out",control:(0,$.jsx)(v.A,{}),label:"Out"})]})})]}),(0,$.jsxs)(n.Ay,{item:!0,xs:3,sm:3,children:[(0,$.jsx)(d.A,{sx:{fontSize:"15px",color:g.A.black,mb:2,fontWeight:"bold"},children:"Visa Tenure : "}),(0,$.jsx)(u.A,{children:(0,$.jsxs)(c.A,{row:!0,defaultValue:$e,onChange:e=>{console.log(e.target.value),Ke(e.target.value),qi(null===Ie||void 0===Ie?void 0:Ie.id,"update")},children:[(0,$.jsx)(p.A,{sx:{color:"#000"},value:"1 year",control:(0,$.jsx)(v.A,{}),label:"1 Year"}),(0,$.jsx)(p.A,{sx:{color:"#000"},value:"2 year",control:(0,$.jsx)(v.A,{}),label:"2 Years"})]})})]})]}),(0,$.jsx)(d.A,{sx:{fontSize:"18px",fontWeight:"bold",color:g.A.textColorDarkBlue,p:3},children:"Visa Rates : "}),(0,$.jsx)(d.A,{sx:{fontSize:"20px",fontWeight:"bold",color:g.A.textColorDarkBlue,mt:3},children:$e.includes("1")?"1 Year Rates ":"2 Years Rates "}),(0,$.jsxs)(n.Ay,{container:!0,pl:3,children:[$e.includes("1")&&"in"==Be.toLowerCase()&&(0,$.jsx)(n.Ay,{container:!0,sx:{gap:"20px 25px"},children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsx)(j.A,{label:"Year Inside Rates :* ",disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type)||"A"==(null===zl||void 0===zl?void 0:zl.user_type),StartLabel:"AED",register:Re("1yearInsideRate",{required:"Enter year inside rate",onChange:()=>Si()}),postfix:"C"!=(null===zl||void 0===zl?void 0:zl.user_type)&&"A"!=(null===zl||void 0===zl?void 0:zl.user_type)})})}),$e.includes("1")&&"out"==Be.toLowerCase()&&(0,$.jsx)(n.Ay,{container:!0,sx:{gap:"20px 25px"},children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsx)(j.A,{label:"Year Outside Rates :*  ",disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type)||"A"==(null===zl||void 0===zl?void 0:zl.user_type),StartLabel:"AED",register:Re("1yearOutsideRate",{required:"Enter year outside rate",onChange:()=>Si()}),postfix:"C"!=(null===zl||void 0===zl?void 0:zl.user_type)&&"A"!=(null===zl||void 0===zl?void 0:zl.user_type)})})}),$e.includes("2")&&"in"==Be.toLowerCase()&&(0,$.jsx)($.Fragment,{children:(0,$.jsx)(n.Ay,{container:!0,sx:{gap:"20px 25px"},children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsx)(j.A,{label:"Year Inside Rates :*  ",disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type)||"A"==(null===zl||void 0===zl?void 0:zl.user_type),StartLabel:"AED",register:Re("2yearInsideRate",{required:"Enter year inside rate",onChange:()=>Si()}),postfix:"C"!=(null===zl||void 0===zl?void 0:zl.user_type)&&"A"!=(null===zl||void 0===zl?void 0:zl.user_type)})})})}),$e.includes("2")&&"out"==Be.toLowerCase()&&(0,$.jsx)($.Fragment,{children:(0,$.jsx)(n.Ay,{container:!0,sx:{gap:"20px 25px"},children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsx)(j.A,{label:"Year Outside Rates :*  ",disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type)||"A"==(null===zl||void 0===zl?void 0:zl.user_type),StartLabel:"AED",register:Re("2yearOutsideRate",{required:"Enter year outside rate",onChange:()=>Si()}),postfix:"C"!=(null===zl||void 0===zl?void 0:zl.user_type)&&"A"!=(null===zl||void 0===zl?void 0:zl.user_type)})})})})]}),(0,$.jsxs)(n.Ay,{container:!0,p:3,children:[(0,$.jsx)(d.A,{sx:{fontSize:"20px",fontWeight:"bold",color:g.A.textColorDarkBlue,mb:2},children:"Extra Costing : "}),(0,$.jsx)(n.Ay,{container:!0,sx:{gap:"20px 25px"},children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsxs)(a.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,$.jsx)(a.A,{sx:{marginTop:"22px"},children:(0,$.jsx)(y.A,{checked:nl,onChange:e=>{console.log(!nl),1==!nl&&(console.log(bl),Ee("vipMedical",null===bl||void 0===bl?void 0:bl.vip_medical_temp)),dl(!nl)}})}),(0,$.jsx)(j.A,{label:"VIP Medical Extra Charges : ",StartLabel:"AED",register:Re("vipMedical"),postfix:"C"!=(null===zl||void 0===zl?void 0:zl.user_type)&&"A"!=(null===zl||void 0===zl?void 0:zl.user_type),disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type)||"A"==(null===zl||void 0===zl?void 0:zl.user_type)||!nl})]})})})]}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Candidate Name :",size:"small",fullWidth:!0,placeholder:"Candidate Name",error:null===Le||void 0===Le||null===(le=Le.candidateName)||void 0===le?void 0:le.message,register:Re("candidateName",{required:"Please enter your candidate name."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Phone :",size:"small",fullWidth:!0,type:"number",placeholder:"Phone",error:null===Le||void 0===Le||null===(ie=Le.Phone)||void 0===ie?void 0:ie.message,register:Re("Phone",{required:"Please enter your Phone.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."}})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Email :",size:"small",fullWidth:!0,placeholder:"Email ",error:null===Le||void 0===Le||null===(ae=Le.email)||void 0===ae?void 0:ae.message,register:Re("email",{required:"Please enter your email."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Camp Location  :",size:"small",fullWidth:!0,placeholder:"Camp Location ",error:null===Le||void 0===Le||null===(oe=Le.campLocation)||void 0===oe?void 0:oe.message,register:Re("campLocation",{required:"Please enter your camp location."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Employee ID :*",size:"small",fullWidth:!0,placeholder:"Employee ID",error:null===Ae||void 0===Ae||null===(te=Ae.employeeid)||void 0===te?void 0:te.message,register:Re("employeeid",{required:"Please enter your employee id."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(f.A,{size:"small",label:"Nationality :*",options:ol,selected:sl,onSelect:e=>rl(e),error:null===Le||void 0===Le||null===(se=Le.nationality)||void 0===se?void 0:se.message,register:Re("nationality",{required:"Please select nationality"})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Passport Number :",size:"small",fullWidth:!0,placeholder:"Passport Number",error:null===Le||void 0===Le||null===(re=Le.passportNumber)||void 0===re?void 0:re.message,register:Re("passportNumber",{required:"Please enter your passport number.",onChange:e=>{console.log("asdas"),(0,N.O0)((()=>(async()=>{let e=Pe("passportNumber");if(e)try{let l={passport_number:e.toUpperCase()};console.log(l);const{data:i}=await P.A.getCandidateDetail(l);console.log(i),null===i||void 0===i||!i.customer_id||"Pending"!=i.approval_status&&"Approved"!=i.approval_status&&0!=i.admin_rejected&&null!=i.admin_rejected?si(!1):(si(!0),(0,C.Ni)("Passport Number already existss"))}catch(l){console.log(l),si(!1),(0,C.Ni)(l)}})()))}})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(A.A,{label:"Passport Expiry :*",value:vi,disablePast:!0,minDate:(0,U.A)((0,M.A)(new Date,6),1),size:"small",error:null===Le||void 0===Le||null===(ne=Le.passportExp)||void 0===ne?void 0:ne.message,...Re("passportExp",{required:"Please enter your passport expiry date.",validate:e=>{const l=(0,M.A)(new Date,6);return console.log(e,"value"),console.log(R()(l),"value"),console.log(R()(e)>R()(l),"value"),R()(e)>R()(l)||"Passport expiry date must be at least 6 months from today."}}),onChange:e=>{_i(e),Ee("passportExp",e,{shouldValidate:!0})}})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"Visa Designation :",size:"small",fullWidth:!0,placeholder:"Visa Designation",error:null===Le||void 0===Le||null===(de=Le.visaDesignation)||void 0===de?void 0:de.message,register:Re("visaDesignation",{required:"Please enter your visa designation ."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:12,children:(0,$.jsx)(d.A,{sx:{fontSize:"20px",fontWeight:"bold",color:g.A.textColorDarkBlue},children:"Salary : "})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(j.A,{label:"Basic : ",StartLabel:"AED",placeholder:"Basic",error:null===Ae||void 0===Ae||null===(ue=Ae.basic)||void 0===ue?void 0:ue.message,register:Re("basic",{required:"Enter basic  salary",onChange:e=>wi("update")})})}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(j.A,{allowance:!0,label:"Allowance : ",StartLabel:"AED",placeholder:"Allowance",error:null===Ae||void 0===Ae||null===(ce=Ae.allowance)||void 0===ce?void 0:ce.message,register:Re("allowance",{required:"Enter allowance ",onChange:e=>wi("update")})})}),(0,$.jsxs)(n.Ay,{item:!0,xs:6,children:[(0,$.jsx)(j.A,{disabled:!0,label:"Total Salary : ",StartLabel:"AED",placeholder:"Total",register:Re("totalSalary")}),"payroll"==Cl&&el?(0,$.jsx)("p",{style:{color:"red"},children:"Salary Limit Exceeded "}):""]}),(0,$.jsx)(n.Ay,{item:!0,xs:6,children:(0,$.jsx)(b.A,{label:"End Consumer Company :",size:"small",fullWidth:!0,placeholder:"End Consumer Company ",error:null===Le||void 0===Le||null===(pe=Le.endConsumerCompany)||void 0===pe?void 0:pe.message,register:Re("endConsumerCompany",{required:"Please enter your end consumer company ."})})}),(0,$.jsx)(n.Ay,{item:!0,xs:12,children:(0,$.jsx)(d.A,{sx:{fontSize:"20px",fontWeight:"bold",color:g.A.textColorDarkBlue},children:"Documents : "})}),(null===hi||void 0===hi?void 0:hi.length)>0&&(null===hi||void 0===hi?void 0:hi.map(((e,l)=>{var i,a;return(0,$.jsxs)(n.Ay,{item:!0,xs:5,children:[(0,$.jsxs)(d.A,{sx:{fontSize:"18px",fontWeight:"bold",color:g.A.gray},children:[null!==e&&void 0!==e&&e.is_required?null===e||void 0===e?void 0:e.name:(null===e||void 0===e?void 0:e.name)+"(If Any)"," :",null!==e&&void 0!==e&&e.is_required?"*":" "," "]}),(0,$.jsx)(w.A,{Memo:!0,accept:xl,file:hi,multiple:!0,updateResult:bi,fileId:null===e||void 0===e?void 0:e.key,error:null===(i=Le[null===e||void 0===e?void 0:e.key])||void 0===i?void 0:i.message,loader:Xl,disabled:Gl,register:Re(`${null===e||void 0===e?void 0:e.key}`,{required:!(null===e||void 0===e||!e.is_required)&&(""==(null===(a=hi.find((l=>(null===l||void 0===l?void 0:l.key)==(null===e||void 0===e?void 0:e.key))))||void 0===a?void 0:a.path)&&"Please upload document."),onChange:async l=>{Jl(!0);const i=await ji(l,null===e||void 0===e?void 0:e.key);i&&(Di("path",i,null===e||void 0===e?void 0:e.key),console.log(i)),Jl(!1)}})})]})})))]})})}),(0,$.jsxs)(m.A,{children:[(0,$.jsx)(x.A,{sx:{fontFamily:"Public Sans"},onClick:()=>{Ul(!0),si(!1)},children:"Cancel"}),(0,$.jsx)(x.A,{sx:{fontFamily:"Public Sans"},disabled:ti,type:"submit",children:"Update"})]})]}),(0,$.jsxs)(a.A,{component:"form",onSubmit:we(Ci),children:[(0,$.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"flex-end"},children:[(0,$.jsx)(d.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:"ADD NEW"}),(0,$.jsx)(a.A,{sx:{display:"flex",gap:"10px"},children:(0,$.jsx)(_.jn,{bgcolor:"#bd9b4a",title:"Save",onClick:()=>$l(!0),disabled:!(Fl.length>0)})})]}),(0,$.jsx)(n.Ay,{container:!0,mt:5,children:(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsx)(f.A,{size:"small",label:"Select Customer :",disabled:"C"==(null===zl||void 0===zl?void 0:zl.user_type),options:Ne,selected:Ie,onSelect:e=>{console.log(e,"asdasdasasd"),We(e),qi(null===e||void 0===e?void 0:e.id),Se("customer",e),Il([])},error:null===qe||void 0===qe||null===(ve=qe.customer)||void 0===ve?void 0:ve.message,register:ke("customer",{required:"Please select customer account."})})})}),(0,$.jsx)(n.Ay,{container:!0,mt:2,xs:10,justifyContent:"flex-end",children:(0,$.jsx)(_.jn,{bgcolor:"#bd9b4a",title:"Add Candidate",disabled:!Ie||!He,onClick:()=>{const e=R()(),l=R()().startOf("month").add(9,"days");R()().subtract(1,"months");console.log(He,"customerDetailcustomerDetail"),console.log(e.isAfter(l)),console.log(R()(He.created_at).isSame(R()(),"month"));Fl.reduce(((e,l)=>e+l.salary_total),0);var i;console.log(Wl,"customerBalance"),console.log(kl,"customerBalance"),Wl<kl&&!di?(0,C.Ni)("Deposit Balance Is Low"):Zl?(0,C.Ni)("Create WPS First"):(i="paper",console.log(Ie),gi([{name:"Employee Undertaking",key:"undertaking",path:"",expiry_date:null,is_required:!0},{name:"Company Undertaking",key:"cundertaking",path:"",expiry_date:null,is_required:!0},{name:"Passport Copy",key:"passportcopy",path:"",expiry_date:null,is_required:!0},{name:"Digital Photo",key:"digitalphoto",path:"",expiry_date:null,is_required:!0},{name:"Employment Contract",key:"contract",path:"",expiry_date:null,is_required:!0},{name:"Offer Letter",key:"offerletter",path:"",expiry_date:null,is_required:!0},{name:"Previous Emirates Ids",key:"emiratesids",path:"",expiry_date:null,is_required:!1},{name:"Previous UAE Visa Copy",key:"uaevisa",path:"",expiry_date:null,is_required:!1},{name:"Cancellation",key:"cancellation",path:"",expiry_date:null,is_required:!1},{name:"UAE Driving License",key:"drivinglicense",path:"",expiry_date:null,is_required:!1},{name:"Work Permit",key:"workpermit",path:"",expiry_date:null,is_required:!1},{name:"Other Documents",key:"otherdoc",path:"",expiry_date:null,is_required:!1}]),rl(null),yi(""),ll(!1),be(),qi(null===Ie||void 0===Ie?void 0:Ie.id,"balance"),"visa"==Cl?0!=Je||di?(ze(!0),Me(i)):(0,C.Ni)("Deposit Limit Reached"):kl>Rl&&!di?(0,C.Ni)("Deposit Limit Reached"):(ze(!0),Me(i)),console.log("The 10th date of the current month has not passed yet."))}})}),(null===Fl||void 0===Fl?void 0:Fl.length)>0&&(0,$.jsx)(d.A,{sx:{fontSize:"20px",fontWeight:"bold",color:g.A.textColorDarkBlue,mt:5},children:"Candidates Details: "}),(0,$.jsx)(n.Ay,{container:!0,mt:3,gap:2,children:(null===Fl||void 0===Fl?void 0:Fl.length)>0&&(null===Fl||void 0===Fl?void 0:Fl.map(((e,l)=>{var i;return(0,$.jsx)(n.Ay,{item:!0,xs:5,children:(0,$.jsxs)(a.A,{component:"div",sx:{position:"relative",border:`2px solid ${g.A.primary}`,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",padding:"16px",borderRadius:"8px",maxWidth:"400px",margin:"0 auto",backgroundColor:"#fff",fontFamily:"Public Sans"},children:[(0,$.jsx)(h.A,{sx:{position:"absolute",top:"8px",right:"35px"},"aria-label":"delete",onClick:()=>{(e=>{null===e||void 0===e||e.serial_id,console.log(e),Ge(null===e||void 0===e?void 0:e.serial_id),gi(null===e||void 0===e?void 0:e.documents),jl(e),Ye(!0),console.log(e),Ke(null===e||void 0===e?void 0:e.visa_tenure),Te(null===e||void 0===e?void 0:e.visa_type),Ee("candidateName",null===e||void 0===e?void 0:e.name),Ee("Phone",null===e||void 0===e?void 0:e.phone),Ee("email",null===e||void 0===e?void 0:e.email),Ee("campLocation",null===e||void 0===e?void 0:e.camp_location),Ee("passportNumber",null===e||void 0===e?void 0:e.passport_number),Ee("employeeid",null===e||void 0===e?void 0:e.employee_id),Ee("passportExp",R()(null===e||void 0===e?void 0:e.passport_expiry).format("YYYY-MM-DD")),_i(null===e||void 0===e?void 0:e.passport_expiry),e.vip_medical_extra?dl(!0):dl(!1),rl(null===e||void 0===e?void 0:e.nationality),Ee("nationality",null===e||void 0===e?void 0:e.nationality),Ee("visaDesignation",null===e||void 0===e?void 0:e.visa_designation),Ee("basic",null===e||void 0===e?void 0:e.salary_basic),Ee("allowance",null===e||void 0===e?void 0:e.salary_allowance),Ee("endConsumer",null===e||void 0===e?void 0:e.end_consumer),Ee("endConsumerCompany",null===e||void 0===e?void 0:e.end_consumer_company),Ee("totalSalary",null===e||void 0===e?void 0:e.salary_total),Ee("2yearInsideRate",null===e||void 0===e?void 0:e.inside_rate),Ee("2yearOutsideRate",null===e||void 0===e?void 0:e.outside_rate),Ee("2yearRenewalRates",null===e||void 0===e?void 0:e.renewal_rate),Ee("1yearInsideRate",null===e||void 0===e?void 0:e.inside_rate),Ee("1yearOutsideRate",null===e||void 0===e?void 0:e.outside_rate),Ee("1yearRenewalRates",null===e||void 0===e?void 0:e.renewal_rate),Ee("monthlyVisaServiceCharges",null===e||void 0===e?void 0:e.monthly_visa_service),Ee("vipMedical",null===e||void 0===e?void 0:e.vip_medical_extra)})(e)},children:(0,$.jsx)(T.A,{})}),(0,$.jsx)(h.A,{sx:{position:"absolute",top:"8px",right:"8px"},"aria-label":"delete",onClick:()=>{(e=>{const l=Fl[e];Ol(parseFloat(Wl)+parseFloat(l.deposit_consumed)),"visa"==Cl&&Xe(Je+1),console.log("Deleted deposit_consumed",parseFloat(Wl)+parseFloat(l.deposit_consumed)),Il((l=>l.filter(((l,i)=>i!==e))))})(l)},children:(0,$.jsx)(F.A,{})}),(0,$.jsxs)(d.A,{variant:"body1",gutterBottom:!0,children:[(0,$.jsx)("strong",{children:"Name:"}),"\xa0 ",(null===e||void 0===e||null===(i=e.name)||void 0===i?void 0:i.length)>20?(null===e||void 0===e?void 0:e.name.slice(0,20))+"...":null===e||void 0===e?void 0:e.name]}),(0,$.jsxs)(d.A,{variant:"body1",gutterBottom:!0,children:[(0,$.jsx)("strong",{children:"Email:"}),"\xa0",null===e||void 0===e?void 0:e.email]}),(0,$.jsxs)(d.A,{variant:"body1",children:[(0,$.jsx)("strong",{children:"Number:"}),"\xa0",null===e||void 0===e?void 0:e.phone]}),(0,$.jsxs)(d.A,{variant:"body1",children:[(0,$.jsx)("strong",{children:"Visa Type:"}),"\xa0","out"==(null===e||void 0===e?void 0:e.visa_type.toLowerCase())?"Out":"In"]}),(0,$.jsxs)(d.A,{variant:"body1",children:[(0,$.jsx)("strong",{children:"Visa Tenure:"}),"\xa0",null!==e&&void 0!==e&&e.visa_tenure.includes("1")?"1 Year":"2 Year"]})]})})})))})]})]})}}}]);
//# sourceMappingURL=562.9f5e123f.chunk.js.map