"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[6234],{66234:(e,s,l)=>{l.r(s),l.d(s,{default:()=>f});var o=l(65043),i=l(96446),r=l(85865),a=l(68903),t=l(51787),n=l(17392),d=l(69413),c=l(74605),m=l(24858),p=(l(54620),l(73216)),u=l(91284),x=(l(77020),l(26240)),g=(l(44563),l(20566)),h=(l(77292),l(95692)),v=l(3632),y=l(43559),A=l(37230),j=l(61137),w=l(70255),b=l(14398),P=l(85900),R=l(51962),S=l(70579);const f=function(){var e,s,l,f,E,C,z;const[k]=(0,b.Z)(!1),q=(0,p.Zp)(),{register:I,handleSubmit:N,formState:{errors:T},control:U,getValues:Y,watch:_,setError:J,clearErrors:W}=(0,m.mN)(),[D,F]=(0,o.useState)(!1),[Z,$]=(0,o.useState)(!1),[B,K]=(0,o.useState)(!1),[L,V]=(0,o.useState)(!1),[G,H]=(0,o.useState)([]),[M,O]=(0,o.useState)(null),[Q,X]=(0,o.useState)(!1),[ee,se]=(0,o.useState)([]),[le,oe]=(0,o.useState)([]);(0,x.A)();const ie=_("password","");_("confirmpassword",""),console.log(_());const[re,ae]=o.useState([]);(0,o.useEffect)((()=>{(async()=>{try{let e={page:1,limit:1e3};const{data:s}=await P.A.getCategoryList(e);oe(null===s||void 0===s?void 0:s.categories)}catch(e){(0,h.Ni)(e)}})(),(async e=>{try{var s;let l={page:1,limit:1e3,search:e};const{data:o}=await w.A.getRoles(l);H(null===o||void 0===o||null===(s=o.roles)||void 0===s?void 0:s.rows)}catch(l){(0,h.Ni)(l)}})()}),[]);const te=le.filter((e=>ee.includes(e.id)));return(0,S.jsx)(i.A,{sx:{p:3,borderRadius:3},children:(0,S.jsxs)(i.A,{component:"form",onSubmit:N((async e=>{console.log(te),F(!0),X(!0),console.log(e);try{let e={name:Y("name"),employee_id:Y("id"),email:Y("email"),phone:Y("phone"),password:Y("password"),permittedCategories:"Typist"==(null===M||void 0===M?void 0:M.name)?te:null,role_id:null===M||void 0===M?void 0:M.id};console.log(e);const s=j.A.CreateUser(e);(0,h.y8)(s,"Saving ...","Success","Something Went Wrong");const l=await s;200===(null===l||void 0===l?void 0:l.responseCode)&&q("/user-list")}catch(s){X(!1)}finally{F(!1)}})),children:[(0,S.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"flex-end"},children:[(0,S.jsx)(r.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:"CREATE USER"}),(0,S.jsx)(i.A,{sx:{display:"flex",gap:"10px"},children:(0,S.jsx)(u.jn,{bgcolor:"#bd9b4a",title:"Save",type:"submit",disabled:Q})})]}),(0,S.jsxs)(a.Ay,{container:!0,spacing:0,mt:5,p:1,gap:"0px 20px",children:[(0,S.jsx)(a.Ay,{item:!0,xs:12,sm:5,children:(0,S.jsx)(g.A,{label:" Name :*",size:"small",placeholder:" Name",error:null===T||void 0===T||null===(e=T.name)||void 0===e?void 0:e.message,register:I("name",{required:"Please enter name."})})}),(0,S.jsx)(a.Ay,{item:!0,xs:12,sm:5,children:(0,S.jsx)(g.A,{label:" Employee ID :*",size:"small",placeholder:" Employee ID ",error:null===T||void 0===T||null===(s=T.id)||void 0===s?void 0:s.message,register:I("id",{required:"Please enter id."})})}),(0,S.jsx)(a.Ay,{item:!0,xs:12,sm:5,children:(0,S.jsx)(g.A,{label:"Email :",size:"small",placeholder:"Email",error:null===T||void 0===T||null===(l=T.email)||void 0===l?void 0:l.message,register:I("email",{required:!1,pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})}),(0,S.jsx)(a.Ay,{item:!0,xs:12,sm:5,children:(0,S.jsx)(g.A,{label:"Phone :*",size:"small",placeholder:"Phone ",type:"number",error:null===T||void 0===T||null===(f=T.phone)||void 0===f?void 0:f.message,register:I("phone",{required:"Please enter phone.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."}})})}),(0,S.jsx)(a.Ay,{item:!0,xs:12,sm:5,children:(0,S.jsx)(A.A,{size:"small",label:"Select Role :*",options:G,selected:M,onSelect:e=>O(e),error:null===T||void 0===T||null===(E=T.role)||void 0===E?void 0:E.message,register:I("role",{required:"Please select role"})})}),(0,S.jsx)(a.Ay,{item:!0,xs:12,sm:5,children:(0,S.jsx)(g.A,{size:"small",label:"Password :*",type:Z?"text":"password",placeholder:"Enter Your Password",InputProps:{endAdornment:(0,S.jsx)(t.A,{position:"end",children:(0,S.jsx)(n.A,{edge:"end",onClick:()=>$(!Z),children:Z?(0,S.jsx)(v.A,{color:"primary"}):(0,S.jsx)(y.A,{color:"primary"})})})},error:(null===(C=T.password)||void 0===C?void 0:C.message)||L&&"You have entered an invalid email or password.",register:I("password",{required:"Please enter the password."})})}),(0,S.jsx)(a.Ay,{item:!0,xs:12,sm:5,children:(0,S.jsx)(g.A,{size:"small",label:"Confirm Password :*",type:B?"text":"password",placeholder:"Enter Your Confirm Password",InputProps:{endAdornment:(0,S.jsx)(t.A,{position:"end",children:(0,S.jsx)(n.A,{edge:"end",onClick:()=>K(!B),children:B?(0,S.jsx)(v.A,{color:"primary"}):(0,S.jsx)(y.A,{color:"primary"})})})},error:(null===(z=T.confirmpassword)||void 0===z?void 0:z.message)||L&&"You have entered an invalid email or password.",register:I("confirmpassword",{required:"Please enter the confirm password.",validate:e=>e===ie||"Passwords do not match."})})}),"Typist"===(null===M||void 0===M?void 0:M.name)&&(0,S.jsxs)(a.Ay,{item:!0,xs:12,sm:12,children:[(0,S.jsx)(r.A,{variant:"h5",gutterBottom:!0,children:"Select Categories"}),"Typist"===(null===M||void 0===M?void 0:M.name)&&(0,S.jsx)(a.Ay,{container:!0,spacing:2,children:(0,S.jsx)(a.Ay,{item:!0,xs:12,sm:5,children:(0,S.jsx)(d.A,{children:null===le||void 0===le?void 0:le.map((e=>(0,S.jsx)(c.A,{control:(0,S.jsx)(R.A,{checked:null===ee||void 0===ee?void 0:ee.includes(e.id),onChange:()=>{return s=e.id,void se((e=>e.includes(s)?e.filter((e=>e!==s)):[...e,s]));var s}}),label:e.name},e.id)))})})})]})]})]})})}},77292:(e,s,l)=>{l.d(s,{A:()=>r});var o=l(82113);const i={createRole:"roles/add",getRoles:"roles",updateRole:"roles/update",deleteRole:"roles/delete",getRolesPermissions:"permissions",updateRolesPermissions:"permissions/update",getSubRolesPermissions:"permissions/subUser"},r={createRole:async e=>await(0,o.bE)(i.createRole,e),getRoles:async e=>await(0,o.Jt)(i.getRoles,e),updateRole:async e=>await(0,o.F6)(i.updateRole,e),deleteRole:async e=>await(0,o.KF)(i.deleteRole,e),getRolesPermissions:async e=>await(0,o.Jt)(i.getRolesPermissions,e),getSubRolesPermissions:async e=>await(0,o.Jt)(i.getSubRolesPermissions,e),updateRolesPermissions:async e=>await(0,o.bE)(i.updateRolesPermissions,e)}}}]);
//# sourceMappingURL=6234.4d63bff6.chunk.js.map