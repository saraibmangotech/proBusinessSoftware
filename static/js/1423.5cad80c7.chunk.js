"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[1423],{61423:(e,l,o)=>{o.r(l),o.d(l,{default:()=>p});var i=o(65043),r=o(96446),t=o(68903),n=o(85865),s=o(91284),a=o(77020),d=o(20566),m=o(37230),u=o(24858),c=o(22030),v=o(85900),g=o(95692),x=o(29542),b=o(44563),h=o(73216),y=o(70579);const p=function(){var e,l,o,p,A,j,f,C,N,S,k,w,_;const z=(0,h.Zp)(),[E,P]=(0,i.useState)("company"),[W,q]=(0,i.useState)(!0),[R,T]=(0,i.useState)(!0),[V,I]=(0,i.useState)(!1),[L,M]=(0,i.useState)([]),[Y,$]=(0,i.useState)(null),[F,D]=(0,i.useState)(null),[O,U]=(0,i.useState)([]),[Q,Z]=(0,i.useState)(!1),[B,G]=(0,i.useState)(!1),[H,J]=(0,i.useState)([]),[K,X]=(0,i.useState)(null),{register:ee,handleSubmit:le,getValues:oe,setValue:ie,formState:{errors:re}}=(0,u.mN)(),{register:te,handleSubmit:ne,setValue:se,getValues:ae,control:de,watch:me,formState:{errors:ue}}=(0,u.mN)(),{register:ce,handleSubmit:ve,setValue:ge,getValues:xe,formState:{errors:be}}=(0,u.mN)();return(0,i.useEffect)((()=>{(async()=>{try{let e={page:1,limit:1e3};const{data:l}=await v.A.getCategoryList(e);J(null===l||void 0===l?void 0:l.categories)}catch(e){(0,g.Ni)(e)}})(),(async()=>{try{let e={page:1,limit:1e3};const{data:l}=await v.A.getCustomerQueue(e);M(null===l||void 0===l?void 0:l.rows);let o=await(null===l||void 0===l?void 0:l.rows.find((e=>"Walk-In Customer"==(null===e||void 0===e?void 0:e.name))));D(o)}catch(e){(0,g.Ni)(e)}})()}),[]),(0,y.jsxs)(r.A,{m:3,sx:{backgroundColor:"white",borderRadius:"12px"},children:[(0,y.jsx)(x.A,{open:Q,onClose:()=>Z(!1),title:"Change Status?",children:(0,y.jsx)(r.A,{component:"form",onSubmit:ve((async e=>{console.log(e);try{let l={code:null===e||void 0===e?void 0:e.code,name:null===e||void 0===e?void 0:e.name,customer_id:null===F||void 0===F?void 0:F.id};const o=v.A.addCompany(l);(0,g.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const i=await o;200===(null===i||void 0===i?void 0:i.responseCode)&&((async e=>{try{let l={customer_id:e||(null===F||void 0===F?void 0:F.id)};const{data:o}=await v.A.getCompanies(l);U(null===o||void 0===o?void 0:o.companies)}catch(l){console.error("Error fetching location:",l)}})(),Z(!1))}catch(l){(0,b.LY)(l)}})),children:(0,y.jsx)(t.Ay,{container:!0,spacing:2,children:(0,y.jsxs)(t.Ay,{container:!0,sx:{justifyContent:"center"},children:[(0,y.jsx)(t.Ay,{item:!0,xs:12,children:(0,y.jsx)(d.A,{label:"Name *:",size:"small",placeholder:" Name",error:null===be||void 0===be||null===(e=be.name)||void 0===e?void 0:e.message,register:ce("name",{required:"Please enter  name."})})}),(0,y.jsx)(t.Ay,{item:!0,xs:12,children:(0,y.jsx)(d.A,{label:"Code *:",size:"small",placeholder:" Code",error:null===be||void 0===be||null===(l=be.code)||void 0===l?void 0:l.message,register:ce("code",{required:"Please enter  code."})})}),(0,y.jsxs)(t.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,y.jsx)(s.jn,{bgcolor:a.A.primary,title:"Yes,Confirm",type:"submit"}),(0,y.jsx)(s.jn,{onClick:()=>Z(!1),bgcolor:"#FF1F25",title:"No,Cancel"})]})]})})})}),(0,y.jsx)(r.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",p:3,alignItems:"flex-end"},children:(0,y.jsx)(n.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:"Create Reception"})}),"individual"==E?(0,y.jsx)(r.A,{component:"form",onSubmit:le((async e=>{I(!0),console.log(e);try{let l={customer_id:null===F||void 0===F?void 0:F.id,service_category_id:null===K||void 0===K?void 0:K.id,service_category:null===K||void 0===K?void 0:K.name,customer_name:null===e||void 0===e?void 0:e.customerName,customer_email:null===e||void 0===e?void 0:e.email,mobile:null===e||void 0===e?void 0:e.mobile,token_number:null===e||void 0===e?void 0:e.tokenNumber,reference:null===e||void 0===e?void 0:e.reference,company_id:null===Y||void 0===Y?void 0:Y.id};const o=v.A.CreateReception(l);(0,g.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const i=await o;200===(null===i||void 0===i?void 0:i.responseCode)&&z("/reception-list")}catch(l){(0,b.LY)(l)}finally{I(!1)}})),children:(0,y.jsx)(r.A,{sx:{p:3},children:(0,y.jsxs)(t.Ay,{container:!0,sx:{gap:"5px 25px"},children:[(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Mobile *:",size:"small",type:"number",placeholder:"Mobile",error:null===re||void 0===re||null===(o=re.mobile)||void 0===o?void 0:o.message,register:ee("mobile",{required:"Please enter your mobile.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."},onChange:e=>{console.log(e.target.value),10==e.target.value.length&&(0,c.O0)((()=>(async e=>{try{let l={mobile:e};const{data:o}=await v.A.getCustomerDetail(l);let i=null===o||void 0===o?void 0:o.customer;console.log(i),ie("customerName",null===i||void 0===i?void 0:i.name),ie("email",null===i||void 0===i?void 0:i.email),ie("mobile",null===i||void 0===i?void 0:i.mobile)}catch(l){console.error("Error fetching location:",l)}})(e.target.value)))}})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Token Number *:",size:"small",placeholder:"Token Number",error:null===re||void 0===re||null===(p=re.tokenNumber)||void 0===p?void 0:p.message,register:ee("tokenNumber",{required:"Enter Token Number"})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Customer Name *:",size:"small",placeholder:"Customer Name",error:null===re||void 0===re||null===(A=re.customerName)||void 0===A?void 0:A.message,register:ee("customerName",{required:"Please enter customer name."})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Reference :",size:"small",placeholder:"Reference",error:null===re||void 0===re||null===(j=re.reference)||void 0===j?void 0:j.message,register:ee("reference")})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Email *:",size:"small",type:"email",placeholder:"Email",error:null===re||void 0===re||null===(f=re.email)||void 0===f?void 0:f.message,register:ee("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})}),(0,y.jsx)(t.Ay,{container:!0,justifyContent:"flex-end",children:(0,y.jsx)(s.jn,{disabled:W||V,bgcolor:"#bd9b4a",title:"Create",type:"submit"})})]})})}):(0,y.jsx)(r.A,{component:"form",onSubmit:ne((async e=>{I(!0),console.log(e);try{let l={is_company:"individual"!=E,customer_name:null===e||void 0===e?void 0:e.customerName,service_category_id:null===K||void 0===K?void 0:K.id,service_category:null===K||void 0===K?void 0:K.name,customer_id:null===F||void 0===F?void 0:F.id,email:null===e||void 0===e?void 0:e.email,mobile:null===e||void 0===e?void 0:e.mobile,token_number:null===e||void 0===e?void 0:e.tokenNumber,reference:null===e||void 0===e?void 0:e.reference,company_id:null===Y||void 0===Y?void 0:Y.id};const o=v.A.CreateReception(l);(0,g.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const i=await o;200===(null===i||void 0===i?void 0:i.responseCode)&&z("/reception-list")}catch(l){(0,b.LY)(l)}finally{I(!1)}})),children:(0,y.jsx)(r.A,{sx:{p:3},children:(0,y.jsxs)(t.Ay,{container:!0,sx:{gap:"5px 25px"},children:[(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Mobile *:",size:"small",type:"number",placeholder:"Mobile",error:null===ue||void 0===ue||null===(C=ue.mobile)||void 0===C?void 0:C.message,register:te("mobile",{required:"Please enter your mobile.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."},onChange:e=>{console.log(e.target.value),10==e.target.value.length&&(0,c.O0)((()=>(async e=>{try{let l={mobile:e};const{data:o}=await v.A.getCustomerDetail(l);let i=null===o||void 0===o?void 0:o.customer;if(console.log(i),null!==o&&void 0!==o&&o.customer)D(i),se("customer",i),se("customerName",null===i||void 0===i?void 0:i.name),se("email",null===i||void 0===i?void 0:i.email),se("mobile",null===i||void 0===i?void 0:i.mobile);else{let e=await L.find((e=>"Walk-In Customer"==(null===e||void 0===e?void 0:e.name)));console.log(e),D(e),se("customer",null===e||void 0===e?void 0:e.name)}}catch(l){console.error("Error fetching location:",l)}})(e.target.value)))}})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Token Number *:",size:"small",placeholder:"Token Number",error:null===ue||void 0===ue||null===(N=ue.tokenNumber)||void 0===N?void 0:N.message,register:te("tokenNumber",{required:"Enter Token Number"})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Customer Name *:",size:"small",placeholder:"Customer Name",error:null===ue||void 0===ue||null===(S=ue.customerName)||void 0===S?void 0:S.message,register:te("customerName",{required:"Please enter customer name."})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Reference:",size:"small",placeholder:"Reference",error:null===ue||void 0===ue||null===(k=ue.reference)||void 0===k?void 0:k.message,register:te("reference")})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(d.A,{label:"Email :",size:"small",type:"email",placeholder:"Email",error:null===ue||void 0===ue||null===(w=ue.email)||void 0===w?void 0:w.message,register:te("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})}),(0,y.jsx)(t.Ay,{item:!0,xs:2.8,children:(0,y.jsx)(m.A,{size:"small",label:"Customer *:",options:L,selected:F,onSelect:e=>{D(e),"Walk-In Customer"==(null===e||void 0===e?void 0:e.name)?(G(!0),se("customerName",""),se("email",""),se("mobile","")):(console.log(e),se("customerName",null===e||void 0===e?void 0:e.name),se("email",null===e||void 0===e?void 0:e.email),se("mobile",null===e||void 0===e?void 0:e.mobile),G(!1))},error:null===ue||void 0===ue||null===(_=ue.customer)||void 0===_?void 0:_.message,register:te("customer")})}),(0,y.jsx)(t.Ay,{container:!0,justifyContent:"flex-end",children:(0,y.jsx)(s.jn,{bgcolor:"#bd9b4a",title:"Create",type:"submit"})})]})})})]})}}}]);
//# sourceMappingURL=1423.5cad80c7.chunk.js.map