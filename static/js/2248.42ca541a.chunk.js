"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[2248],{62248:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var i=n(65043),o=n(28076),l=n(39652),s=n(77502),a=n(96446),r=n(68903),d=n(85865),c=n(79650),x=n(63336),p=n(71806),u=n(84882),m=n(73460),h=n(54620),g=n(45903),v=n(73216),A=n(77020),f=n(23602),j=(n(44563),n(36838),n(42165),n(66535),n(85900),n(83992)),y=n(91395),b=n(22030),S=(n(20566),n(24858)),C=n(79456),w=n(4841),k=n(29542),E=n(91284),F=(n(37230),n(72450),n(86005)),N=(n(86178),n(54667),n(99543)),R=n(95692),W=n(70255),z=n(17555),B=n(70579);const T=(0,g.A)(o.A)((e=>{let{theme:t}=e;return{border:0}})),$=(0,g.A)(l.A)((e=>{let{theme:t}=e;return{[`&.${s.A.head}`]:{fontSize:14,fontFamily:"Public Sans",border:"1px solid #EEEEEE",padding:"15px",textAlign:"left",whiteSpace:"nowrap",color:"#434343",paddingRight:"50px",background:"transparent",fontWeight:"bold"},[`&.${s.A.body}`]:{fontSize:14,fontFamily:"Public Sans",textWrap:"nowrap",padding:"5px !important",paddingLeft:"15px !important",".MuiBox-root":{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",".MuiBox-root":{cursor:"pointer"}},svg:{width:"auto",height:"24px"},".MuiTypography-root":{textTransform:"capitalize",fontFamily:h.ay.NunitoRegular,textWrap:"nowrap"},".MuiButtonBase-root":{padding:"8px",width:"28px",height:"28px"}}}})),M=(0,j.A)({loaderWrap:{display:"flex",height:100,"& svg":{width:"40px !important",height:"40px !important"}}});const P=function(){const{register:e,handleSubmit:t,getValues:n,setValue:o,formState:{errors:l}}=(0,S.mN)(),s=(0,v.Zp)(),g=(M(),(0,C.wA)()),j=(0,i.useRef)(null),[P,I]=(0,i.useState)(!1),[_,H]=(0,i.useState)("asc"),[J,L]=(0,i.useState)([]),[V,Y]=(0,i.useState)(0),[X,Z]=(0,i.useState)(50),[q,D]=(0,i.useState)(1),[G,K]=(0,i.useState)(!1),[O,Q]=(0,i.useState)(),[U,ee]=(0,i.useState)({}),[te,ne]=(0,i.useState)(),[ie,oe]=(0,i.useState)(!1),[le,se]=(0,i.useState)(),ae=async(e,t,n)=>{try{var i,o;console.log(n);const l=e||q,s=t||X,a=n?{...U,...n}:null;D(l),Z(s),ee(a);let r={page:l,limit:s};r={...r,...a},console.log(r);const{data:d}=await W.A.getRoles(r);L(null===d||void 0===d||null===(i=d.roles)||void 0===i?void 0:i.rows),Y(null===d||void 0===d||null===(o=d.roles)||void 0===o?void 0:o.count),console.log((0,b.TJ)(null===d||void 0===d?void 0:d.permissions)),ne((0,b.TJ)(null===d||void 0===d?void 0:d.permissions)),null===d||void 0===d||d.permissions.forEach((e=>{null!==e&&void 0!==e&&e.route&&null!==e&&void 0!==e&&e.identifier&&null!==e&&void 0!==e&&e.permitted&&g((0,w.Ft)(null===e||void 0===e?void 0:e.route))}))}catch(l){(0,R.Ni)(l)}};return(0,i.useEffect)((()=>{ae()}),[]),(0,B.jsxs)(a.A,{sx:{p:3},children:[(0,B.jsx)(k.A,{open:G,onClose:()=>K(!1),title:"Are You Sure?",children:(0,B.jsx)(r.Ay,{container:!0,spacing:2,children:(0,B.jsx)(r.Ay,{container:!0,sx:{justifyContent:"center"},children:(0,B.jsxs)(r.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,B.jsx)(E.jn,{bgcolor:A.A.primary,title:"Yes,Confirm",onClick:()=>(async e=>{oe(!0),K(!1),console.log(e);try{let e={role_id:le,force:!0};console.log(e);const t=W.A.deleteRole(e);(0,R.y8)(t,"Saving ...","Success","Something Went Wrong");const n=await t;200===(null===n||void 0===n?void 0:n.responseCode)&&ae()}catch(t){(0,R.Ni)(t)}finally{oe(!1)}})()}),(0,B.jsx)(E.jn,{onClick:()=>K(!1),bgcolor:"#FF1F25",title:"No,Cancel"})]})})})}),(0,B.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,B.jsx)(d.A,{sx:{fontSize:"24px",fontWeight:"bold"},children:"Role Management"}),(null===te||void 0===te?void 0:te.create)&&(0,B.jsx)(E.jn,{bgcolor:A.A.buttonBg,title:"Create Role",onClick:()=>s("/create-role"),loading:ie})]}),(0,B.jsxs)(a.A,{children:[(0,B.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,B.jsx)(r.Ay,{item:!0,xs:6,children:(0,B.jsx)(N.A,{type:"text",bgcolor:"#FAFAFA",color:A.A.primary,border:"3px solid #FAFAFA",StartLabel:"Search",placeholder:"Search",register:e("search")})}),(0,B.jsxs)(r.Ay,{item:!0,xs:6,display:"flex",justifyContent:"flex-end",gap:2,children:[(0,B.jsx)(E.jn,{bgcolor:"#0076bf",textcolor:A.A.white,title:"Reset",onClick:()=>{o("search",""),ae(1,"",null)},loading:ie}),(0,B.jsx)(E.jn,{bgcolor:A.A.buttonBg,title:"Search",onClick:()=>(()=>{let e={search:n("search")};(0,b.S$)((()=>ae(1,"",e)))})(),loading:ie})]})]}),(0,B.jsx)(r.Ay,{item:!0,md:11,children:J&&(0,B.jsxs)(a.A,{children:[(0,B.jsx)(r.Ay,{container:!0,mb:2}),J&&(0,B.jsxs)(i.Fragment,{children:[(0,B.jsx)(F.X,{ref:j,landscape:!0,paperSize:"A4",margin:5,fileName:"Import Customers",children:(0,B.jsx)(c.A,{component:x.A,sx:{maxHeight:"calc(100vh - 200px)",mt:5,backgroundColor:"transparent",boxShadow:"none !important",borderRadius:"0px !important"},children:(0,B.jsxs)(p.A,{stickyHeader:!0,sx:{minWidth:500},children:[(0,B.jsx)(u.A,{children:(0,B.jsx)(T,{children:[{name:"#",key:""},{name:"Name ",key:"name"},{name:"Actions",key:""}].map(((e,t)=>(0,B.jsx)($,{style:{textAlign:"left !important"},className:"pdf-table",children:(0,B.jsx)(a.A,{children:null===e||void 0===e?void 0:e.name})},t)))})}),(0,B.jsx)(m.A,{children:J.map(((e,t)=>(0,B.jsxs)(T,{sx:{border:"1px solid #EEEEEE !important"},children:[(0,B.jsx)($,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.id}),(0,B.jsx)($,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.name}),(0,B.jsx)($,{style:{textAlign:"left"},className:"pdf-table",children:null!==e&&void 0!==e&&e.system_default?(0,B.jsx)(a.A,{sx:{display:"flex !important",justifyContent:"flex-start !important"},children:(null===te||void 0===te?void 0:te.permission)&&(0,B.jsx)(a.A,{component:"div",onClick:()=>{"Staff"==(null===e||void 0===e?void 0:e.name)&&"Customer"==(null===e||void 0===e?void 0:e.name)&&"Agent"==(null===e||void 0===e?void 0:e.name)||s(`/permission/${null===e||void 0===e?void 0:e.id}`)},children:(0,B.jsx)(z.A,{})})}):(0,B.jsxs)(a.A,{sx:{display:"flex !important",justifyContent:"flex-start !important"},children:[(null===te||void 0===te?void 0:te.permission)&&(0,B.jsx)(a.A,{component:"div",onClick:()=>{"Staff"==(null===e||void 0===e?void 0:e.name)&&"Customer"==(null===e||void 0===e?void 0:e.name)&&"Agent"==(null===e||void 0===e?void 0:e.name)||s(`/permission/${null===e||void 0===e?void 0:e.id}`)},children:(0,B.jsx)(z.A,{})}),(null===te||void 0===te?void 0:te.edit)&&(0,B.jsx)(a.A,{component:"img",src:h.To.editIcon,onClick:()=>s("/update-role",{state:e}),width:"35px"}),(null===te||void 0===te?void 0:te.delete)&&(0,B.jsx)(a.A,{component:"img",src:h.To.deleteIcon,onClick:()=>{K(!0),se(null===e||void 0===e?void 0:e.id)},width:"35px"})]})})]},t)))})]})})}),(0,B.jsx)(y.A,{currentPage:q,pageSize:X,onPageSizeChange:e=>ae(1,e.target.value),tableCount:null===J||void 0===J?void 0:J.length,totalCount:V,onPageChange:e=>ae(e,"")})]}),P&&(0,B.jsx)(f.$,{})]})})]})]})}}}]);
//# sourceMappingURL=2248.42ca541a.chunk.js.map