"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[5052],{63475:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(28924),i=n(90035),l=n(17392),a=n(96446),r=n(85865),s=n(54620),u=n(77020),d=n(70579);const c=function(e){let{open:t,onClose:n,message1:c,message2:v}=e;return(0,d.jsxs)(i.A,{open:t,sx:{"& .MuiDialog-paper":{width:"25%",height:"auto",borderRadius:2,py:{xs:2,md:4},px:{xs:3,md:6}}},children:[(0,d.jsx)(l.A,{onClick:()=>n(),sx:{position:"absolute",right:13,top:13},children:(0,d.jsx)(o.A,{})}),(0,d.jsxs)(a.A,{sx:{textAlign:"center"},children:[(0,d.jsx)(s.M4,{}),(0,d.jsx)(r.A,{variant:"h3",sx:{color:u.A.charcoalGrey,fontFamily:s.ay.NunitoRegular,mt:1,mb:1.5},children:c}),(0,d.jsx)(r.A,{variant:"h6",sx:{color:u.A.smokeyGrey,fontFamily:s.ay.NunitoRegular},children:v})]})]})}},85052:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var o=n(65043),i=n(96446),l=n(19252),a=n(68903),r=n(85865),s=n(83992),u=function(e){return"object"===typeof e&&null!==e},d=function(e){var t=e.value,n=void 0===t?"":t,i=e.numInputs,l=void 0===i?4:i,a=e.onChange,r=e.onPaste,s=e.renderInput,d=e.shouldAutoFocus,c=void 0!==d&&d,v=e.inputType,p=void 0===v?"text":v,f=e.renderSeparator,g=e.placeholder,m=e.containerStyle,h=e.inputStyle,x=e.skipDefaultStyles,y=void 0!==x&&x,A=o.useState(0),j=A[0],b=A[1],k=o.useRef([]),w=function(){return n?n.toString().split(""):[]},_="number"===p||"tel"===p;o.useEffect((function(){k.current=k.current.slice(0,l)}),[l]),o.useEffect((function(){var e;c&&(null===(e=k.current[0])||void 0===e||e.focus())}),[c]);var S=function(){if("string"===typeof g){if(g.length===l)return g;g.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},C=function(e){return(_?!isNaN(Number(e)):"string"===typeof e)&&1===e.trim().length},T=function(e){var t=e.target.value;C(t)&&(I(t),R(j+1))},N=function(e){var t=e.nativeEvent,n=e.target.value;if(!C(n)){if(n.length===l)n.split("").some((function(e){return!C(e)}))||(P(n.split("")),R(l-1));null===t.data&&"deleteContentBackward"===t.inputType&&(e.preventDefault(),I(""),R(j-1)),e.target.value=""}},D=function(){b(j-1)},F=function(e){var t=w();[e.code,e.key].includes("Backspace")?(e.preventDefault(),I(""),R(j-1)):"Delete"===e.code?(e.preventDefault(),I("")):"ArrowLeft"===e.code?(e.preventDefault(),R(j-1)):"ArrowRight"===e.code||e.key===t[j]?(e.preventDefault(),R(j+1)):"Spacebar"!==e.code&&"Space"!==e.code&&"ArrowUp"!==e.code&&"ArrowDown"!==e.code||e.preventDefault()},R=function(e){var t,n,o=Math.max(Math.min(l-1,e),0);k.current[o]&&(null===(t=k.current[o])||void 0===t||t.focus(),null===(n=k.current[o])||void 0===n||n.select(),b(o))},I=function(e){var t=w();t[j]=e[0],P(t)},P=function(e){var t=e.join("");a(t)},L=function(e){var t;e.preventDefault();var n=w(),o=j,i=e.clipboardData.getData("text/plain").slice(0,l-j).split("");if(!_||!i.some((function(e){return isNaN(Number(e))}))){for(var a=0;a<l;++a)a>=j&&i.length>0&&(n[a]=null!==(t=i.shift())&&void 0!==t?t:"",o++);R(o),P(n)}};return o.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},u(m)&&m),className:"string"===typeof m?m:void 0,onPaste:r},Array.from({length:l},(function(e,t){return t})).map((function(e){var t,n,i;return o.createElement(o.Fragment,{key:e},s({value:null!==(t=w()[e])&&void 0!==t?t:"",placeholder:null!==(i=null===(n=S())||void 0===n?void 0:n[e])&&void 0!==i?i:void 0,ref:function(t){return k.current[e]=t},onChange:T,onFocus:function(t){return function(e){return function(t){b(t),e.target.select()}}(t)(e)},onBlur:D,onKeyDown:F,onPaste:L,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(y?{}:{width:"1em",textAlign:"center"},u(h)?h:{}),className:"string"===typeof h?h:void 0,type:p,inputMode:_?"numeric":"text",onInput:N},e),e<l-1&&("function"===typeof f?f(e):f))})))},c=n(73216),v=n(77020),p=n(54620),f=n(44563),g=n(91284),m=n(19668),h=n(69654),x=n(83835),y=n(79456),A=n(4841),j=n(22030),b=n(63475),k=n(70579);const w=(0,s.A)({otpBox:{paddingTop:48,paddingBottom:48,paddingLeft:40,paddingRight:40,backgroundColor:v.A.white,borderRadius:"16px",boxShadow:" 0px 8px 32px 0px #00000040"},subtitle:{marginTop:8,color:v.A.smokeyGrey,fontFamily:p.ay.NunitoRegular,textAlign:"center"}}),_=e=>{let{value:t,setValue:n}=e;return(0,k.jsx)(i.A,{sx:{my:2},children:(0,k.jsx)(d,{value:t,numInputs:4,onChange:n,inputStyle:{width:"50px",height:"50px",fontSize:"26px",backgroundColor:"#eaeaea",color:v.A.textSecondary,border:"none",borderRadius:"8px",outline:"none"},focusStyle:{width:"50px",height:"50px",fontSize:"26px",outline:"none",border:"none",borderRadius:"8px"},containerStyle:{display:"flex",justifyContent:"space-evenly"},renderInput:e=>(0,k.jsx)("input",{...e})})})};const S=function(){const e=w(),{state:t}=(0,c.zy)(),n=(0,c.Zp)();t||n("/login");const{userLogin:s}=(0,m.A)(),{setStorageItem:u}=(0,x.A)(),d=(0,y.wA)(),[S,C]=(0,o.useState)(!1),[T,N]=(0,o.useState)(!1),[D,F]=(0,o.useState)(!1),[R,I]=(0,o.useState)(""),[P,L]=(0,o.useState)(""),[O,z]=(0,o.useState)(!1),[E,B]=(0,o.useState)(!0),[G,M]=(0,o.useState)(),[V,Y]=(0,o.useState)(),K=()=>{try{const i=120;var e,t,n=i,o=setInterval((function(){e=parseInt(n/60,10),t=(t=parseInt(n%60,10))<10?"0"+t:t,M(e=e<10?"0"+e:e),Y(t),--n<0&&(n=i,B(!1),clearInterval(o))}),1e3)}catch(O){(0,f.LY)(O)}},Z=async()=>{C(!0);try{if("login"===(null===t||void 0===t?void 0:t.screen)){let e={email:null===t||void 0===t?void 0:t.email,password:null===t||void 0===t?void 0:t.password,phone_otp:R,email_otp:P};const{data:o}=await h.A.login(e);let i={email:null===t||void 0===t?void 0:t.email,password:null===t||void 0===t?void 0:t.password,otp_token:o.otp_token};setTimeout((async()=>{var e,t,l,a;const r=await h.A.login(i);if(null!==r&&void 0!==r&&null!==(e=r.data)&&void 0!==e&&e.password_change)return void n("/new-password",{state:{token:null===o||void 0===o?void 0:o.otp_token}});let c=null===r||void 0===r?void 0:r.data;c.token=(0,j.yv)("noToken"),c.fcm_token=localStorage.getItem("fcmToken"),s(c),u("journey",null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.journey),d((0,A._1)((0,j.QH)(null===r||void 0===r||null===(l=r.data)||void 0===l?void 0:l.modules))),d((0,A.K0)((0,j.Zz)(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.modules)))}),1e3)}else if("link"==(null===t||void 0===t?void 0:t.screen)){let e={email:null===t||void 0===t?void 0:t.email,uae_phone:null===t||void 0===t?void 0:t.uae_phone,phone_otp:R,email_otp:P,business_region:null===t||void 0===t?void 0:t.business_region};const{data:o,responseCode:i}=await h.A.Linking(e);let l={...t,otp_token:o.otp_token};const a=await h.A.Linking(l);200==(null===a||void 0===a?void 0:a.responseCode)?((0,f.ee)(null===a||void 0===a?void 0:a.message),n("/login")):((0,f.LY)("Try Again Later"),n("/login"))}else{let e={email:null===t||void 0===t?void 0:t.email,uae_phone:null===t||void 0===t?void 0:t.uae_phone,phone_otp:R,email_otp:P};if(null!==t&&void 0!==t&&t.uae_phone){const{data:n}=await h.A.register(e);let o={...t,otp_token:n.otp_token};setTimeout((async()=>{var e;const t=await h.A.register(o);if("export"===(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.customer_type))F(!0);else{var i;let e=null===t||void 0===t?void 0:t.data;e.token=(0,j.yv)("noToken"),e.fcm_token=localStorage.getItem("fcmToken"),s(e),u("journey",null===(i=t.data)||void 0===i?void 0:i.journey),d((0,A._1)((0,j.QH)(null===n||void 0===n?void 0:n.modules))),d((0,A.K0)((0,j.Zz)(null===n||void 0===n?void 0:n.modules)))}}),2e3)}else{const{data:o}=await h.A.forgetPassword(e);n(`/new-password?otp_token=${null===o||void 0===o?void 0:o.otp_token}`,{state:t})}}}catch(O){z(!0),I(""),L("")}finally{C(!1)}};return(0,o.useEffect)((()=>{K()}),[]),(0,o.useEffect)((()=>{console.log(null===P||void 0===P?void 0:P.length);null===R||void 0===R||R.length;const e=4===(null===P||void 0===P?void 0:P.length);N(!!e)}),[R,P]),(0,k.jsx)(o.Fragment,{children:t&&(0,k.jsxs)(i.A,{sx:{py:9,bgcolor:v.A.primary},children:[(0,k.jsx)(b.A,{open:D,onClose:()=>{F(!1),n("/")},message1:"Thank you for registration.",message2:"Please proceed with Galaxy Customer Service to start the export procedure."}),(0,k.jsx)(l.A,{children:(0,k.jsxs)(a.Ay,{container:!0,spacing:1,justifyContent:"space-between",children:[(0,k.jsx)(a.Ay,{item:!0,md:7,sx:{display:{xs:"none",md:"block"}},children:(0,k.jsx)(p.mU,{})}),(0,k.jsx)(a.Ay,{item:!0,xs:12,md:3.5,children:(0,k.jsxs)(i.A,{className:e.otpBox,children:[(0,k.jsx)(r.A,{variant:"h4",sx:{color:v.A.charcoalGrey,textAlign:"center"},children:"OTP Verification"}),(null===t||void 0===t?void 0:t.phoneField)&&(0,k.jsxs)(o.Fragment,{children:[(0,k.jsx)(r.A,{variant:"body2",className:e.subtitle,children:"OTP has been sent to your preferred mobile number"}),(0,k.jsx)(_,{value:R,setValue:e=>I(e)}),(0,k.jsx)(i.A,{sx:{mt:3}})]}),(null===t||void 0===t?void 0:t.emailField)&&(0,k.jsxs)(o.Fragment,{children:[(0,k.jsx)(r.A,{variant:"body2",className:e.subtitle,children:"OTP has been sent to your preferred email"}),(0,k.jsx)(_,{value:P,setValue:e=>L(e)})]}),O&&(0,k.jsx)(r.A,{color:"error",sx:{fontSize:12,textAlign:"center",my:2},children:"You have entered invalid OTP code"}),(0,k.jsx)(i.A,{sx:{mt:1.5,mb:2},children:E?(0,k.jsxs)(r.A,{variant:"body1",sx:{fontWeight:700,color:v.A.primary,fontFamily:p.ay.NunitoRegular,textAlign:"center"},children:[G,":",V]}):(0,k.jsxs)(o.Fragment,{children:[(0,k.jsx)(r.A,{variant:"body2",sx:{color:v.A.smokeyGrey,fontFamily:p.ay.NunitoRegular,textAlign:"center"},children:"Don\u2019t received OTP code?"}),(0,k.jsx)(r.A,{variant:"body2",onClick:()=>(async()=>{try{let e={uae_phone:null===t||void 0===t?void 0:t.uae_phone,email:null===t||void 0===t?void 0:t.email};if(null!==t&&void 0!==t&&t.uae_phone){const{message:t}=await h.A.register(e);(0,f.ee)(t)}else{const{message:t}=await h.A.forgetPassword(e);(0,f.ee)(t)}K(),B(!0)}catch(O){(0,f.LY)(O)}})(),sx:{cursor:"pointer",color:v.A.primary,fontFamily:p.ay.NunitoRegular,textAlign:"center"},children:"Resend Code"})]})}),T&&(0,k.jsx)(i.A,{sx:{textAlign:"center"},children:(0,k.jsx)(g.jn,{title:"Verify",loading:S,style:{fontSize:14,borderRadius:26,width:160},onClick:()=>Z()})})]})})]})})]})})}}}]);
//# sourceMappingURL=5052.2c42d37b.chunk.js.map