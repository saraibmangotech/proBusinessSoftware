"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[1239],{41239:(e,s,l)=>{l.r(s),l.d(s,{default:()=>P});var o=l(65043),r=l(96446),a=l(85865),i=l(68903),n=l(51787),t=l(17392),d=l(24858),m=(l(54620),l(73216)),c=l(91284),u=(l(77020),l(44563),l(20566)),p=(l(77292),l(95692)),x=l(3632),g=l(43559),v=l(37230),h=l(61137),w=l(70255),y=l(22030),A=l(19668),j=l(70579);const P=function(){var e,s,l,P,b,f,S;const R=(0,m.Zp)(),{state:C}=(0,m.zy)(),{register:z,handleSubmit:_,formState:{errors:E},control:N,getValues:U,setValue:k}=(0,d.mN)(),{register:q,handleSubmit:W,setValue:I,getValues:V,formState:{errors:J}}=(0,d.mN)(),{user:F,userLogout:L}=(0,A.A)(),[O,$]=(0,o.useState)(!1),[K,Z]=(0,o.useState)(!1),[B,D]=(0,o.useState)(!1),[G,H]=(0,o.useState)([]),[M,Q]=(0,o.useState)(null),[T,X]=(0,o.useState)(!1),[Y,ee]=(0,o.useState)(!1),[se,le]=(0,o.useState)(!1),[oe,re]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{(async e=>{try{var s;let l={page:1,limit:1e3,search:e,customer_id:null===F||void 0===F?void 0:F.customer_id};const{data:o}=await w.A.getRoles(l);H(null===o||void 0===o||null===(s=o.roles)||void 0===s?void 0:s.rows)}catch(l){(0,p.Ni)(l)}})(),C&&(console.log(C),k("name",null===C||void 0===C?void 0:C.name),Q(null===C||void 0===C?void 0:C.role),k("role",null===C||void 0===C?void 0:C.role),k("email",null===C||void 0===C?void 0:C.email),k("phone",null===C||void 0===C?void 0:C.phone))}),[]),(0,j.jsxs)(r.A,{sx:{p:3,borderRadius:3},children:[(0,j.jsxs)(r.A,{component:"form",onSubmit:_((async e=>{$(!0),X(!0),console.log(e);try{let e={name:U("name"),id:null===C||void 0===C?void 0:C.id,email:U("email"),phone:U("phone"),customer_id:null===F||void 0===F?void 0:F.customer_id,role_id:null===M||void 0===M?void 0:M.id};console.log(e);const s=h.A.updateUser(e);(0,p.y8)(s,"Saving ...","Success","Something Went Wrong");const l=await s;200===(null===l||void 0===l?void 0:l.responseCode)&&R("/sub-user-list")}catch(s){X(!1)}finally{$(!1)}})),children:[(0,j.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"flex-end"},children:[(0,j.jsx)(a.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:"Update User"}),(0,j.jsx)(r.A,{sx:{display:"flex",gap:"10px"},children:(0,j.jsx)(c.jn,{bgcolor:"#bd9b4a",title:"Save",type:"submit",disabled:T})})]}),(0,j.jsxs)(i.Ay,{container:!0,spacing:0,mt:5,p:1,gap:3,children:[(0,j.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,j.jsx)(u.A,{label:" Name :*",size:"small",placeholder:" Name",error:null===E||void 0===E||null===(e=E.name)||void 0===e?void 0:e.message,register:z("name",{required:"Please enter name."})})}),(0,j.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,j.jsx)(u.A,{label:"Email :*",size:"small",placeholder:"Email",error:null===E||void 0===E||null===(s=E.email)||void 0===s?void 0:s.message,register:z("email",{required:"Please enter your email.",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})}),(0,j.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,j.jsx)(u.A,{label:"Phone :*",size:"small",placeholder:"Phone ",type:"number",error:null===E||void 0===E||null===(l=E.phone)||void 0===l?void 0:l.message,register:z("phone",{required:"Please enter phone.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."}})})}),(0,j.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,j.jsx)(v.A,{size:"small",label:"Select Role :*",options:G,selected:M,onSelect:e=>Q(e),error:null===E||void 0===E||null===(P=E.role)||void 0===P?void 0:P.message,register:z("role",{required:"Please select role"})})})]})]}),(0,j.jsxs)(r.A,{component:"form",onSubmit:W((async e=>{$(!0),X(!0),console.log(e);try{let e={email:U("email"),old_password:(0,y.yv)(V("oldPassword")),new_password:(0,y.yv)(V("newPassword"))};console.log(e);const s=h.A.UpdatePassword(e);(0,p.y8)(s,"Saving ...","Success","Something Went Wrong")}catch(s){X(!1)}finally{$(!1)}})),children:[(0,j.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"flex-end"},children:[(0,j.jsx)(a.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:"Update User Password"}),(0,j.jsx)(r.A,{sx:{display:"flex",gap:"10px"},children:(0,j.jsx)(c.jn,{bgcolor:"#bd9b4a",title:"Change Password",type:"submit"})})]}),(0,j.jsxs)(i.Ay,{container:!0,spacing:0,mt:5,p:1,gap:3,children:[(0,j.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,j.jsx)(u.A,{size:"small",label:"Old Password :*",type:Y?"text":"password",placeholder:"Enter Old Password",InputProps:{endAdornment:(0,j.jsx)(n.A,{position:"end",children:(0,j.jsx)(t.A,{edge:"end",onClick:()=>ee(!Y),children:Y?(0,j.jsx)(x.A,{color:"primary"}):(0,j.jsx)(g.A,{color:"primary"})})})},error:null===J||void 0===J||null===(b=J.oldPassword)||void 0===b?void 0:b.message,register:q("oldPassword",{required:"Please enter your old password."})})}),(0,j.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,j.jsx)(u.A,{size:"small",label:"New Password :*",type:se?"text":"password",placeholder:"Enter New Password",InputProps:{endAdornment:(0,j.jsx)(n.A,{position:"end",children:(0,j.jsx)(t.A,{edge:"end",onClick:()=>le(!se),children:se?(0,j.jsx)(x.A,{color:"primary"}):(0,j.jsx)(g.A,{color:"primary"})})})},error:null===J||void 0===J||null===(f=J.newPassword)||void 0===f?void 0:f.message,register:q("newPassword",{required:"Please enter your new password.",minLength:{value:8,message:"Password must be at least 8 characters long."}})})}),(0,j.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,j.jsx)(u.A,{size:"small",label:"Confirm Password :*",type:oe?"text":"password",placeholder:"Confirm New Password",InputProps:{endAdornment:(0,j.jsx)(n.A,{position:"end",children:(0,j.jsx)(t.A,{edge:"end",onClick:()=>re(!oe),children:oe?(0,j.jsx)(x.A,{color:"primary"}):(0,j.jsx)(g.A,{color:"primary"})})})},error:null===J||void 0===J||null===(S=J.confirmPassword)||void 0===S?void 0:S.message,register:q("confirmPassword",{required:"Please confirm your new password.",validate:e=>e===V("newPassword")||"Passwords do not match."})})})]})]})]})}},77292:(e,s,l)=>{l.d(s,{A:()=>a});var o=l(82113);const r={createRole:"roles/add",getRoles:"roles",updateRole:"roles/update",deleteRole:"roles/delete",getRolesPermissions:"permissions",updateRolesPermissions:"permissions/update",getSubRolesPermissions:"permissions/subUser"},a={createRole:async e=>await(0,o.bE)(r.createRole,e),getRoles:async e=>await(0,o.Jt)(r.getRoles,e),updateRole:async e=>await(0,o.F6)(r.updateRole,e),deleteRole:async e=>await(0,o.KF)(r.deleteRole,e),getRolesPermissions:async e=>await(0,o.Jt)(r.getRolesPermissions,e),getSubRolesPermissions:async e=>await(0,o.Jt)(r.getSubRolesPermissions,e),updateRolesPermissions:async e=>await(0,o.bE)(r.updateRolesPermissions,e)}}}]);
//# sourceMappingURL=1239.b0b5e3e3.chunk.js.map