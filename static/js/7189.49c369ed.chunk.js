"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[7189],{17189:(e,t,l)=>{l.r(t),l.d(t,{default:()=>T});var i=l(65043),o=l(28076),n=l(39652),a=l(77502),d=l(96446),s=l(85865),r=l(68903),c=l(79650),u=l(63336),p=l(71806),v=l(84882),x=l(73460),h=l(77739),m=l(81637),A=l(45903),g=l(54620),f=l(77020),j=l(23602),y=l(44563);l(51593),l(82113);var b=l(83992),S=l(91395),w=l(73216),F=l(20566),D=l(24858),_=l(22030),N=l(37230),Y=(l(89133),l(93445)),C=l(91284),H=l(86178),M=l.n(H),E=l(2010),k=l(11238),z=l(72450),W=l(86005),B=l(95692),P=l(70579);const R=(0,A.A)(o.A)((e=>{let{theme:t}=e;return{border:0}})),G=(0,A.A)(n.A)((e=>{let{theme:t}=e;return{[`&.${a.A.head}`]:{fontSize:14,fontFamily:"Public Sans",border:"1px solid #EEEEEE",padding:"15px",textAlign:"left",whiteSpace:"nowrap",color:"#434343",paddingRight:"50px",background:"transparent",fontWeight:"bold"},[`&.${a.A.body}`]:{fontSize:14,fontFamily:"Public Sans",textWrap:"nowrap",padding:"5px !important",paddingLeft:"15px !important",".MuiBox-root":{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",".MuiBox-root":{cursor:"pointer"}},svg:{width:"auto",height:"24px"},".MuiTypography-root":{textTransform:"capitalize",fontFamily:g.ay.NunitoRegular,textWrap:"nowrap"},".MuiButtonBase-root":{padding:"8px",width:"28px",height:"28px"}}}})),L=(0,b.A)({loaderWrap:{display:"flex",height:100,"& svg":{width:"40px !important",height:"40px !important"}}});const T=function(){const e=L(),t=((0,w.Zp)(),(0,i.useRef)()),{register:l,handleSubmit:n,setValue:a}=(0,D.mN)(),A=["Date","JV#","Particular#","Type","Description","Comments","Debit (AED)","Credit (AED)","Balance (AED)"],[b,H]=(0,i.useState)(!1),[T,I]=(0,i.useState)(!1),[$,K]=(0,i.useState)(),[V,J]=(0,i.useState)([]),[X,Z]=(0,i.useState)(null),[q,O]=(0,i.useState)();let Q=q;const[U,ee]=(0,i.useState)([]),[te,le]=(0,i.useState)(null),[ie,oe]=(0,i.useState)(0),[ne,ae]=(0,i.useState)(50),[de,se]=(0,i.useState)(1),[re,ce]=(0,i.useState)({}),[ue,pe]=(0,i.useState)(),[ve,xe]=(0,i.useState)(),he=async e=>{try{var t;let l={page:1,limit:50,name:e};const{data:i}=await E.A.getAccountsDropDown(l);J(null===i||void 0===i||null===(t=i.accounts)||void 0===t?void 0:t.rows)}catch(l){(0,B.Ni)(l)}},me=async(e,t,l)=>{I(!0);try{var i,o,n;const a=e||de,d=t||ne,s={...re,...l};se(a),ae(d),ce(s);let r={page:a,limit:d};r={...r,...s};const{data:c}=await E.A.getAccountLedgers(r);K(null===c||void 0===c||null===(i=c.statement)||void 0===i?void 0:i.rows),oe(null===c||void 0===c||null===(o=c.statement)||void 0===o?void 0:o.count),O(null===c||void 0===c||null===(n=c.statement)||void 0===n?void 0:n.opening_balance_aed)}catch(a){(0,B.Ni)(a)}finally{I(!1)}};return(0,i.useEffect)((()=>{he()}),[]),(0,P.jsxs)(d.A,{sx:{p:3},children:[(0,P.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mr:4,my:4},children:[(0,P.jsx)(s.A,{variant:"h5",sx:{color:f.A.charcoalGrey,fontFamily:g.ay.NunitoRegular},children:"General Ledger"}),(null===$||void 0===$?void 0:$.length)>0&&(0,P.jsxs)(d.A,{sx:{textAlign:"right",p:4,display:"flex",gap:2},children:[(0,P.jsx)(C.jn,{title:"Download PDF",type:"button",style:{backgroundColor:f.A.bluishCyan},onClick:()=>(0,_.GK)(t)}),(0,P.jsx)(C.jn,{title:"Download Excel",onClick:()=>(()=>{const e=A.filter((e=>"Action"!==e)),t=$.map(((e,t)=>{var l,i,o,n,a,d,s;return[null!==e&&void 0!==e&&e.created_at?M()(null===e||void 0===e?void 0:e.created_at).format("MM-DD-YYYY"):"-",null!==e&&void 0!==e&&e.journal_id?(null===e||void 0===e?void 0:e.series_id)+(null===e||void 0===e?void 0:e.journal_id):"-",null!==(l=null===e||void 0===e||null===(i=e.entry)||void 0===i?void 0:i.reference_no)&&void 0!==l?l:"-",null!==(o=null===e||void 0===e||null===(n=e.type)||void 0===n?void 0:n.type_name)&&void 0!==o?o:"-",null!==(a=null===e||void 0===e?void 0:e.description)&&void 0!==a?a:"-",null!==(d=null===e||void 0===e?void 0:e.comment)&&void 0!==d?d:"-",parseFloat(null===e||void 0===e?void 0:e.debit).toFixed(2),parseFloat(null===e||void 0===e?void 0:e.credit).toFixed(2),null===(s=Q)||void 0===s?void 0:s.toFixed(2)]})),l=k.Wp.aoa_to_sheet([e,...t]),i=k.Wp.book_new();k.Wp.book_append_sheet(i,l,"Sheet1");const o=k.M9(i,{bookType:"xlsx",type:"array",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,z.saveAs)(new Blob([o]),"data.xlsx")})()})]})]}),(0,P.jsxs)(d.A,{children:[(0,P.jsx)(d.A,{component:"form",onSubmit:n((()=>{let e={account_id:null!==te&&void 0!==te&&te.id?null===te||void 0===te?void 0:te.id:null===X||void 0===X?void 0:X.id,from_date:ue?M()(new Date(ue)).format("MM-DD-YYYY"):"",to_date:ve?M()(new Date(ve)).format("MM-DD-YYYY"):""};me(1,"",e)})),children:(0,P.jsxs)(r.Ay,{container:!0,spacing:1,columns:14,children:[(0,P.jsx)(r.Ay,{item:!0,xs:12,sm:2,children:(0,P.jsx)(N.A,{size:"small",onSearch:e=>he(e),label:"Account",options:V,selected:X,onSelect:e=>{Z(e),(async e=>{try{var t;let l={page:1,limit:50,primary_account_id:null!==e&&void 0!==e?e:null===X||void 0===X?void 0:X.id};const{data:i}=await E.A.getAccounts(l);ee(null===i||void 0===i||null===(t=i.accounts)||void 0===t?void 0:t.rows)}catch(l){(0,B.Ni)(l)}})(null===e||void 0===e?void 0:e.id)}})}),(0,P.jsx)(r.Ay,{item:!0,xs:12,sm:2,children:(0,P.jsx)(N.A,{disabled:!X,size:"small",label:"Child Account",options:U,selected:te,onSelect:e=>{le(e)},register:l("account")})}),(0,P.jsx)(r.Ay,{item:!0,xs:12,sm:2,children:(0,P.jsx)(F.A,{size:"small",label:"Search",placeholder:"Search",register:l("search",{onChange:e=>{return t={search:e.target.value},void(0,_.S$)((()=>me(1,"",t)));var t}})})}),(0,P.jsx)(r.Ay,{item:!0,xs:12,sm:3,children:(0,P.jsx)(Y.A,{disableFuture:!0,size:"small",label:"From Date",value:ue,onChange:e=>(e=>{try{if("Invalid Date"==e)return void pe("invalid");pe(new Date(e))}catch(t){(0,y.LY)(t)}})(e)})}),(0,P.jsx)(r.Ay,{item:!0,xs:12,sm:3,children:(0,P.jsx)(Y.A,{disableFuture:!0,size:"small",minDate:ue,label:"To Date",value:ve,onChange:e=>(e=>{try{if("Invalid Date"==e)return void xe("invalid");xe(new Date(e))}catch(t){(0,y.LY)(t)}})(e)})}),(0,P.jsx)(r.Ay,{item:!0,xs:12,sm:1,sx:{mt:3.5},children:(0,P.jsx)(C.jn,{title:"Search",type:"submit",loading:T})})]})}),$&&(0,P.jsxs)(i.Fragment,{children:[(0,P.jsxs)(W.X,{ref:t,landscape:!0,paperSize:"A4",margin:5,fileName:"General Ledger",children:[(0,P.jsx)(d.A,{className:"pdf-show",sx:{display:"none"},children:(0,P.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,P.jsx)(s.A,{variant:"h5",sx:{color:f.A.charcoalGrey,fontFamily:g.ay.NunitoRegular,mb:2},children:"Vehicle Sales Agreement Reversals"}),(0,P.jsxs)(d.A,{sx:{fontWeight:400,fontSize:"12px",mt:1.5,color:f.A.charcoalGrey},children:[(0,P.jsx)("span",{children:"Date: \xa0\xa0"}),M()().format("MM-DD-YYYY")]})]})}),(0,P.jsx)(c.A,{component:u.A,sx:{boxShadow:"0px 8px 18px 0px #9B9B9B1A",borderRadius:2,maxHeight:"calc(100vh - 330px)"},className:"table-box",children:(0,P.jsxs)(p.A,{stickyHeader:!0,sx:{minWidth:500},children:[(0,P.jsx)(v.A,{children:(0,P.jsx)(o.A,{children:A.map(((e,t)=>(0,P.jsx)(G,{className:"pdf-table",children:e},t)))})}),(0,P.jsx)(x.A,{children:b?(0,P.jsx)(R,{children:(0,P.jsx)(G,{colSpan:A.length+2,align:"center",sx:{fontWeight:600},children:(0,P.jsx)(d.A,{className:e.loaderWrap,children:(0,P.jsx)(m.A,{})})})}):(null===$||void 0===$?void 0:$.length)>0?(0,P.jsx)(i.Fragment,{children:$.map(((e,t)=>{var l,i,o,n,a,s,r,c,u,p,v;(0,_.SK)(null===e||void 0===e||null===(l=e.entry)||void 0===l?void 0:l.reference_module);const x="debit"===(null===X||void 0===X?void 0:X.nature)?(parseFloat(null===e||void 0===e?void 0:e.debit)-parseFloat(null===e||void 0===e?void 0:e.credit)).toFixed(2):(parseFloat(null===e||void 0===e?void 0:e.credit)-parseFloat(null===e||void 0===e?void 0:e.debit)).toFixed(2);return Q+=parseFloat(x),(0,P.jsxs)(R,{sx:{bgcolor:t%2!==0&&"#EFF8E7"},children:[(0,P.jsx)(G,{className:"pdf-table",children:null!==e&&void 0!==e&&e.created_at?M()(null===e||void 0===e?void 0:e.created_at).format("MM-DD-YYYY"):"-"}),(0,P.jsx)(G,{className:"pdf-table",children:null!==e&&void 0!==e&&e.journal_id?(null===e||void 0===e?void 0:e.series_id)+(null===e||void 0===e?void 0:e.journal_id):"-"}),(0,P.jsx)(G,{className:"pdf-table",children:null!==(i=null===e||void 0===e||null===(o=e.entry)||void 0===o?void 0:o.reference_no)&&void 0!==i?i:"-"}),(0,P.jsx)(G,{className:"pdf-table",children:null!==(n=null===e||void 0===e||null===(a=e.type)||void 0===a?void 0:a.type_name)&&void 0!==n?n:"-"}),(0,P.jsxs)(G,{className:"pdf-table",children:[(0,P.jsx)(h.A,{className:"pdf-hide",title:null!==(s=null===e||void 0===e?void 0:e.description)&&void 0!==s?s:"-",arrow:!0,placement:"top",slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[10,-2]}}]}},children:(null===e||void 0===e||null===(r=e.description)||void 0===r?void 0:r.length)>24?null===e||void 0===e||null===(c=e.description)||void 0===c?void 0:c.slice(0,18):null===e||void 0===e?void 0:e.description}),(0,P.jsx)(d.A,{component:"div",className:"pdf-show",sx:{display:"none !important"},children:null!==(u=null===e||void 0===e?void 0:e.description)&&void 0!==u?u:"-"})]}),(0,P.jsx)(G,{className:"pdf-table",children:null!==(p=null===e||void 0===e?void 0:e.comment)&&void 0!==p?p:"-"}),(0,P.jsx)(G,{className:"pdf-table",children:parseFloat(null===e||void 0===e?void 0:e.debit).toFixed(2)}),(0,P.jsx)(G,{className:"pdf-table",children:parseFloat(null===e||void 0===e?void 0:e.credit).toFixed(2)}),(0,P.jsx)(G,{className:"pdf-table",children:null===(v=Q)||void 0===v?void 0:v.toFixed(2)})]},t)}))}):(0,P.jsx)(R,{children:(0,P.jsx)(G,{colSpan:A.length+1,align:"center",sx:{fontWeight:600},children:"No Data Found"})})})]})})]}),(0,P.jsx)(S.A,{currentPage:de,pageSize:ne,onPageSizeChange:e=>me(1,e.target.value),tableCount:null===$||void 0===$?void 0:$.length,totalCount:ie,onPageChange:e=>me(e,"")})]}),b&&(0,P.jsx)(j.$,{})]})]})}},89133:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(82113);const o={getAuctionHouses:"auctionHouses",createAuctionHouse:"auctionHouses/add",updateAuctionHouse:"auctionHouses/update",deleteAuctionHouse:"auctionHouses/delete"},n={getAuctionHouses:async e=>await(0,i.Jt)(o.getAuctionHouses,e),createAuctionHouse:async e=>await(0,i.bE)(o.createAuctionHouse,e),updateAuctionHouse:async e=>await(0,i.F6)(o.updateAuctionHouse,e),deleteAuctionHouse:async e=>await(0,i.KF)(o.deleteAuctionHouse,e)}}}]);
//# sourceMappingURL=7189.49c369ed.chunk.js.map