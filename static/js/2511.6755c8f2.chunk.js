"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[2511],{72511:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var i=n(65043),l=n(28076),o=n(39652),a=n(77502),s=n(96446),r=n(85865),d=n(68903),c=n(79650),x=n(63336),m=n(71806),p=n(84882),u=n(73460),h=n(54620),g=n(45903),v=n(73216),A=n(77020),f=n(23602),y=(n(44563),n(36838),n(42165),n(66535),n(85900),n(83992)),j=n(91395),b=n(22030),S=(n(20566),n(24858)),C=n(79456),k=n(4841),w=(n(29542),n(91284)),N=(n(37230),n(72450),n(86005)),E=n(86178),F=n.n(E),R=n(54667),_=n(99543),I=n(95692),M=n(70579);const z=(0,g.A)(l.A)((e=>{let{theme:t}=e;return{border:0}})),T=(0,g.A)(o.A)((e=>{let{theme:t}=e;return{[`&.${a.A.head}`]:{fontSize:14,fontFamily:"Public Sans",border:"1px solid #EEEEEE",padding:"15px",textAlign:"left",whiteSpace:"nowrap",color:"#434343",paddingRight:"50px",background:"transparent",fontWeight:"bold"},[`&.${a.A.body}`]:{fontSize:14,fontFamily:"Public Sans",textWrap:"nowrap",padding:"5px !important",paddingLeft:"15px !important",".MuiBox-root":{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",".MuiBox-root":{cursor:"pointer"}},svg:{width:"auto",height:"24px"},".MuiTypography-root":{textTransform:"capitalize",fontFamily:h.ay.NunitoRegular,textWrap:"nowrap"},".MuiButtonBase-root":{padding:"8px",width:"28px",height:"28px"}}}})),$=(0,y.A)({loaderWrap:{display:"flex",height:100,"& svg":{width:"40px !important",height:"40px !important"}}});const W=function(){const{register:e,handleSubmit:t,getValues:n,setValue:l,formState:{errors:o}}=(0,S.mN)(),a=(0,v.Zp)(),g=($(),(0,C.wA)()),y=(0,i.useRef)(null),[E,W]=(0,i.useState)(!1),[P,B]=(0,i.useState)("asc"),[Y,D]=(0,i.useState)([]),[U,V]=(0,i.useState)(0),[H,J]=(0,i.useState)(50),[L,X]=(0,i.useState)(1),[Z,q]=(0,i.useState)(),[G,K]=(0,i.useState)({}),[O,Q]=(0,i.useState)(),[ee,te]=(0,i.useState)(!1),ne=async(e,t,n)=>{try{const i=e||L,l=t||H,o=n?{...G,...n}:null;X(i),J(l),K(o);let a={page:i,limit:l};a={...a,...o};const{data:s}=await R.A.getAgents(a);D(null===s||void 0===s?void 0:s.rows),V(null===s||void 0===s?void 0:s.count),Q((0,b.TJ)(null===s||void 0===s?void 0:s.permissions)),Q((0,b.TJ)(null===s||void 0===s?void 0:s.permissions)),null===s||void 0===s||s.permissions.forEach((e=>{null!==e&&void 0!==e&&e.route&&null!==e&&void 0!==e&&e.identifier&&null!==e&&void 0!==e&&e.permitted&&g((0,k.Ft)(null===e||void 0===e?void 0:e.route))}))}catch(i){(0,I.Ni)(i)}};return(0,i.useEffect)((()=>{ne()}),[]),(0,M.jsxs)(s.A,{sx:{p:3},children:[(0,M.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,M.jsx)(r.A,{sx:{fontSize:"24px",fontWeight:"bold"},children:"Commission Management"}),(null===O||void 0===O?void 0:O.create)&&(0,M.jsx)(w.jn,{bgcolor:"#bd9b4a",title:"Create Agent",onClick:()=>{a("/create-agent"),localStorage.setItem("currentUrl","/create-agent")},loading:ee})]}),(0,M.jsxs)(s.A,{children:[(0,M.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,M.jsx)(d.Ay,{item:!0,xs:6,children:(0,M.jsx)(_.A,{type:"text",bgcolor:"#FAFAFA",color:A.A.primary,border:"3px solid #FAFAFA",StartLabel:"Search",placeholder:"Search",register:e("search")})}),(0,M.jsxs)(d.Ay,{item:!0,xs:6,display:"flex",justifyContent:"flex-end",gap:2,children:[(0,M.jsx)(w.jn,{bgcolor:"#0076bf",textcolor:A.A.white,title:"Reset",onClick:()=>{l("search",""),ne(1,"",null)},loading:ee}),(0,M.jsx)(w.jn,{bgcolor:"#bd9b4a",title:"Search",onClick:()=>(()=>{let e={search:n("search")};(0,b.S$)((()=>ne(1,"",e)))})(),loading:ee})]})]}),(0,M.jsx)(d.Ay,{item:!0,md:11,children:Y&&(0,M.jsxs)(s.A,{children:[(0,M.jsx)(d.Ay,{container:!0,mb:2}),Y&&(0,M.jsxs)(i.Fragment,{children:[(0,M.jsx)(N.X,{ref:y,landscape:!0,paperSize:"A4",margin:5,fileName:"Import Customers",children:(0,M.jsx)(c.A,{component:x.A,sx:{maxHeight:"calc(100vh - 200px)",mt:5,backgroundColor:"transparent",boxShadow:"none !important",borderRadius:"0px !important"},children:(0,M.jsxs)(m.A,{stickyHeader:!0,sx:{minWidth:500},children:[(0,M.jsx)(p.A,{children:(0,M.jsx)(z,{children:[{name:"SR No.",key:""},{name:"Agent Name ",key:"name"},{name:"Date Added",key:"created_at"},{name:"Commission on Visa",key:"commission_visa"},{name:"Commission on Monthly Revenue",key:"commission_monthly"},{name:"Allocated Customers",key:"customerCount"},{name:"Actions",key:""}].map(((e,t)=>(0,M.jsx)(T,{style:{textAlign:"SR No."==(null===e||void 0===e?void 0:e.name)?"center":"left",paddingRight:"SR No."==(null===e||void 0===e?void 0:e.name)?"15px":"50px"},className:"pdf-table",children:(0,M.jsxs)(s.A,{sx:{display:"flex",alignItems:"flex-end"},children:[null===e||void 0===e?void 0:e.name," ","SR No."!=(null===e||void 0===e?void 0:e.name)&&"Actions"!=(null===e||void 0===e?void 0:e.name)&&(0,M.jsxs)(M.Fragment,{children:["\xa0",(0,M.jsx)("span",{style:{height:"20px",cursor:"pointer"},children:(0,M.jsx)(s.A,{component:"img",onClick:()=>{B("asc"==P?"desc":"asc"),(e=>{let t={sort_by:e,sort_order:P};(0,b.S$)((()=>ne(1,"",t)))})(null===e||void 0===e?void 0:e.key)},src:h.To.sortIcon,width:"18px"})})]})]})},t)))})}),(0,M.jsx)(u.A,{children:Y.map(((e,t)=>{var n,i;return(0,M.jsxs)(z,{sx:{border:"1px solid #EEEEEE !important"},children:[(0,M.jsx)(T,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.id}),(0,M.jsx)(T,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.name}),(0,M.jsx)(T,{style:{textAlign:"left"},className:"pdf-table",children:F()(null===e||void 0===e?void 0:e.created_at).format("MM-DD-YYYY")}),(0,M.jsx)(T,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.commission_visa}),(0,M.jsx)(T,{style:{textAlign:"left"},className:"pdf-table",children:null!==(n=null===e||void 0===e?void 0:e.commission_monthly)&&void 0!==n?n:"-"}),(0,M.jsx)(T,{style:{textAlign:"left"},className:"pdf-table",children:null!==(i=null===e||void 0===e?void 0:e.customerCount)&&void 0!==i?i:"-"}),(0,M.jsx)(T,{style:{textAlign:"left"},className:"pdf-table",children:(0,M.jsxs)(s.A,{children:[(null===O||void 0===O?void 0:O.details)&&(0,M.jsx)(s.A,{component:"img",src:h.To.detailIcon,onClick:()=>{a(`/agent-detail/${null===e||void 0===e?void 0:e.id}`),localStorage.setItem("currentUrl","/agent-detail")},width:"35px"}),(null===O||void 0===O?void 0:O.edit)&&(0,M.jsx)(s.A,{component:"img",sx:{cursor:"pointer"},onClick:()=>{a(`/update-agent/${null===e||void 0===e?void 0:e.id}`),localStorage.setItem("currentUrl","/update-agent")},src:h.To.editIcon,width:"35px"})]})})]},t)}))})]})})}),(0,M.jsx)(j.A,{currentPage:L,pageSize:H,onPageSizeChange:e=>ne(1,e.target.value,G),tableCount:null===Y||void 0===Y?void 0:Y.length,totalCount:U,onPageChange:e=>ne(e,"",G)})]}),E&&(0,M.jsx)(f.$,{})]})})]})]})}}}]);
//# sourceMappingURL=2511.6755c8f2.chunk.js.map