"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[6111],{8492:(e,t,o)=>{o.r(t),o.d(t,{default:()=>G});var l=o(65043),i=o(28076),s=o(39652),n=o(77502),a=o(96446),d=o(68903),r=o(85865),c=o(79650),u=o(63336),p=o(71806),m=o(84882),v=o(73460),x=o(17392),g=o(54620),h=o(45903),f=o(73216),y=o(77020),j=o(23602),A=o(44563),b=(o(36838),o(42165),o(66535),o(85900)),S=o(83992),C=o(91395),w=o(22030),_=o(20566),k=o(24858),F=o(79456),D=o(4841),N=o(29542),z=o(91284),P=o(37230),U=(o(72450),o(86005)),E=o(86178),L=o.n(E),R=(o(54667),o(99543)),T=o(95692),I=o(87383),M=o(93445),W=o(70255),q=o(21727),V=(o(18285),o(88073)),Y=o(50857),$=o(23768),B=o(19668),O=o(58422),H=o(28153),K=o(91973),Q=o(70579);const J=(0,h.A)(i.A)((e=>{let{theme:t}=e;return{border:0}})),X=(0,h.A)(s.A)((e=>{let{theme:t}=e;return{[`&.${n.A.head}`]:{fontSize:14,fontFamily:"Public Sans",border:"1px solid #EEEEEE",padding:"15px",textAlign:"left",whiteSpace:"nowrap",color:"#434343",paddingRight:"50px",background:"transparent",fontWeight:"bold"},[`&.${n.A.body}`]:{fontSize:14,fontFamily:"Public Sans",textWrap:"nowrap",padding:"5px !important",paddingLeft:"15px !important",".MuiBox-root":{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",".MuiBox-root":{cursor:"pointer"}},svg:{width:"auto",height:"24px"},".MuiTypography-root":{textTransform:"capitalize",fontFamily:g.ay.NunitoRegular,textWrap:"nowrap"},".MuiButtonBase-root":{padding:"8px",width:"28px",height:"28px"}}}})),Z=(0,S.A)({loaderWrap:{display:"flex",height:100,"& svg":{width:"40px !important",height:"40px !important"}}});const G=function(){var e,t,o,i,s,n,h,S,E,G,ee,te,oe,le;const ie=["text/csv"],{state:se}=(0,f.zy)(),{user:ne,userLogout:ae}=(0,B.A)();console.log(ne);const{register:de,handleSubmit:re,getValues:ce,setValue:ue,formState:{errors:pe}}=(0,k.mN)(),{register:me,handleSubmit:ve,setValue:xe,getValues:ge,reset:he,formState:{errors:fe}}=(0,k.mN)(),{register:ye,handleSubmit:je,setValue:Ae,getValues:be,formState:{errors:Se}}=(0,k.mN)(),{register:Ce,handleSubmit:we,setValue:_e,getValues:ke,formState:{errors:Fe}}=(0,k.mN)(),De=(0,f.Zp)(),Ne=(Z(),(0,F.wA)()),ze=(0,l.useRef)(null),[Pe,Ue]=(0,l.useState)(!1),[Ee,Le]=(0,l.useState)(!1),[Re,Te]=(0,l.useState)([]),[Ie,Me]=(0,l.useState)(!1),[We,qe]=(0,l.useState)("asc"),[Ve,Ye]=(0,l.useState)([]),[$e,Be]=(0,l.useState)(0),[Oe,He]=(0,l.useState)(50),[Ke,Qe]=(0,l.useState)(1),[Je,Xe]=(0,l.useState)(null),[Ze,Ge]=(0,l.useState)(0),[et,tt]=(0,l.useState)(),[ot,lt]=(0,l.useState)(),[it,st]=(0,l.useState)(null),[nt,at]=(0,l.useState)(null),[dt,rt]=(0,l.useState)(null),[ct,ut]=(0,l.useState)(null),[pt,mt]=(0,l.useState)([]),[vt,xt]=(0,l.useState)(!1),[gt,ht]=(0,l.useState)(null),[ft,yt]=(0,l.useState)(),[jt,At]=(0,l.useState)(!1),[bt,St]=(0,l.useState)(0),[Ct,wt]=(0,l.useState)(0),[_t,kt]=(0,l.useState)(),[Ft,Dt]=(0,l.useState)(),[Nt,zt]=(0,l.useState)(),[Pt,Ut]=(0,l.useState)(),[Et,Lt]=(0,l.useState)([]),[Rt,Tt]=(0,l.useState)(!1),[It,Mt]=(0,l.useState)(),[Wt,qt]=(0,l.useState)(null),[Vt,Yt]=(0,l.useState)(null),[$t,Bt]=(0,l.useState)(!1),[Ot,Ht]=(0,l.useState)([]),[Kt,Qt]=(0,l.useState)(!1),[Jt,Xt]=(0,l.useState)(null),[Zt,Gt]=(0,l.useState)(!1),[eo,to]=(0,l.useState)(null),[oo,lo]=(0,l.useState)(null),[io,so]=(0,l.useState)(null),[no,ao]=(0,l.useState)({}),[ro,co]=(0,l.useState)(),[uo,po]=(0,l.useState)(!1),mo=async(e,t)=>{St(0);try{const i=new FormData;i.append("document",e),console.log(e);const{data:s}=await V.A.post(Y.A.uploadDocuments,i,{onUploadProgress:e=>{const t=e.loaded,o=Math.round(100*t/e.total);St(o),console.log((0,w.KU)(t)),wt((0,w.KU)(t))}});var o,l;if(s)return t[0].isUpload=!0,t[0].file=null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.nations,console.log(s,"asddasasd"),null===s||void 0===s||null===(l=s.data)||void 0===l?void 0:l.path}catch(i){(0,A.LY)(i)}},vo=async(e,t,o)=>{try{const l=e||Ke,i=t||Oe,s=o?{...no,...o}:null;Qe(l),He(i),ao(s);let n={page:l,limit:i,customer_id:"C"==(null===ne||void 0===ne?void 0:ne.user_type)?null===ne||void 0===ne?void 0:ne.customer_id:null};n={...n,...s},console.log(n,"params");const{data:a}=await I.A.getVisaRequestList(n);Te(null===a||void 0===a?void 0:a.rows),Be(null===a||void 0===a?void 0:a.count),console.log((0,w.TJ)(null===a||void 0===a?void 0:a.permissions)),co((0,w.TJ)(null===a||void 0===a?void 0:a.permissions)),co((0,w.TJ)(null===a||void 0===a?void 0:a.permissions)),null===a||void 0===a||a.permissions.forEach((e=>{null!==e&&void 0!==e&&e.route&&null!==e&&void 0!==e&&e.identifier&&null!==e&&void 0!==e&&e.permitted&&Ne((0,D.Ft)(null===e||void 0===e?void 0:e.route))}))}catch(l){(0,T.Ni)(l)}},xo=e=>{try{if("Invalid Date"==e)return void st("invalid");st(new Date(e))}catch(t){(0,A.LY)(t)}},go=async(e,t,o,l)=>{try{const l=e||Ke,i=t||Oe,s={...no,...o};Qe(l),He(i),ao(s);let n={page:l,limit:1,customer_id:"C"==(null===ne||void 0===ne?void 0:ne.user_type)?null===ne||void 0===ne?void 0:ne.customer_id:null===Wt||void 0===Wt?void 0:Wt.id};n={...n,...s};const{data:a}=await b.A.checkWPS(n);Qt(null===a||void 0===a?void 0:a.wpsRequired),console.log(a),null!==a&&void 0!==a&&a.wpsRequired?(0,T.Ni)("You have to create WPS first"):(async()=>{St(0);let e=Nt;console.log(Wt,"asdasdas");try{const l=new FormData;l.append("file",_t),l.append("id",null===Wt||void 0===Wt?void 0:Wt.id),console.log(_t);let i=10485760;if(_t.size>i)return void(0,T.Ni)("File Size Must Be Less than 10 MB");const{data:s}=await V.A.post(Y.A.uploadCVS,l,{onUploadProgress:e=>{const t=e.loaded,o=Math.round(100*t/e.total);St(o),wt((0,w.KU)(t)),console.log((0,w.KU)(t))}});var t,o;if(200===(null===s||void 0===s?void 0:s.responseCode))return e[0].isUpload=!0,e[0].file=null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.nations,console.log(s,"Upload successful"),$.Ay.success("Successfully Updated!"),yt(!1),xt(!1),Dt(""),null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.path;console.log("asdasasdasdasdasdad"),Dt(""),yt(!1),xt(!1),(0,T.Ni)((null===s||void 0===s?void 0:s.message)||"An error occurred during upload.")}catch(s){var l,i;console.error("Upload error:",s),Dt(""),yt(!1),xt(!1),(0,T.Ni)((null===(l=s.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)||"Something went wrong, please try again.")}})()}catch(i){(0,T.Ni)(i)}},ho=async(e,t)=>{try{let t={customer_id:e};if(e){var o;const{data:l}=await b.A.getCustomerDetail(t);console.log(null===l||void 0===l||null===(o=l.details)||void 0===o?void 0:o.security_deposit_scenario),fo(1,1,{},e),Xt(null===l||void 0===l?void 0:l.details)}}catch(l){(0,T.Ni)(l)}},fo=async(e,t,o,l)=>{try{var i;let e={page:1,limit:1,customer_id:"C"==(null===ne||void 0===ne?void 0:ne.user_type)?null===ne||void 0===ne?void 0:ne.customer_id:l};const{data:t}=await b.A.getWPSList(e);if(Ht(null===t||void 0===t?void 0:t.rows[0]),(null===t||void 0===t||null===(i=t.rows)||void 0===i?void 0:i.length)>0){var s;let e=L()(null===t||void 0===t||null===(s=t.rows[0])||void 0===s?void 0:s.date).startOf("month"),o=L()().startOf("month").diff(e,"months");console.log(o,"diff"),Qt(o<=1)}else Qt(!0)}catch(n){(0,T.Ni)(n)}};return(0,l.useEffect)((()=>{if((async()=>{try{const{data:e}=await W.A.getBanks();mt(null===e||void 0===e?void 0:e.banks)}catch(e){(0,T.Ni)(e)}})(),(async(e,t,o)=>{try{var l;const i=e||Ke,s=t||Oe,n={...no,...o};Qe(i),He(s),ao(n);let a={page:1,limit:1e3};a={...a,...n};const{data:d}=await b.A.getCustomerQueue(a);console.log(null===d||void 0===d||null===(l=d.rows)||void 0===l?void 0:l.length),Ye(null===d||void 0===d?void 0:d.rows)}catch(i){(0,T.Ni)(i)}})(),"C"==(null===ne||void 0===ne?void 0:ne.user_type)&&(console.log(ne,"user"),Ae("customer",ne),qt(ne),ho(null===ne||void 0===ne?void 0:ne.customer_id)),se){console.log(se),vo(1,"",{approval_status:se})}else vo()}),[]),(0,Q.jsxs)(a.A,{sx:{p:3},children:[(0,Q.jsx)(N.A,{open:Rt,onClose:()=>{Lt([]),Tt(!1),he(),Mt("")},title:"Proof Of Payment",children:jt?(0,Q.jsx)(a.A,{children:(0,Q.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Q.jsx)(d.Ay,{container:!0,children:(0,Q.jsxs)(r.A,{sx:{fontSize:"18px",fontWeight:"bold",color:y.A.gray,mt:1},children:["Upload Proof : "," "]})}),(0,Q.jsx)(d.Ay,{container:!0,children:null===Et||void 0===Et?void 0:Et.map(((e,t)=>(0,Q.jsxs)(d.Ay,{item:!0,md:6,lg:6,sx:{cursor:"pointer",display:"flex",gap:"5px",alignItems:"center"},component:"div",onClick:()=>{console.log("https://pro.mangotech-api.com/"),console.log(e.trim());const t=e.trim().split("_").pop();null!==t&&void 0!==t&&t.includes("doc")||null!==t&&void 0!==t&&t.includes("xls")?(0,w.h1)(e.trim(),t||""):window.open("https://pro.mangotech-api.com/"+e.trim(),"_blank")},children:[console.log(Et),e&&(0,Q.jsx)(a.A,{children:(0,Q.jsx)(a.A,{component:"img",src:g.To.docIcon,alt:"Document Icon",width:35,height:35})}),(0,Q.jsx)("p",{style:{textAlign:"center",lineHeight:"20px",color:"#0F2772",fontWeight:"bold",fontSize:"15px"},children:e.trim().split("_").pop()})]},t)))}),(0,Q.jsx)(d.Ay,{item:!0,xs:12,sm:12,children:(0,Q.jsx)(R.A,{value:null===Je||void 0===Je?void 0:Je.proof_amount,label:"Amount : ",StartLabel:"AED",disabled:!0,register:Ce("amount",{required:"Enter  amount"})})}),(0,Q.jsx)(d.Ay,{item:!0,xs:12,sm:12,children:(0,Q.jsx)(_.A,{label:"Date :",size:"small",disabled:!0,value:L()(null===Je||void 0===Je?void 0:Je.proof_date).format("MM-DD-YYYY"),rows:5,placeholder:"Description",error:null===fe||void 0===fe||null===(o=fe.description)||void 0===o?void 0:o.message,register:me("description",{required:!1})})})]})}):(0,Q.jsx)(a.A,{component:"form",onSubmit:we((async e=>{try{let t={proof_date:it,id:null===Je||void 0===Je?void 0:Je.id,proof_document:It,proof_amount:null===e||void 0===e?void 0:e.amount};const o=I.A.UpdateProof(t);console.log(o),(0,T.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const l=await o;200===(null===l||void 0===l?void 0:l.responseCode)&&(Tt(!1),vo(),he(),Mt(""))}catch(t){console.log(t)}})),children:(0,Q.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Q.jsxs)(d.Ay,{item:!0,xs:12,children:[(0,Q.jsxs)(r.A,{sx:{fontSize:"18px",fontWeight:"bold",color:y.A.gray,mt:1},children:["Upload Proof :*"," "]}),(0,Q.jsx)(K.A,{Memo:!0,updateResult:(e,t)=>{console.log(t,"newResult"),Mt(t)},multiple:!0,accept:["image/png","image/jpg","image/jpeg","application/pdf","application/vnd.ms-excel","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],error:null===Fe||void 0===Fe||null===(e=Fe.proof)||void 0===e?void 0:e.message,file:It,register:Ce("proof",{required:"Please upload  proof   .",onChange:async e=>{const t=await(async e=>{try{e.preventDefault();const t=Array.from(e.target.files),o=10485760,l=["image/jpeg","image/png","application/pdf"],i=t.map((async e=>{if(e.size>o)return(0,T.Ni)(`File ${e.name} is larger than 10 MB`),null;if(!l.includes(e.type))return(0,T.Ni)(`File ${e.name} is not of an allowed type`),null;const t={name:e.name,file:"",type:e.type.split("/")[1],size:(0,w.KU)(e.size),isUpload:!1};try{return await mo(e,[t])}catch(i){return(0,T.Ni)(`Failed to upload ${e.name}: ${i.message}`),null}})),s=(await Promise.all(i)).filter((e=>null!==e));if(0===s.length)return(0,T.Ni)("No files were successfully uploaded"),"";const n=s.join(",");return console.log("Uploaded file paths:",n),n}catch(t){return(0,A.LY)(t.message||"An error occurred during file upload"),""}})(e);t&&Mt(t)}})})]}),(0,Q.jsx)(d.Ay,{item:!0,xs:12,sm:12,children:(0,Q.jsx)(R.A,{label:"Amount : ",disabled:!0,StartLabel:"AED",register:Ce("amount",{required:"Enter  amount"})})}),(0,Q.jsx)(d.Ay,{item:!0,xs:12,sm:12,children:(0,Q.jsx)(M.A,{label:"Payment Date :",value:it,size:"small",error:null===Fe||void 0===Fe||null===(t=Fe.date)||void 0===t?void 0:t.message,register:Ce("date",{required:"Please enter  date."}),onChange:e=>{xo(e),_e("date",e)}})}),(0,Q.jsx)(d.Ay,{container:!0,sx:{justifyContent:"center"},children:(0,Q.jsxs)(d.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,Q.jsx)(z.jn,{bgcolor:y.A.primary,title:"Yes,Confirm",type:"submit"}),(0,Q.jsx)(z.jn,{onClick:()=>{Tt(!1),he(),Mt("")},bgcolor:"#FF1F25",title:"No,Cancel"})]})})]})})}),(0,Q.jsx)(N.A,{open:vt,onClose:()=>xt(!1),title:"Upload Excel",children:(0,Q.jsx)(a.A,{component:"form",onSubmit:je((async()=>{go()})),children:(0,Q.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Q.jsx)(d.Ay,{item:!0,xs:12,sm:12,display:"flex",justifyContent:"center",children:(0,Q.jsx)(z.jn,{bgcolor:"#0076bf",title:"Download Template",onClick:()=>{fetch(q).then((e=>e.blob())).then((e=>{console.log(e);const t=window.URL.createObjectURL(new Blob([e])),o=document.createElement("a");o.href=t,o.setAttribute("download","Format.csv"),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o)})).catch((e=>console.error("Error downloading Excel file:",e)))},loading:uo})}),(0,Q.jsx)(d.Ay,{item:!0,xs:12,children:(0,Q.jsx)(P.A,{size:"small",label:"Select Customer :",options:Ve,disabled:"C"==(null===ne||void 0===ne?void 0:ne.user_type),selected:Wt,onSelect:e=>{qt(e),ho(null===e||void 0===e?void 0:e.id),Ae("customer",e)},error:null===Se||void 0===Se||null===(i=Se.customer)||void 0===i?void 0:i.message,register:ye("customer",{required:"Please select customer account."})})}),Wt&&(0,Q.jsxs)(d.Ay,{item:!0,xs:5,children:[(0,Q.jsx)(r.A,{sx:{fontSize:"18px",fontWeight:"bold",color:y.A.gray,mt:1},children:"Upload CSV :* "}),(0,Q.jsx)(H.A,{Memo:!0,accept:ie,error:null===Se||void 0===Se||null===(s=Se.excel)||void 0===s?void 0:s.message,disabled:Zt,register:ye("excel",{required:"Please upload  excel   .",onChange:async e=>{Gt(!0),(async e=>{try{if(console.log(e.target.files,"e.target.files"),e.target.files.length>0){e.preventDefault();const t=e.target.files[0];let o=[{name:null===t||void 0===t?void 0:t.name,file:"",type:null===t||void 0===t?void 0:t.type.split("/")[1],size:(0,w.KU)(t.size),isUpload:!1}];ie.includes(t.type)?(kt(t),zt(o),Gt(!1)):(0,T.Ni)(`Only ${(0,w.zc)(ie)} formats is supported`)}}catch(t){(0,T.Ni)(t)}})(e);const t=e.target.files[0];console.log(t),Dt(null===t||void 0===t?void 0:t.name),yt(t)}})}),console.log(null===ft||void 0===ft?void 0:ft.name,"asdasdasdasd"),(null===ft||void 0===ft?void 0:ft.name)&&(0,Q.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Q.jsx)(a.A,{component:"img",src:g.To.uploadXls,width:"50px"}),(0,Q.jsx)("span",{style:{color:"blue"},children:Ft})," "]})]}),(0,Q.jsx)(d.Ay,{container:!0,sx:{justifyContent:"center"},children:(0,Q.jsxs)(d.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,Q.jsx)(z.jn,{className:"disbaledClass",bgcolor:y.A.primary,title:"Yes,Confirm",type:"submit"}),(0,Q.jsx)(z.jn,{onClick:()=>{xt(!1),yt(!1),qt(null)},bgcolor:"#FF1F25",title:"No,Cancel"})]})})]})})}),(0,Q.jsx)(N.A,{open:Pe,onClose:()=>Ue(!1),title:"Change Status?",children:(0,Q.jsx)(a.A,{component:"form",onSubmit:re((async()=>{try{let e={status:ot.id,visa_id:null===Je||void 0===Je?void 0:Je.id};const t=I.A.updateStatus(e);console.log(t),(0,T.y8)(t,"Saving...","Added Successfully","Something Went Wrong");const o=await t;200===(null===o||void 0===o?void 0:o.responseCode)&&(Ue(!1),vo())}catch(e){console.log(e)}})),children:(0,Q.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Q.jsx)(d.Ay,{item:!0,xs:12,sm:12,children:(0,Q.jsx)(P.A,{size:"small",label:"Select Status :",options:[{id:"Pending",name:"Pending"},{id:"Approved",name:"Approved"},{id:"Rejected",name:"Rejected"}],selected:ot,onSelect:e=>{lt(e)},error:null===pe||void 0===pe||null===(n=pe.status)||void 0===n?void 0:n.message,register:de("status",{required:"Please select status."})})}),(0,Q.jsx)(d.Ay,{container:!0,sx:{justifyContent:"center"},children:(0,Q.jsxs)(d.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,Q.jsx)(z.jn,{bgcolor:y.A.primary,title:"Yes,Confirm",type:"submit"}),(0,Q.jsx)(z.jn,{onClick:()=>Ue(!1),bgcolor:"#FF1F25",title:"No,Cancel"})]})})]})})}),(0,Q.jsx)(N.A,{open:Ee,onClose:()=>Le(!1),title:"Change Payment Status?",children:(0,Q.jsx)(a.A,{component:"form",onSubmit:ve((async e=>{Bt(!0);parseFloat(.05*parseFloat(null===e||void 0===e?void 0:e.amount)+parseFloat(null===e||void 0===e?void 0:e.amount)).toFixed(2);try{let t={customer_id:null===Je||void 0===Je?void 0:Je.customer_id,payment_date:it,payment_type:null===ct||void 0===ct?void 0:ct.name,visa_id:null===Je||void 0===Je?void 0:Je.id,amount:Ze,bank_id:null===gt||void 0===gt?void 0:gt.id,description:null===e||void 0===e?void 0:e.description};const o=I.A.updatePaymentStatus(t);console.log(o),(0,T.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const l=await o;200===(null===l||void 0===l?void 0:l.responseCode)&&(Le(!1),vo(),he(),Bt(!1))}catch(t){console.log(t)}})),children:(0,Q.jsxs)(d.Ay,{container:!0,children:[(0,Q.jsx)(d.Ay,{item:!0,xs:12,sm:12,children:(0,Q.jsx)(M.A,{label:"Payment Date :",value:it,size:"small",error:null===fe||void 0===fe||null===(h=fe.date)||void 0===h?void 0:h.message,register:me("date",{required:"Please enter  date."}),onChange:e=>{xo(e),xe("date",e)}})}),(0,Q.jsx)(d.Ay,{item:!0,xs:12,sm:12,children:(0,Q.jsx)(P.A,{size:"small",label:"Payment Type :",options:[{id:"cash",name:"Cash"},{id:"bank",name:"Bank"}],selected:ct,onSelect:e=>{ut(e)},error:null===fe||void 0===fe||null===(S=fe.status)||void 0===S?void 0:S.message,register:me("status",{required:"Please select status."})})}),(0,Q.jsx)(d.Ay,{item:!0,xs:12,sm:12,children:(0,Q.jsx)(R.A,{label:"Amount : ",StartLabel:"AED",value:Ze,disabled:!0,register:me("amount",{required:"Enter year inside rate"})})}),(0,Q.jsx)(d.Ay,{item:!0,xs:12,sm:12,mt:2,children:(0,Q.jsx)(_.A,{label:"Description :",size:"small",rows:5,multiline:!0,placeholder:"Description",error:null===fe||void 0===fe||null===(E=fe.description)||void 0===E?void 0:E.message,register:me("description",{required:!1})})}),(0,Q.jsx)(d.Ay,{container:!0,sx:{justifyContent:"center"},children:(0,Q.jsxs)(d.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,Q.jsx)(z.jn,{disabled:$t,bgcolor:y.A.primary,title:"Yes,Confirm",type:"submit"}),(0,Q.jsx)(z.jn,{onClick:()=>Le(!1),bgcolor:"#FF1F25",title:"No,Cancel"})]})})]})})}),(0,Q.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,Q.jsx)(r.A,{sx:{fontSize:"24px",fontWeight:"bold"},children:"Visa Requests Management"}),(0,Q.jsxs)(a.A,{sx:{display:"flex",gap:"5px"},children:[(null===ro||void 0===ro?void 0:ro.create)&&(0,Q.jsx)(z.jn,{bgcolor:"#bd9b4a",title:"Create Request",onClick:()=>De("/create-request"),loading:uo}),(null===ro||void 0===ro?void 0:ro.excel)&&(0,Q.jsx)(z.jn,{bgcolor:"#0076bf",title:"Import Via Excel",onClick:()=>{if(xt(!0),qt(null),"C"==(null===ne||void 0===ne?void 0:ne.user_type)){console.log(ne,"user"),console.log(Ve,"customerQueue");let e=null===Ve||void 0===Ve?void 0:Ve.find((e=>(null===e||void 0===e?void 0:e.id)===(null===ne||void 0===ne?void 0:ne.customer_id)));Ae("customer",e),console.log(e,"customerQueue"),qt(e),ho(null===e||void 0===e?void 0:e.id)}},loading:uo})]})]}),(0,Q.jsxs)(a.A,{children:[(0,Q.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,Q.jsx)(d.Ay,{item:!0,xs:2,children:(0,Q.jsx)(_.A,{label:"Search :",size:"small",fullWidth:!0,placeholder:"Search",error:null===pe||void 0===pe||null===(G=pe.search)||void 0===G?void 0:G.message,register:de("search")})}),"C"!=(null===ne||void 0===ne?void 0:ne.user_type)&&(0,Q.jsx)(d.Ay,{item:!0,xs:2,children:(0,Q.jsx)(P.A,{size:"small",label:"Select Customer :",options:Ve,selected:Vt,onSelect:e=>{Yt(e)},error:null===pe||void 0===pe||null===(ee=pe.customer)||void 0===ee?void 0:ee.message,register:de("customer")})}),(0,Q.jsx)(d.Ay,{item:!0,xs:2,children:(0,Q.jsx)(P.A,{size:"small",label:"Select Status :",options:[{id:"paid",name:"Paid"},{id:"unpaid",name:"Unpaid"}],selected:eo,onSelect:e=>{to(e)},error:null===pe||void 0===pe||null===(te=pe.status)||void 0===te?void 0:te.message,register:de("status")})}),(0,Q.jsx)(d.Ay,{item:!0,xs:3,children:(0,Q.jsx)(M.A,{label:" From Date  :",value:oo,size:"small",maxDate:new Date,error:null===pe||void 0===pe||null===(oe=pe.fromDate)||void 0===oe?void 0:oe.message,register:de("fromDate"),onChange:e=>{(e=>{try{if("Invalid Date"==e)return void lo("invalid");lo(new Date(e))}catch(t){(0,A.LY)(t)}})(e),ue("fromDate",e)}})}),(0,Q.jsx)(d.Ay,{item:!0,xs:3,children:(0,Q.jsx)(M.A,{label:" To Date  :",value:io,maxDate:new Date,size:"small",minDate:new Date(oo),error:null===pe||void 0===pe||null===(le=pe.toDate)||void 0===le?void 0:le.message,register:de("toDate"),onChange:e=>{(e=>{try{if("Invalid Date"==e)return void so("invalid");so(new Date(e))}catch(t){(0,A.LY)(t)}})(e),ue("toDate",e)}})})]}),(0,Q.jsx)(d.Ay,{container:!0,spacing:2,justifyContent:"flex-end",children:(0,Q.jsxs)(d.Ay,{item:!0,xs:2,display:"flex",justifyContent:"flex-end",gap:2,children:[(0,Q.jsx)(z.jn,{bgcolor:"#0076bf",textcolor:y.A.white,title:"Reset",onClick:()=>{Yt(null),so(null),lo(null),to(null),ue("status",""),ue("search",""),vo(1,"",null)},loading:uo}),(0,Q.jsx)(z.jn,{bgcolor:"#bd9b4a",title:"Search",onClick:()=>(()=>{let e={search:ce("search"),payment_status:null===eo||void 0===eo?void 0:eo.id,customer_id:null===Vt||void 0===Vt?void 0:Vt.id,from_date:oo,to_date:io};(0,w.S$)((()=>vo(1,"",e)))})(),loading:uo})]})}),(0,Q.jsx)(d.Ay,{item:!0,md:11,children:Re&&(0,Q.jsxs)(a.A,{children:[(0,Q.jsx)(d.Ay,{container:!0,mb:2}),Re&&(0,Q.jsxs)(l.Fragment,{children:[(0,Q.jsx)(U.X,{ref:ze,landscape:!0,paperSize:"A4",margin:5,fileName:"Import Customers",children:(0,Q.jsx)(c.A,{component:u.A,sx:{maxHeight:"calc(100vh - 200px)",mt:5,backgroundColor:"transparent",boxShadow:"none !important",borderRadius:"0px !important"},children:(0,Q.jsxs)(p.A,{stickyHeader:!0,sx:{minWidth:500},children:[(0,Q.jsx)(m.A,{children:(0,Q.jsx)(J,{children:[{name:"VR ID.",key:""},{name:"Date",key:"created_at"},{name:"Customer",key:"created_at"},{name:"Visa Quantity",key:"commission_visa"},{name:"Total Amount",key:"commission_monthly"},{name:"VAT",key:""},{name:"Deposit Consumed",key:"customerCount"},{name:"Payment",key:""},{name:"Actions",key:""}].map(((e,t)=>(0,Q.jsx)(X,{style:{textAlign:"SR No."==(null===e||void 0===e?void 0:e.name)?"center":"left",paddingRight:"SR No."==(null===e||void 0===e?void 0:e.name)?"15px":"50px"},className:"pdf-table",children:(0,Q.jsxs)(a.A,{sx:{display:"flex",alignItems:"flex-end"},children:[null===e||void 0===e?void 0:e.name," ","Date"==(null===e||void 0===e?void 0:e.name)&&(0,Q.jsxs)(Q.Fragment,{children:["\xa0",(0,Q.jsx)("span",{style:{height:"20px",cursor:"pointer"},children:(0,Q.jsx)(a.A,{component:"img",onClick:()=>{qe("asc"==We?"desc":"asc"),(e=>{let t={sort_by:e,sort_order:We};(0,w.S$)((()=>vo(1,"",t)))})(null===e||void 0===e?void 0:e.key)},src:g.To.sortIcon,width:"18px"})})]})]})},t)))})}),(0,Q.jsx)(v.A,{children:null===Re||void 0===Re?void 0:Re.map(((e,t)=>{var o;return(0,Q.jsxs)(J,{sx:{border:"1px solid #EEEEEE !important"},children:[(0,Q.jsx)(X,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.id}),(0,Q.jsx)(X,{style:{textAlign:"left"},className:"pdf-table",children:L()(null===e||void 0===e?void 0:e.created_at).format("MM-DD-YYYY")}),(0,Q.jsx)(X,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e||null===(o=e.customer)||void 0===o?void 0:o.name}),(0,Q.jsx)(X,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.candidates_count}),(0,Q.jsx)(X,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.total_visa_charges}),(0,Q.jsx)(X,{style:{textAlign:"left"},className:"pdf-table",children:parseFloat(.05*parseFloat(null===e||void 0===e?void 0:e.total_visa_charges)).toFixed(2)}),(0,Q.jsx)(X,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.total_deposit_charges}),(0,Q.jsx)(X,{style:{textAlign:"left"},className:"pdf-table",children:(0,Q.jsxs)(a.A,{component:"div",sx:{cursor:"pointer"},onClick:()=>{"C"!=(null===ne||void 0===ne?void 0:ne.user_type)&&"paid"!=(null===e||void 0===e?void 0:e.payment_status)&&null!==ro&&void 0!==ro&&ro.payment_status_update&&(st(null),ut(null),Le(!0),Xe(e),xe("amount",parseFloat(.05*parseFloat(null===e||void 0===e?void 0:e.total_visa_charges)+parseFloat(null===e||void 0===e?void 0:e.total_visa_charges)).toFixed(2)),Ge(parseFloat(.05*parseFloat(null===e||void 0===e?void 0:e.total_visa_charges)+parseFloat(null===e||void 0===e?void 0:e.total_visa_charges)).toFixed(2)))},children:[(0,Q.jsx)(a.A,{component:"img",src:"paid"==(null===e||void 0===e?void 0:e.payment_status)?g.To.successIcon:g.To.errorIcon,width:"13px"}),"paid"==(null===e||void 0===e?void 0:e.payment_status)?"Paid":"Unpaid"]})}),(0,Q.jsx)(X,{style:{textAlign:"left"},className:"pdf-table",children:(0,Q.jsxs)(a.A,{children:[(null===ro||void 0===ro?void 0:ro.payment_proof)&&(0,Q.jsx)(x.A,{onClick:()=>{var t,o;(console.log(null===e||void 0===e?void 0:e.proof_document),null!==e&&void 0!==e&&e.proof_document)&&Lt((null===e||void 0===e||null===(t=e.proof_document)||void 0===t?void 0:t.split(","))||[]);"C"==(null===ne||void 0===ne?void 0:ne.user_type)?(st(null),ut(null),Tt(!0),console.log(null===Je||void 0===Je||null===(o=Je.proof_document)||void 0===o?void 0:o.split(","),"asdasdas"),_e("amount",parseFloat(.05*parseFloat(null===e||void 0===e?void 0:e.total_visa_charges)+parseFloat(null===e||void 0===e?void 0:e.total_visa_charges)).toFixed(2)),Xe(e),At(!1),null!==e&&void 0!==e&&e.proof_document&&At(!0)):null!==e&&void 0!==e&&e.proof_document&&(st(null),ut(null),Tt(!0),Xe(e),At(!0))},children:(0,Q.jsx)(O.A,{sx:{color:null!==e&&void 0!==e&&e.proof_document?"#56ba28":""},width:"35px"})}),(null===ro||void 0===ro?void 0:ro.details)&&(0,Q.jsx)(a.A,{component:"img",src:g.To.detailIcon,onClick:()=>De(`/visa-detail/${null===e||void 0===e?void 0:e.id}`),width:"35px"}),(0,Q.jsx)(a.A,{component:"img",sx:{cursor:"pointer"},onClick:()=>{De(`/update-request/${null===e||void 0===e?void 0:e.id}`),localStorage.setItem("currentUrl","/update-agent")},src:g.To.editIcon,width:"35px"}),(null===ro||void 0===ro?void 0:ro.invoice)&&(0,Q.jsx)(a.A,{component:"img",onClick:()=>De(`/view-invoice/${null===e||void 0===e?void 0:e.id}`),sx:{cursor:"pointer"},src:g.To.invoiceIcon,width:"35px"})]})})]},t)}))})]})})}),(0,Q.jsx)(C.A,{currentPage:Ke,pageSize:Oe,onPageSizeChange:e=>vo(1,e.target.value,no),tableCount:null===Ve||void 0===Ve?void 0:Ve.length,totalCount:$e,onPageChange:e=>vo(e,"",no)})]}),Ie&&(0,Q.jsx)(j.$,{})]})})]})]})}},58422:(e,t,o)=>{var l=o(24994);t.A=void 0;var i=l(o(40039)),s=o(70579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt")},91973:(e,t,o)=>{o.d(t,{A:()=>f});var l=o(65043),i=o(96446),s=o(85865),n=o(81637),a=o(17392),d=o(83992),r=o(77020),c=o(54620),u=o(45903),p=o(63471),m=o(58613),v=o.n(m),x=o(70579);const g=(0,d.A)({root:{borderRadius:2,textAlign:"center",px:2,width:"220px",height:"120px",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"}}),h=(0,u.A)("input")({position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"block",opacity:0,fontSize:0,cursor:"pointer"});const f=function(e){let{inputRef:t,error:o,accept:d,register:u,multiple:m,style:f,custom:y,Memo:j,file:A,fileId:b,updateResult:S,disabled:C,loader:w}=e;const[_,k]=(0,l.useState)([]),F=g();return(0,l.useEffect)((()=>{v()("input.custom-file").prop("disabled",C),v()(".custom-file input").prop("disabled",C),v()(".custom-file button").prop("disabled",C)}),[C]),(0,l.useEffect)((()=>{if(A&&A.length>0){const e=A;if(console.log(e,"currentFile"),e){const t=e.split(",").map((e=>({extension:e.split(".").pop(),name:e.split("/").pop(),path:e.trim()})));console.log(t,"result"),k(t)}}}),[A,b]),(0,x.jsxs)(l.Fragment,{children:[(0,x.jsxs)(i.A,{style:f,className:F.root,children:[(0,x.jsx)(h,{className:"custom-file",disabled:C,ref:t,type:"file",multiple:m,accept:d,onChange:e=>{const t=Array.from(e.target.files).map((e=>({extension:e.name.split(".").pop(),name:e.name,path:URL.createObjectURL(e)}))),o=[..._,...t];k(o);const l=o.map((e=>e.path)).join(",");S(b,l)},...u,style:{width:"250px"}}),j&&(0,x.jsxs)(i.A,{sx:{fontSize:"15px"},children:[(0,x.jsx)(i.A,{sx:{textAlign:"left"},children:(0,x.jsx)(i.A,{component:"img",src:null===c.To||void 0===c.To?void 0:c.To.uploadDoc,width:"50px"})}),(0,x.jsxs)(s.A,{component:"h5",variant:"caption",sx:{color:r.A.black,mt:.2,textAlign:"center",fontSize:"15px",width:"223px"},children:[(0,x.jsx)("span",{style:{color:r.A.blue},children:"Click to Upload"})," Or drag & drop"]}),(0,x.jsx)(s.A,{component:"h5",variant:"caption",sx:{color:r.A.black,mt:.2,textAlign:"left",fontSize:"15px"},children:"(Max. File size: 10 MB)"})]})]}),(0,x.jsx)(i.A,{sx:{display:"flex",justifyContent:"space-between",gap:"2px",flexWrap:"wrap"},children:w?(0,x.jsx)(n.A,{}):_.length>0&&_.map(((e,t)=>(0,x.jsx)(i.A,{sx:{display:"flex",alignItems:"center",width:"35%"},children:(null===e||void 0===e?void 0:e.extension)&&(0,x.jsxs)(i.A,{sx:{position:"relative"},children:[(0,x.jsx)(i.A,{component:"div",onClick:()=>(e=>{const t=_.filter((t=>t.path!==e)),o=t.map((e=>e.path)).join(",");k(t),S(b,o)})(null===e||void 0===e?void 0:e.path),sx:{position:"absolute",top:-10,right:-10,cursor:"pointer"},children:(0,x.jsx)(a.A,{children:(0,x.jsx)(p.A,{})})}),(0,x.jsx)(i.A,{component:"img",sx:{cursor:"pointer"},onClick:()=>window.open("https://pro.mangotech-api.com/"+e.path,"_blank"),src:"png"===(null===e||void 0===e?void 0:e.extension)||"jpg"===(null===e||void 0===e?void 0:e.extension)||"jpeg"===(null===e||void 0===e?void 0:e.extension)?c.To.uploadImage:"pdf"===(null===e||void 0===e?void 0:e.extension)?c.To.uploadPDF:"xls"===(null===e||void 0===e?void 0:e.extension)?c.To.uploadXls:c.To.docIcon,width:"50px"}),(0,x.jsx)("p",{onClick:()=>window.open("https://pro.mangotech-api.com/"+e.path,"_blank"),style:{color:"blue",width:"120px",cursor:"pointer"},children:null===e||void 0===e?void 0:e.name})]})},t)))}),o&&(0,x.jsx)(s.A,{color:"error",sx:{fontSize:12,textAlign:"left"},children:o||"Please upload at least one file."})]})}}}]);
//# sourceMappingURL=6111.9bdfea7f.chunk.js.map