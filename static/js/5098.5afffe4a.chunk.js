"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[5098],{55098:(e,s,r)=>{r.r(s),r.d(s,{default:()=>j});var o=r(65043),l=r(96446),a=r(85865),i=r(68903),t=r(51787),n=r(17392),d=r(24858),m=(r(54620),r(73216)),c=r(91284),u=(r(77020),r(44563),r(20566)),p=(r(77292),r(95692)),x=r(3632),g=r(43559),h=r(37230),v=r(61137),w=r(70255),y=r(14398),A=r(19668),b=r(70579);const j=function(){var e,s,r,j,P,R;const[S]=(0,y.Z)(!1),f=(0,m.Zp)(),{user:E,userLogout:C}=(0,A.A)(),{register:z,handleSubmit:_,formState:{errors:k},control:q,getValues:N,watch:U}=(0,d.mN)(),[Y,I]=(0,o.useState)(!1),[J,W]=(0,o.useState)(!1),[F,Z]=(0,o.useState)(!1),[$,K]=(0,o.useState)(!1),[L,T]=(0,o.useState)([]),[V,B]=(0,o.useState)(null),[D,G]=(0,o.useState)(!1),H=U("password","");return U("confirmpassword",""),(0,o.useEffect)((()=>{(async e=>{try{var s;let r={page:1,limit:1e3,search:e,customer_id:null===E||void 0===E?void 0:E.customer_id};const{data:o}=await w.A.getRoles(r);T(null===o||void 0===o||null===(s=o.roles)||void 0===s?void 0:s.rows)}catch(r){(0,p.Ni)(r)}})()}),[]),(0,b.jsx)(l.A,{sx:{p:3,borderRadius:3},children:(0,b.jsxs)(l.A,{component:"form",onSubmit:_((async e=>{I(!0),G(!0),console.log(e);try{let e={name:N("name"),customer_id:null===E||void 0===E?void 0:E.customer_id,email:N("email"),phone:N("phone"),password:N("password"),role_id:null===V||void 0===V?void 0:V.id};console.log(e);const s=v.A.CreateSubUser(e);(0,p.y8)(s,"Saving ...","Success","Something Went Wrong");const r=await s;200===(null===r||void 0===r?void 0:r.responseCode)&&f("/sub-user-list")}catch(s){G(!1)}finally{I(!1)}})),children:[(0,b.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"flex-end"},children:[(0,b.jsx)(a.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:"CREATE USER"}),(0,b.jsx)(l.A,{sx:{display:"flex",gap:"10px"},children:(0,b.jsx)(c.jn,{bgcolor:"#bd9b4a",title:"Save",type:"submit",disabled:D})})]}),(0,b.jsxs)(i.Ay,{container:!0,spacing:0,mt:5,p:1,gap:"0px 20px",children:[(0,b.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,b.jsx)(u.A,{label:" Name :*",size:"small",placeholder:" Name",error:null===k||void 0===k||null===(e=k.name)||void 0===e?void 0:e.message,register:z("name",{required:"Please enter name."})})}),(0,b.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,b.jsx)(u.A,{label:"Email :*",size:"small",placeholder:"Email",error:null===k||void 0===k||null===(s=k.email)||void 0===s?void 0:s.message,register:z("email",{required:"Please enter your email.",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})}),(0,b.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,b.jsx)(u.A,{label:"Phone :*",size:"small",placeholder:"Phone ",type:"number",error:null===k||void 0===k||null===(r=k.phone)||void 0===r?void 0:r.message,register:z("phone",{required:"Please enter phone.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."}})})}),(0,b.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,b.jsx)(h.A,{size:"small",label:"Select Role :*",options:L,selected:V,onSelect:e=>B(e),error:null===k||void 0===k||null===(j=k.role)||void 0===j?void 0:j.message,register:z("role",{required:"Please select role"})})}),(0,b.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,b.jsx)(u.A,{size:"small",label:"Password :*",type:J?"text":"password",placeholder:"Enter Your Password",InputProps:{endAdornment:(0,b.jsx)(t.A,{position:"end",children:(0,b.jsx)(n.A,{edge:"end",onClick:()=>W(!J),children:J?(0,b.jsx)(x.A,{color:"primary"}):(0,b.jsx)(g.A,{color:"primary"})})})},error:(null===(P=k.password)||void 0===P?void 0:P.message)||$&&"You have entered an invalid email or password.",register:z("password",{required:"Please enter the password."})})}),(0,b.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,b.jsx)(u.A,{size:"small",label:"Confirm Password :*",type:F?"text":"password",placeholder:"Enter Your Confirm Password",InputProps:{endAdornment:(0,b.jsx)(t.A,{position:"end",children:(0,b.jsx)(n.A,{edge:"end",onClick:()=>Z(!F),children:F?(0,b.jsx)(x.A,{color:"primary"}):(0,b.jsx)(g.A,{color:"primary"})})})},error:(null===(R=k.confirmpassword)||void 0===R?void 0:R.message)||$&&"You have entered an invalid email or password.",register:z("confirmpassword",{required:"Please enter the confirm password.",validate:e=>e===H||"Passwords do not match."})})})]})]})})}},77292:(e,s,r)=>{r.d(s,{A:()=>a});var o=r(82113);const l={createRole:"roles/add",getRoles:"roles",updateRole:"roles/update",deleteRole:"roles/delete",getRolesPermissions:"permissions",updateRolesPermissions:"permissions/update",getSubRolesPermissions:"permissions/subUser"},a={createRole:async e=>await(0,o.bE)(l.createRole,e),getRoles:async e=>await(0,o.Jt)(l.getRoles,e),updateRole:async e=>await(0,o.F6)(l.updateRole,e),deleteRole:async e=>await(0,o.KF)(l.deleteRole,e),getRolesPermissions:async e=>await(0,o.Jt)(l.getRolesPermissions,e),getSubRolesPermissions:async e=>await(0,o.Jt)(l.getSubRolesPermissions,e),updateRolesPermissions:async e=>await(0,o.bE)(l.updateRolesPermissions,e)}}}]);
//# sourceMappingURL=5098.5afffe4a.chunk.js.map