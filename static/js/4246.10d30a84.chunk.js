"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[4246],{74246:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J});var n=a(65043),o=a(28076),i=a(39652),s=a(77502),l=a(96446),c=a(85865),r=a(68903),d=a(51787),u=a(79650),p=a(63336),x=a(71806),h=a(84882),m=a(73460),g=a(17392),v=a(81637),A=a(45903),j=a(54620),f=a(77020),y=a(23602),b=a(44563),C=a(66734),S=a(70579);const N=(0,C.A)((0,S.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var w=a(83992),_=a(91395),z=a(73216),E=a(20566),W=a(24858),M=a(22030),k=a(37230),F=a(2010),B=a(91284),I=a(4841),O=a(79456),P=a(43608),L=a(10977),Y=(a(11238),a(72450),a(86005)),D=a(86178),R=a.n(D),$=(a(23768),a(95692));const T=(0,A.A)(o.A)((e=>{let{theme:t}=e;return{border:0}})),G=(0,A.A)(i.A)((e=>{let{theme:t}=e;return{[`&.${s.A.head}`]:{fontSize:14,fontFamily:"Public Sans",border:"1px solid #EEEEEE",padding:"15px",textAlign:"left",whiteSpace:"nowrap",color:"#434343",paddingRight:"50px",background:"transparent",fontWeight:"bold"},[`&.${s.A.body}`]:{fontSize:14,fontFamily:"Public Sans",textWrap:"nowrap",padding:"5px !important",paddingLeft:"15px !important",".MuiBox-root":{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",".MuiBox-root":{cursor:"pointer"}},svg:{width:"auto",height:"24px"},".MuiTypography-root":{textTransform:"capitalize",fontFamily:j.ay.NunitoRegular,textWrap:"nowrap"},".MuiButtonBase-root":{padding:"8px",width:"28px",height:"28px"}}}})),H=(0,w.A)({loaderWrap:{display:"flex",height:100,"& svg":{width:"40px !important",height:"40px !important"}}});const J=function(){const e=H(),t=(0,z.Zp)(),a=(0,O.wA)(),i=(0,n.useRef)(),{register:s}=(0,W.mN)(),A=["COA Code","COA Name","Nature","Major Category","Sub Category","Status","Actions"],[C,w]=(0,n.useState)(!1),[D,J]=(0,n.useState)(),[U,V]=(0,n.useState)(0),[X,Z]=(0,n.useState)(50),[q,K]=(0,n.useState)(1),[Q,ee]=(0,n.useState)(),[te,ae]=(0,n.useState)({}),[ne,oe]=(0,n.useState)([]),[ie,se]=(0,n.useState)(null),[le,ce]=(0,n.useState)([]),[re,de]=(0,n.useState)(null),ue=async e=>{try{let t={category_id:null!==e&&void 0!==e?e:""};const{data:a}=await F.A.getSubCategories(t);ce(null===a||void 0===a?void 0:a.categories)}catch(t){(0,b.LY)(t)}},pe=async(e,t,n)=>{try{var o,i;const s=e||q,l=t||X,c={...te,...n};K(s),Z(l),ae(c);let r={page:s,limit:l};r={...r,...c};const{data:d}=await F.A.getAccounts(r);J(null===d||void 0===d||null===(o=d.accounts)||void 0===o?void 0:o.rows),V(null===d||void 0===d||null===(i=d.accounts)||void 0===i?void 0:i.count),console.log((0,M.TJ)(null===d||void 0===d?void 0:d.permissions)),ee((0,M.TJ)(null===d||void 0===d?void 0:d.permissions)),null===d||void 0===d||d.permissions.forEach((e=>{null!==e&&void 0!==e&&e.route&&null!==e&&void 0!==e&&e.identifier&&null!==e&&void 0!==e&&e.permitted&&a((0,I.Ft)(null===e||void 0===e?void 0:e.route))}))}catch(s){(0,b.LY)(s)}},xe=e=>{(0,M.S$)((()=>pe(1,"",e)))},he=(e,t,a)=>{if(e.preventDefault(),"ascending"===t&&"COA Code"==a){const e=[...D].sort(((e,t)=>e.account_code.localeCompare(t.account_code)));J(e)}if("descending"===t&&"COA Code"==a){const e=[...D].sort(((e,t)=>t.account_code.localeCompare(e.account_code)));J(e)}if("ascending"===t&&"COA Name"==a){const e=[...D].sort(((e,t)=>e.name.localeCompare(t.name)));J(e)}if("descending"===t&&"COA Name"==a){const e=[...D].sort(((e,t)=>t.name.localeCompare(e.name)));J(e)}if("ascending"===t&&"Unit"==a){const e=[...D].sort(((e,t)=>e.unit.localeCompare(t.unit)));J(e)}if("descending"===t&&"Unit"==a){const e=[...D].sort(((e,t)=>t.unit.localeCompare(e.unit)));J(e)}if("ascending"===t&&"Major Category"==a){const e=[...D].sort(((e,t)=>{var a,n;return null===(a=e.cat)||void 0===a?void 0:a.name.localeCompare(null===(n=t.cat)||void 0===n?void 0:n.name)}));J(e)}if("descending"===t&&"Major Category"==a){const e=[...D].sort(((e,t)=>{var a,n;return null===(a=t.cat)||void 0===a?void 0:a.name.localeCompare(null===(n=e.cat)||void 0===n?void 0:n.name)}));J(e)}if("ascending"===t&&"Sub Category"==a){const e=[...D].sort(((e,t)=>{var a,n;return null===(a=e.sub_cat)||void 0===a?void 0:a.name.localeCompare(null===(n=t.sub_cat)||void 0===n?void 0:n.name)}));J(e)}if("descending"===t&&"Sub Category"==a){const e=[...D].sort(((e,t)=>{var a,n;return null===(a=t.sub_cat)||void 0===a?void 0:a.name.localeCompare(null===(n=e.sub_cat)||void 0===n?void 0:n.name)}));J(e)}};return(0,n.useEffect)((()=>{pe(),(async()=>{try{const{data:e}=await F.A.getMajorCategories();oe(null===e||void 0===e?void 0:e.categories)}catch(e){(0,b.LY)(e)}})(),ue()}),[]),(0,S.jsxs)(l.A,{sx:{m:4,mb:2},children:[(0,S.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,S.jsx)(c.A,{sx:{fontSize:"24px",fontWeight:"bold"},children:"Account List"}),(0,S.jsx)(l.A,{sx:{display:"flex",gap:"5px"},children:(null===Q||void 0===Q?void 0:Q.create)&&(0,S.jsx)(B.jn,{bgcolor:"#bd9b4a",title:"Create Account",onClick:()=>t("/create-account")})})]}),(0,S.jsx)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mr:4,my:4}}),(0,S.jsxs)(r.Ay,{container:!0,spacing:1,children:[(0,S.jsx)(r.Ay,{item:!0,xs:12,sm:3,children:(0,S.jsx)(E.A,{size:"small",label:"Code",InputProps:{startAdornment:(0,S.jsx)(d.A,{position:"start",children:(0,S.jsx)(j.WI,{})})},placeholder:"Search Code",register:s("code",{onChange:e=>xe({code:e.target.value})})})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,sm:3,children:(0,S.jsx)(E.A,{size:"small",label:"Name",InputProps:{startAdornment:(0,S.jsx)(d.A,{position:"start",children:(0,S.jsx)(j.WI,{})})},placeholder:"Search Name",register:s("name",{onChange:e=>xe({name:e.target.value})})})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,sm:3,children:(0,S.jsx)(k.A,{size:"small",label:"Major Category",options:ne,selected:ie,onSelect:e=>{se(e),xe({category:null===e||void 0===e?void 0:e.id,sub_category:""}),ue(null===e||void 0===e?void 0:e.id),de(null)},register:s("majorCategory")})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,sm:3,children:(0,S.jsx)(k.A,{size:"small",label:"Sub Category",options:le,selected:re,onSelect:e=>{de(e),xe({sub_category:null===e||void 0===e?void 0:e.id})},register:s("subCategory")})})]}),D?(0,S.jsxs)(n.Fragment,{children:[(0,S.jsxs)(Y.X,{ref:i,landscape:!0,paperSize:"A4",margin:5,fileName:"Chart Of Accounts Status",children:[(0,S.jsx)(l.A,{className:"pdf-show",sx:{display:"none"},children:(0,S.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,S.jsx)(c.A,{variant:"h5",sx:{color:f.A.charcoalGrey,fontFamily:j.ay.NunitoRegular,mb:2},children:"Chart Of Accounts Status"}),(0,S.jsxs)(l.A,{sx:{fontWeight:400,fontSize:"12px",mt:1.5,color:f.A.charcoalGrey},children:[(0,S.jsx)("span",{children:"Date: \xa0\xa0"}),R()().format("MM-DD-YYYY")]})]})}),(0,S.jsx)(u.A,{component:p.A,sx:{boxShadow:"0px 8px 18px 0px #9B9B9B1A",borderRadius:2,maxHeight:"calc(100vh - 330px)"},className:"table-box",children:(0,S.jsxs)(x.A,{stickyHeader:!0,sx:{minWidth:500},children:[(0,S.jsx)(h.A,{children:(0,S.jsx)(o.A,{children:A.map(((e,t)=>(0,S.jsxs)(G,{className:"pdf-table",children:[e," ","Status"==A[t]||"Actions"==A[t]||"Nature"==A[t]?"":(0,S.jsxs)(S.Fragment,{children:[" ",(0,S.jsxs)("span",{className:"pdf-hide",children:[(0,S.jsx)(P.A,{sx:{color:"white",fontSize:"15px",cursor:"pointer"},onClick:e=>he(e,"ascending",A[t])})," "]}),"  ",(0,S.jsxs)("span",{className:"pdf-hide",children:[(0,S.jsx)(L.A,{sx:{color:"white",fontSize:"15px",cursor:"pointer"},onClick:e=>he(e,"descending",A[t])})," "]})," "]})]},t)))})}),(0,S.jsx)(m.A,{children:C?(0,S.jsx)(T,{children:(0,S.jsx)(G,{colSpan:A.length+2,align:"center",sx:{fontWeight:600},children:(0,S.jsx)(l.A,{className:e.loaderWrap,children:(0,S.jsx)(v.A,{})})})}):(null===D||void 0===D?void 0:D.length)>0?(0,S.jsx)(n.Fragment,{children:D.map(((e,a)=>{var n,o,i,s,r,d;return(0,S.jsxs)(T,{sx:{bgcolor:a%2!==0&&"#EEFBEE"},children:[(0,S.jsx)(G,{className:"pdf-table",children:null!==(n=null===e||void 0===e?void 0:e.account_code)&&void 0!==n?n:"-"}),(0,S.jsx)(G,{className:"pdf-table",children:null!==(o=null===e||void 0===e?void 0:e.name)&&void 0!==o?o:"-"}),(0,S.jsx)(G,{className:"pdf-table",children:null!==e&&void 0!==e&&e.primary_account_id?"Sub Account":"Primary"}),(0,S.jsx)(G,{className:"pdf-table",children:null!==(i=null===e||void 0===e||null===(s=e.cat)||void 0===s?void 0:s.name)&&void 0!==i?i:"-"}),(0,S.jsx)(G,{className:"pdf-table",children:null!==(r=null===e||void 0===e||null===(d=e.sub_cat)||void 0===d?void 0:d.name)&&void 0!==r?r:"-"}),(0,S.jsxs)(G,{className:"pdf-table",children:[(0,S.jsx)(l.A,{component:"div",className:"pdf-hide",children:(0,S.jsx)(B.L$,{isChecked:null===e||void 0===e?void 0:e.is_active,setIsChecked:()=>(async(e,t)=>{const a=[...D];let n=a.findIndex((t=>t.id==e));-1!=n&&(a[n].is_active=t),J(a);try{let a={id:e,is_active:t};const{message:n}=await F.A.updateAccount(a),o=F.A.updateAccount(a);(0,$.y8)(o,"Saving...","Added Successfully","Something Went Wrong")}catch(o){(0,$.Ni)(o)}})(e.id,!(null!==e&&void 0!==e&&e.is_active))})}),(0,S.jsx)(l.A,{component:"div",className:"pdf-show",sx:{display:"none !important"},children:null!==e&&void 0!==e&&e.is_active?"Enable":"Disabled"})]}),(0,S.jsx)(G,{children:(0,S.jsx)(l.A,{component:"div",className:"pdf-hide",sx:{gap:"16px !important"},children:(null===Q||void 0===Q?void 0:Q.update)&&(0,S.jsxs)(l.A,{onClick:()=>t("/update-account",{state:e}),children:[(0,S.jsx)(g.A,{sx:{bgcolor:f.A.bluishCyan,"&:hover":{bgcolor:f.A.bluishCyan}},children:(0,S.jsx)(N,{sx:{color:f.A.white,height:"16px !important"}})}),(0,S.jsx)(c.A,{variant:"body2",children:"Edit"})]})})})]},a)}))}):(0,S.jsx)(T,{children:(0,S.jsx)(G,{colSpan:A.length+1,align:"center",sx:{fontWeight:600},children:"No Data Found"})})})]})})]}),(0,S.jsx)(_.A,{currentPage:q,pageSize:X,onPageSizeChange:e=>pe(1,e.target.value),tableCount:null===D||void 0===D?void 0:D.length,totalCount:U,onPageChange:e=>pe(e,"")})]}):(0,S.jsx)(y.$,{})]})}}}]);
//# sourceMappingURL=4246.10d30a84.chunk.js.map