"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[9348],{63475:(e,o,t)=>{t.d(o,{A:()=>p});var s=t(28924),a=t(90035),i=t(17392),n=t(96446),l=t(85865),r=t(54620),d=t(77020),c=t(70579);const p=function(e){let{open:o,onClose:t,message1:p,message2:m}=e;return(0,c.jsxs)(a.A,{open:o,sx:{"& .MuiDialog-paper":{width:"25%",height:"auto",borderRadius:2,py:{xs:2,md:4},px:{xs:3,md:6}}},children:[(0,c.jsx)(i.A,{onClick:()=>t(),sx:{position:"absolute",right:13,top:13},children:(0,c.jsx)(s.A,{})}),(0,c.jsxs)(n.A,{sx:{textAlign:"center"},children:[(0,c.jsx)(r.M4,{}),(0,c.jsx)(l.A,{variant:"h3",sx:{color:d.A.charcoalGrey,fontFamily:r.ay.NunitoRegular,mt:1,mb:1.5},children:p}),(0,c.jsx)(l.A,{variant:"h6",sx:{color:d.A.smokeyGrey,fontFamily:r.ay.NunitoRegular},children:m})]})]})}},99348:(e,o,t)=>{t.r(o),t.d(o,{default:()=>L});var s=t(65043),a=t(96446),i=t(85865),n=t(68903),l=t(51787),r=t(17392),d=t(51962),c=t(83992),p=t(24858),m=t(3632),x=t(43559),u=t(73216),g=t(35475),h=t(77020),v=t(54620),y=t(19668),A=t(91284),b=t(20566),f=t(22030),j=t(69654),w=t(83835),k=t(79456),S=t(4841),I=t(57374),P=t(44563),T=t(70255),C=t(63475),_=t(1880),N=t(70579);const R=(0,c.A)({wrapper:{borderRadius:"16px",boxShadow:" 0px 8px 32px 0px #00000040",display:"flex",alignItems:"center",width:"900px",margin:"60px auto"},box:{background:"linear-gradient(to bottom, #0c6135, #147836, #268e32, #3fa528, #5bbc0f)",borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px"},otpBox:{paddingLeft:30,paddingRight:30,borderTopRightRadius:"16px",borderBottomRightRadius:"16px"}});const L=function(){var e,o,t;const c=R(),{userLogin:L}=(0,y.A)(),{setStorageItem:E}=(0,w.A)(),D=(0,k.wA)(),{executeRecaptcha:F}=(0,I._Y)(),[Y,z]=(0,s.useState)(!1),B=(0,u.Zp)(),{register:q,handleSubmit:G,formState:{errors:M}}=(0,p.mN)(),[W,Z]=(0,s.useState)(!1),[H,Q]=(0,s.useState)(!1),[U,V]=(0,s.useState)(!1),[J,K]=(0,s.useState)(!1),O=(0,s.useCallback)((async()=>{if(!F)return console.log("Execute reCaptcha not yet available"),!1;let e={token:await F("login")};const{data:o}=await T.A.reCaptchaVerify(e);if(null!==o&&void 0!==o&&o.success)return null===o||void 0===o?void 0:o.success;(0,P.LY)("Captcha verification failed!")}),[F]);return(0,s.useEffect)((()=>{Notification.requestPermission().then((e=>{"granted"===e?(console.log("Notification permission granted."),localStorage.setItem("Permission",!0),z(!0)):(localStorage.setItem("Permission",!1),z(!1))})),(async()=>{try{const{data:e}=await T.A.generateSessionID();E("sessionId",e.sessionid);const o=_.A.get("secsession");_.A.set("testCookie",o)}catch(e){(0,P.LY)(e)}})()}),[]),(0,N.jsx)(s.Fragment,{children:(0,N.jsxs)(a.A,{children:[(0,N.jsx)(C.A,{open:J,onClose:()=>{K(!1),B("/")},message1:"Thank you",message2:"Please proceed with Galaxy Customer Service to start the export procedure."}),(0,N.jsxs)(a.A,{className:c.wrapper,children:[(0,N.jsxs)(a.A,{className:c.box,sx:{py:7,px:5},children:[(0,N.jsx)(a.A,{component:"img",src:v.To.loginBanner,sx:{height:"280px"}}),(0,N.jsxs)(a.A,{sx:{textAlign:"center",mt:3,mb:2},children:[(0,N.jsx)(i.A,{variant:"body2",sx:{mb:2},children:"If you\u2019re a Galaxy Customer, Download App from"}),(0,N.jsx)(g.N_,{to:"https://play.google.com/store/apps/details?id=com.galaxyworldwideshipping&pcampaignid=web_share","aria-label":"play store",target:"_blank",rel:"noopener noreferrer",children:(0,N.jsx)(a.A,{component:"img",loading:"lazy",src:v.To.googlePlay,alt:"play store",sx:{width:"130px",mr:1}})}),(0,N.jsx)(g.N_,{to:"https://apps.apple.com/gb/app/gww-shipping/id1592809842","aria-label":"app store",target:"_blank",rel:"noopener noreferrer",children:(0,N.jsx)(a.A,{component:"img",loading:"lazy",src:v.To.appStore,alt:"app store",sx:{width:"130px"}})})]})]}),(0,N.jsxs)(a.A,{className:c.otpBox,children:[(0,N.jsx)(i.A,{variant:"h4",sx:{color:h.A.primary,textAlign:"center"},children:"Employee Login Portal"}),(0,N.jsx)(a.A,{component:"form",onSubmit:G((async e=>{Z(!0);try{let r={email:e.email,password:(0,f.yv)(e.password),fcm_token:localStorage.getItem("fcmToken")};if("true"==localStorage.getItem("Permission")){if(await O()){const e=await j.A.login(r);if(200===(null===e||void 0===e?void 0:e.responseCode)&&(async()=>{try{const{data:e}=await T.A.getWebTokens();localStorage.setItem("financeToken",null===e||void 0===e?void 0:e.financeToken),localStorage.setItem("vccToken",null===e||void 0===e?void 0:e.vccToken),localStorage.setItem("operationsToken",null===e||void 0===e?void 0:e.operationsToken),localStorage.setItem("searchToken",null===e||void 0===e?void 0:e.searchToken)}catch(e){(0,P.LY)(e)}})(),206===(null===e||void 0===e?void 0:e.responseCode)){var o,t;(0,P.ee)(null===e||void 0===e?void 0:e.message);const s={emailField:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.email,phoneField:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.phone};B("/verify-otp",{state:{...r,screen:"login",...s}})}else{var s,a;if(null!==e&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.password_change)return void B("/new-password",{state:{token:"abcd"}});if("export"===(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.customer_type))K(!0);else{var i,n,l;let o=null===e||void 0===e?void 0:e.data;o.token=(0,f.yv)("noToken"),o.fcm_token=localStorage.getItem("fcmToken"),L(o),E("journey",null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.journey),D((0,S._1)((0,f.QH)(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.modules))),D(z((0,f.Zz)(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.modules)))}}}}else Notification.requestPermission().then((e=>{"granted"===e?localStorage.setItem("Permission",!0):localStorage.setItem("Permission",!1)})),(0,P.LY)("Please Enable Notifications Permission")}catch(r){V(!0)}finally{Z(!1)}})),sx:{mt:2},children:(0,N.jsxs)(n.Ay,{container:!0,spacing:1,alignItems:"center",children:[(0,N.jsx)(n.Ay,{item:!0,xs:12,sm:12,children:(0,N.jsx)(b.A,{size:"small",label:"Email/Employee ID",type:"text",placeholder:"Email/Employee ID",error:(null===M||void 0===M||null===(e=M.email)||void 0===e?void 0:e.message)||U,register:q("email",{required:"Please enter your email/employee id."})})}),(0,N.jsx)(n.Ay,{item:!0,xs:12,sm:12,children:(0,N.jsx)(b.A,{size:"small",label:"Password",type:H?"text":"password",placeholder:"Password",InputProps:{endAdornment:(0,N.jsx)(l.A,{position:"end",children:(0,N.jsx)(r.A,{edge:"end",onClick:()=>Q(!H),children:H?(0,N.jsx)(m.A,{color:"primary"}):(0,N.jsx)(x.A,{color:"primary"})})})},error:null!==M&&void 0!==M&&null!==(o=M.password)&&void 0!==o&&o.message?null===M||void 0===M||null===(t=M.password)||void 0===t?void 0:t.message:U&&"You have entered an invalid email or password.",register:q("password",{required:"Please enter the password."})})}),(0,N.jsxs)(n.Ay,{item:!0,xs:6,sm:6,sx:{textAlign:"left"},children:[(0,N.jsx)(d.A,{}),(0,N.jsx)(i.A,{component:"span",variant:"body2",sx:{color:h.A.black},children:"Remember me"})]}),(0,N.jsx)(n.Ay,{item:!0,xs:6,sm:6,sx:{textAlign:"right"},children:(0,N.jsx)(i.A,{component:g.N_,to:"/forget-password",variant:"body2",sx:{color:h.A.black},children:"Forget Password?"})}),(0,N.jsxs)(n.Ay,{item:!0,xs:12,sm:12,sx:{mt:2,textAlign:"center"},children:[(0,N.jsx)(A.jn,{fullWidth:!0,title:"Sign In",type:"submit",loading:W}),(0,N.jsxs)(i.A,{variant:"body2",sx:{mt:2,color:h.A.black+"99"},children:["Don't have an account?\xa0",(0,N.jsx)(i.A,{component:"span",variant:"body2",onClick:()=>B("/register"),sx:{color:h.A.black,textDecoration:"underline",cursor:"pointer"},children:"Sign Up"})]})]})]})})]})]})]})})}}}]);
//# sourceMappingURL=9348.cf45df48.chunk.js.map