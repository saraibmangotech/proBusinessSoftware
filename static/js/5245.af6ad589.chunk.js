"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[5245],{55245:(e,l,o)=>{o.r(l),o.d(l,{default:()=>L});var i=o(65043),n=o(28076),t=o(39652),d=o(77502),r=o(96446),s=o(85865),a=o(68903),u=o(51787),c=o(79650),v=o(63336),p=o(71806),m=o(84882),x=o(73460),h=o(77739),f=o(17392),A=o(81637),g=o(54620),y=o(20566),j=o(45903),b=o(73216),_=o(77020),w=o(23602),k=o(44563),S=o(83992),N=o(91395),C=o(22030),P=o(37230),E=o(31558),B=o(24858),F=o(79456),W=o(4841),$=o(91284),z=o(11238),R=o(72450),D=o(86178),I=o.n(D),M=o(86005),T=o(70579);const Y=(0,j.A)(n.A)((e=>{let{theme:l}=e;return{border:0}})),G=(0,j.A)(t.A)((e=>{let{theme:l}=e;return{[`&.${d.A.head}`]:{fontSize:14,fontFamily:g.ay.NunitoRegular,border:0,padding:"15px",textAlign:"center",whiteSpace:"nowrap",background:_.A.primary,color:_.A.white},[`&.${d.A.body}`]:{fontSize:14,fontFamily:g.ay.NunitoRegular,textAlign:"center",textWrap:"nowrap",padding:"5px !important",".MuiBox-root":{display:"flex",gap:"6px",alignItems:"center",justifyContent:"flex-start",".MuiBox-root":{cursor:"pointer"}},svg:{width:"auto",height:"24px"},".MuiTypography-root":{textTransform:"capitalize",fontFamily:g.ay.NunitoRegular,textWrap:"nowrap"},".MuiButtonBase-root":{padding:"8px",width:"28px",height:"28px"}}}})),H=(0,S.A)({loaderWrap:{display:"flex",height:100,"& svg":{width:"40px !important",height:"40px !important"}}});const L=function(){const e=(0,b.Zp)(),l=H(),o=(0,F.wA)(),t=(0,i.useRef)(null),{register:d}=(0,B.mN)(),j=["Customer ID","Name","Email","Phone Number","Creator","Customer Type","Status","Actions"],[S,D]=(0,i.useState)(!1),[L,J]=(0,i.useState)(null),[K,V]=(0,i.useState)(),[X,Z]=(0,i.useState)(0),[q,O]=(0,i.useState)(50),[Q,U]=(0,i.useState)(1),[ee,le]=(0,i.useState)({}),[oe,ie]=(0,i.useState)(),ne=async(e,l,i)=>{try{var n,t;const d=e||Q,r=l||q,s={...ee,...i};U(d),O(r),le(s);let a={page:d,limit:r};a={...a,...s};const{data:u}=await E.A.getExportCustomersList(a);V(null===u||void 0===u||null===(n=u.customers)||void 0===n?void 0:n.rows),Z(null===u||void 0===u||null===(t=u.customers)||void 0===t?void 0:t.count),ie((0,C.TJ)(null===u||void 0===u?void 0:u.permissions)),null===u||void 0===u||u.permissions.forEach((e=>{null!==e&&void 0!==e&&e.route&&null!==e&&void 0!==e&&e.identifier&&null!==e&&void 0!==e&&e.permitted&&o((0,W.Ft)(null===e||void 0===e?void 0:e.route))}))}catch(d){(0,k.LY)(d)}};return(0,i.useEffect)((()=>{ne()}),[]),(0,T.jsxs)(r.A,{sx:{m:4,mb:2},component:"form",children:[(0,T.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mr:4,my:4},children:[(0,T.jsx)(s.A,{variant:"h5",sx:{color:_.A.charcoalGrey,fontFamily:g.ay.NunitoRegular},children:"Export Customers"}),(null===K||void 0===K?void 0:K.length)>0&&(0,T.jsxs)(r.A,{sx:{textAlign:"right",p:4,display:"flex",gap:2},children:[(0,T.jsx)($.jn,{title:"Download PDF",type:"button",style:{backgroundColor:_.A.bluishCyan},onClick:()=>(0,C.GK)(t)}),(0,T.jsx)($.jn,{title:"Download Excel",onClick:()=>(()=>{const e=j.filter((e=>"Actions"!==e)),l=null===K||void 0===K?void 0:K.map((e=>{var l,o,i,n,t,d,r,s,a,u,c,v,p,m,x,h;return[null===(null===e||void 0===e||null===(l=e.customerProfile)||void 0===l?void 0:l.broker_type_id)?`CE-${null!==(o=null===e||void 0===e?void 0:e.id)&&void 0!==o?o:"-"}`:1===(null===e||void 0===e||null===(i=e.customerProfile)||void 0===i?void 0:i.broker_type_id)?`AE-${null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:"-"}`:2===(null===e||void 0===e||null===(t=e.customerProfile)||void 0===t?void 0:t.broker_type_id)?`BE-${null!==(d=null===e||void 0===e?void 0:e.id)&&void 0!==d?d:"-"}`:"-",null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:"-",null!==(s=null===e||void 0===e?void 0:e.email)&&void 0!==s?s:"-",null!==(a=null===e||void 0===e?void 0:e.uae_phone)&&void 0!==a?a:"-",null!==e&&void 0!==e&&e.creator?null===e||void 0===e||null===(u=e.creator)||void 0===u?void 0:u.name:"Self",null===(null===e||void 0===e||null===(c=e.customerProfile)||void 0===c?void 0:c.broker_type_id)&&null!==e&&void 0!==e&&null!==(v=e.customerProfile)&&void 0!==v&&v.trade_license?"Company":null===(null===e||void 0===e||null===(p=e.customerProfile)||void 0===p?void 0:p.broker_type_id)&&null===(null===e||void 0===e||null===(m=e.customerProfile)||void 0===m?void 0:m.trade_license)?"Individual":1===(null===e||void 0===e||null===(x=e.customerProfile)||void 0===x?void 0:x.broker_type_id)?"Agent":2===(null===e||void 0===e||null===(h=e.customerProfile)||void 0===h?void 0:h.broker_type_id)?"Broker":"-",null!==e&&void 0!==e&&e.is_active?"Active":"In Active"]})),o=z.Wp.aoa_to_sheet([e,...l]),i=z.Wp.book_new();z.Wp.book_append_sheet(i,o,"Sheet1");const n=z.M9(i,{bookType:"xlsx",type:"array",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,R.saveAs)(new Blob([n]),"data.xlsx")})()})]})]}),(0,T.jsxs)(r.A,{sx:{boxShadow:" 0px 3px 10px 0px #00000040",p:3,borderRadius:"15px"},children:[(0,T.jsxs)(a.Ay,{container:!0,spacing:1,children:[(0,T.jsx)(a.Ay,{item:!0,xs:12,sm:3,children:(0,T.jsx)(y.A,{size:"small",inputStyle:{backgroundColor:"#f5f5f5"},label:"Search",InputProps:{startAdornment:(0,T.jsx)(u.A,{position:"start",children:(0,T.jsx)(g.WI,{})})},placeholder:"Search",register:d("search",{onChange:e=>{return l={search:e.target.value},void(0,C.S$)((()=>ne(1,"",l)));var l}})})}),(0,T.jsx)(a.Ay,{item:!0,xs:12,sm:3,children:(0,T.jsx)(P.A,{size:"small",label:"Select Type",options:[{id:0,name:"Customer"},{id:1,name:"Agent"},{id:2,name:"Broker"}],selected:L,onSelect:e=>{J(e),ne(1,"",{customer_type:null===e||void 0===e?void 0:e.id})}})})]}),K?(0,T.jsxs)(i.Fragment,{children:[(0,T.jsxs)(M.X,{ref:t,landscape:!0,paperSize:"A4",margin:5,fileName:"Export Customers",children:[(0,T.jsx)(r.A,{className:"pdf-show",sx:{display:"none"},children:(0,T.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,T.jsx)(s.A,{variant:"h5",sx:{color:_.A.charcoalGrey,fontFamily:g.ay.NunitoRegular,mb:2},children:"Export Customers"}),(0,T.jsxs)(r.A,{sx:{fontWeight:400,fontSize:"12px",mt:1.5,color:_.A.charcoalGrey},children:[(0,T.jsx)("span",{children:"Date: \xa0\xa0"}),I()().format("MM-DD-YYYY")]})]})}),(0,T.jsx)(c.A,{component:v.A,sx:{boxShadow:"0px 8px 18px 0px #9B9B9B1A",borderRadius:2,maxHeight:"calc(100vh - 330px)"},className:"table-box",children:(0,T.jsxs)(p.A,{stickyHeader:!0,sx:{minWidth:500},children:[(0,T.jsx)(m.A,{children:(0,T.jsx)(n.A,{children:j.map(((e,l)=>(0,T.jsx)(G,{className:"pdf-table",children:e},l)))})}),(0,T.jsx)(x.A,{children:S?(0,T.jsx)(Y,{children:(0,T.jsx)(G,{colSpan:j.length+2,align:"center",sx:{fontWeight:600},children:(0,T.jsx)(r.A,{className:l.loaderWrap,children:(0,T.jsx)(A.A,{})})})}):(null===K||void 0===K?void 0:K.length)>0?(0,T.jsx)(i.Fragment,{children:K.map(((l,o)=>{var i,n,t,d,a,u,c,v,p,m,x,A,y,j,b,w,k,S,N,C,P,E,B,F,W,$;return(0,T.jsxs)(Y,{sx:{bgcolor:o%2!==0&&"#EFF8E7"},children:[(0,T.jsx)(G,{className:"pdf-table",children:null===(null===l||void 0===l||null===(i=l.customerProfile)||void 0===i?void 0:i.broker_type_id)?`CE-${null!==(n=null===l||void 0===l?void 0:l.id)&&void 0!==n?n:"-"}`:1===(null===l||void 0===l||null===(t=l.customerProfile)||void 0===t?void 0:t.broker_type_id)?`AE-${null!==(d=null===l||void 0===l?void 0:l.id)&&void 0!==d?d:"-"}`:2===(null===l||void 0===l||null===(a=l.customerProfile)||void 0===a?void 0:a.broker_type_id)?`BE-${null!==(u=null===l||void 0===l?void 0:l.id)&&void 0!==u?u:"-"}`:"-"}),(0,T.jsxs)(G,{className:"pdf-table",children:[(0,T.jsx)(h.A,{className:"pdf-hide",title:null!==(c=null===l||void 0===l?void 0:l.name)&&void 0!==c?c:"-",arrow:!0,placement:"top",slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[10,-2]}}]}},children:(null===l||void 0===l?void 0:l.name.length)>15?(null===l||void 0===l||null===(v=l.name)||void 0===v?void 0:v.slice(0,10))+"...":null===l||void 0===l?void 0:l.name}),(0,T.jsx)(r.A,{component:"div",sx:{display:"none !important"},className:"pdf-show",children:null!==(p=null===l||void 0===l?void 0:l.name)&&void 0!==p?p:"-"})]}),(0,T.jsxs)(G,{className:"pdf-table",children:[(0,T.jsx)(h.A,{className:"pdf-hide",title:null!==(m=null===l||void 0===l?void 0:l.email)&&void 0!==m?m:"-",arrow:!0,placement:"top",slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[10,-2]}}]}},children:(null===l||void 0===l||null===(x=l.email)||void 0===x?void 0:x.length)>40?(null===l||void 0===l||null===(A=l.email)||void 0===A?void 0:A.slice(0,20))+"...":null===l||void 0===l?void 0:l.email}),(0,T.jsx)(r.A,{component:"div",sx:{display:"none !important"},className:"pdf-show",children:null!==(y=null===l||void 0===l?void 0:l.email)&&void 0!==y?y:"-"})]}),(0,T.jsx)(G,{className:"pdf-table",children:null!==(j=null===l||void 0===l?void 0:l.uae_phone)&&void 0!==j?j:"-"}),(0,T.jsxs)(G,{className:"pdf-table",children:[(0,T.jsx)(h.A,{className:"pdf-hide",title:null!==l&&void 0!==l&&l.creator?null===l||void 0===l||null===(b=l.creator)||void 0===b?void 0:b.name:"Self",arrow:!0,placement:"top",slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[10,-2]}}]}},children:null!==l&&void 0!==l&&l.creator?(null===l||void 0===l||null===(w=l.creator)||void 0===w?void 0:w.name.length)>15?(null===l||void 0===l||null===(k=l.creator)||void 0===k||null===(S=k.name)||void 0===S?void 0:S.slice(0,10))+"...":null===l||void 0===l||null===(N=l.creator)||void 0===N?void 0:N.name:"Self"}),(0,T.jsx)(r.A,{component:"div",sx:{display:"none !important"},className:"pdf-show",children:null!==l&&void 0!==l&&l.creator?null===l||void 0===l||null===(C=l.creator)||void 0===C?void 0:C.name:"Self"})]}),(0,T.jsx)(G,{className:"pdf-table",children:null===(null===l||void 0===l||null===(P=l.customerProfile)||void 0===P?void 0:P.broker_type_id)&&null!==l&&void 0!==l&&null!==(E=l.customerProfile)&&void 0!==E&&E.trade_license?"Company":null===(null===l||void 0===l||null===(B=l.customerProfile)||void 0===B?void 0:B.broker_type_id)&&null===(null===l||void 0===l||null===(F=l.customerProfile)||void 0===F?void 0:F.trade_license)?"Individual":1===(null===l||void 0===l||null===(W=l.customerProfile)||void 0===W?void 0:W.broker_type_id)?"Agent":2===(null===l||void 0===l||null===($=l.customerProfile)||void 0===$?void 0:$.broker_type_id)?"Broker":"-"}),(0,T.jsx)(G,{className:"pdf-table",children:(0,T.jsx)(r.A,{sx:{bgcolor:null!==l&&void 0!==l&&l.is_active?_.A.success+26:_.A.danger+26,color:null!==l&&void 0!==l&&l.is_active?_.A.success:_.A.danger,height:"30px",width:"70px",borderRadius:"20px",justifyContent:"center !important",textTransform:"capitalize",fontFamily:g.ay.NunitoRegular},children:null!==l&&void 0!==l&&l.is_active?"Active":"In Active"})}),(0,T.jsx)(G,{className:"pdf-table",children:(0,T.jsx)(r.A,{component:"div",className:"pdf-hide",sx:{gap:"16px !important"},children:(null===oe||void 0===oe?void 0:oe.detail_view)&&(0,T.jsxs)(r.A,{onClick:()=>e(`/customer-detail/${l.id}`),children:[(0,T.jsx)(f.A,{sx:{bgcolor:_.A.primary,"&:hover":{bgcolor:_.A.primary}},children:(0,T.jsx)(g.bM,{})}),(0,T.jsx)(s.A,{variant:"body2",children:"Detail View"})]})})})]},o)}))}):(0,T.jsx)(Y,{children:(0,T.jsx)(G,{colSpan:j.length+1,align:"center",sx:{fontWeight:600},children:"No Data Found"})})})]})})]}),(0,T.jsx)(N.A,{currentPage:Q,pageSize:q,onPageSizeChange:e=>ne(1,e.target.value),tableCount:null===K||void 0===K?void 0:K.length,totalCount:X,onPageChange:e=>ne(e,"")})]}):(0,T.jsx)(w.$,{})]})]})}}}]);
//# sourceMappingURL=5245.af6ad589.chunk.js.map