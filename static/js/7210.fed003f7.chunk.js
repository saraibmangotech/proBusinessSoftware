"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[7210],{57210:(e,t,i)=>{i.r(t),i.d(t,{default:()=>P});var n=i(65043),s=i(28076),l=i(39652),a=i(77502),o=i(96446),r=i(68903),d=i(85865),c=i(79650),u=i(63336),x=i(71806),p=i(84882),m=i(73460),h=i(54620),g=i(45903),A=i(73216),v=i(77020),f=i(23602),j=(i(44563),i(36838),i(42165),i(66535),i(85900),i(83992)),y=i(91395),b=i(22030),S=(i(20566),i(24858)),C=i(79456),w=i(4841),k=i(29542),E=i(91284),F=(i(37230),i(72450),i(86005)),N=i(86178),_=i.n(N),W=(i(54667),i(99543)),z=i(95692),M=(i(70255),i(61137)),T=i(19668),R=i(70579);const U=(0,g.A)(s.A)((e=>{let{theme:t}=e;return{border:0}})),D=(0,g.A)(l.A)((e=>{let{theme:t}=e;return{[`&.${a.A.head}`]:{fontSize:14,fontFamily:"Public Sans",border:"1px solid #EEEEEE",padding:"15px",textAlign:"left",whiteSpace:"nowrap",color:"#434343",paddingRight:"50px",background:"transparent",fontWeight:"bold"},[`&.${a.A.body}`]:{fontSize:14,fontFamily:"Public Sans",textWrap:"nowrap",padding:"5px !important",paddingLeft:"15px !important",".MuiBox-root":{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",".MuiBox-root":{cursor:"pointer"}},svg:{width:"auto",height:"24px"},".MuiTypography-root":{textTransform:"capitalize",fontFamily:h.ay.NunitoRegular,textWrap:"nowrap"},".MuiButtonBase-root":{padding:"8px",width:"28px",height:"28px"}}}})),I=(0,j.A)({loaderWrap:{display:"flex",height:100,"& svg":{width:"40px !important",height:"40px !important"}}});const P=function(){const{register:e,handleSubmit:t,getValues:i,setValue:s,formState:{errors:l}}=(0,S.mN)(),a=(0,A.Zp)(),g=(I(),(0,C.wA)()),j=(0,n.useRef)(null),[N,P]=(0,n.useState)(!1),[Y,B]=(0,n.useState)("asc"),[$,L]=(0,n.useState)([{id:1,name:"asdasd"},{id:1,name:"asdasd"}]),[H,J]=(0,n.useState)(0),[V,X]=(0,n.useState)(50),[Z,q]=(0,n.useState)(1),[G,K]=(0,n.useState)(!1),{user:O,userLogout:Q}=(0,T.A)(),[ee,te]=(0,n.useState)(),[ie,ne]=(0,n.useState)({}),[se,le]=(0,n.useState)(),[ae,oe]=(0,n.useState)(!1),[re,de]=(0,n.useState)(),ce=async(e,t,i)=>{try{var n,s;const l=e||Z,a=t||V,o=i?{...ie,...i}:null;q(l),X(a),ne(o);let r={page:l,limit:a,customer_id:null===O||void 0===O?void 0:O.customer_id};r={...r,...o};const{data:d}=await M.A.getSubUsers(r);L(null===d||void 0===d||null===(n=d.users)||void 0===n?void 0:n.rows),J(null===d||void 0===d||null===(s=d.users)||void 0===s?void 0:s.count),console.log((0,b.TJ)(null===d||void 0===d?void 0:d.permissions)),le((0,b.TJ)(null===d||void 0===d?void 0:d.permissions)),null===d||void 0===d||d.permissions.forEach((e=>{null!==e&&void 0!==e&&e.route&&null!==e&&void 0!==e&&e.identifier&&null!==e&&void 0!==e&&e.permitted&&g((0,w.Ft)(null===e||void 0===e?void 0:e.route))}))}catch(l){(0,z.Ni)(l)}},ue=async e=>{oe(!0);try{let t={id:re,is_active:e};console.log(t);const i=M.A.updateUser(t);(0,z.y8)(i,"Saving ...","Success","Something Went Wrong");const n=await i;200===(null===n||void 0===n?void 0:n.responseCode)&&(ce(),K(!1))}catch(t){(0,z.Ni)(t)}finally{oe(!1)}};return(0,n.useEffect)((()=>{ce()}),[]),(0,R.jsxs)(o.A,{sx:{p:3},children:[(0,R.jsx)(k.A,{open:G,onClose:()=>K(!1),title:"Are You Sure?",children:(0,R.jsx)(r.Ay,{container:!0,spacing:2,children:(0,R.jsx)(r.Ay,{container:!0,sx:{justifyContent:"center"},children:(0,R.jsxs)(r.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,R.jsx)(E.jn,{bgcolor:v.A.primary,title:"Activate",onClick:()=>ue(!0)}),(0,R.jsx)(E.jn,{onClick:()=>ue(!1),bgcolor:"#FF1F25",title:"Deactivate"})]})})})}),(0,R.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,R.jsx)(d.A,{sx:{fontSize:"24px",fontWeight:"bold"},children:"User Management"}),(null===se||void 0===se?void 0:se.create)&&(0,R.jsx)(E.jn,{bgcolor:"#bd9b4a",title:"Create User",onClick:()=>a("/create-sub-user"),loading:ae})]}),(0,R.jsxs)(o.A,{children:[(0,R.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,R.jsx)(r.Ay,{item:!0,xs:6,children:(0,R.jsx)(W.A,{type:"text",bgcolor:"#FAFAFA",color:v.A.primary,border:"3px solid #FAFAFA",StartLabel:"Search",placeholder:"Search",register:e("search")})}),(0,R.jsxs)(r.Ay,{item:!0,xs:6,display:"flex",justifyContent:"flex-end",gap:2,children:[(0,R.jsx)(E.jn,{bgcolor:"#0076bf",textcolor:v.A.white,title:"Reset",onClick:()=>{s("search",""),ce(1,"",null)},loading:ae}),(0,R.jsx)(E.jn,{bgcolor:"#bd9b4a",title:"Search",onClick:()=>(()=>{let e={search:i("search")};(0,b.S$)((()=>ce(1,"",e)))})(),loading:ae})]})]}),(0,R.jsx)(r.Ay,{item:!0,md:11,children:$&&(0,R.jsxs)(o.A,{children:[(0,R.jsx)(r.Ay,{container:!0,mb:2}),$&&(0,R.jsxs)(n.Fragment,{children:[(0,R.jsx)(F.X,{ref:j,landscape:!0,paperSize:"A4",margin:5,fileName:"Import Customers",children:(0,R.jsx)(c.A,{component:u.A,sx:{maxHeight:"calc(100vh - 200px)",mt:5,backgroundColor:"transparent",boxShadow:"none !important",borderRadius:"0px !important"},children:(0,R.jsxs)(x.A,{stickyHeader:!0,sx:{minWidth:500},children:[(0,R.jsx)(p.A,{children:(0,R.jsx)(U,{children:[{name:"Create Date",key:""},{name:"User Name ",key:"name"},{name:"User Role",key:""},{name:"Status",key:""},{name:"Actions",key:""}].map(((e,t)=>(0,R.jsx)(D,{style:{textAlign:"left !important"},className:"pdf-table",children:(0,R.jsx)(o.A,{children:null===e||void 0===e?void 0:e.name})},t)))})}),(0,R.jsx)(m.A,{children:$.map(((e,t)=>{var i;return(0,R.jsxs)(U,{sx:{border:"1px solid #EEEEEE !important"},children:[(0,R.jsx)(D,{style:{textAlign:"left"},className:"pdf-table",children:_()(null===e||void 0===e?void 0:e.created_at).format("MM-DD-YYYY")}),(0,R.jsx)(D,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.name}),(0,R.jsx)(D,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e||null===(i=e.role)||void 0===i?void 0:i.name}),(0,R.jsx)(D,{style:{textAlign:"left"},className:"pdf-table",children:(0,R.jsxs)(o.A,{component:"div",onClick:()=>{null!==se&&void 0!==se&&se.status_update&&(K(!0),de(null===e||void 0===e?void 0:e.id))},sx:{cursor:"pointer",display:"flex !important",justifyContent:"flex-start !important"},children:[(0,R.jsx)(o.A,{component:"img",src:null!==e&&void 0!==e&&e.is_active?h.To.successIcon:h.To.errorIcon,width:"13px"}),null!==e&&void 0!==e&&e.is_active?"Activated":"Deactivated"]})}),(0,R.jsx)(D,{style:{textAlign:"left"},className:"pdf-table",children:(0,R.jsx)(o.A,{sx:{display:"flex !important",justifyContent:"flex-start !important"},children:(null===se||void 0===se?void 0:se.edit)&&(0,R.jsx)(o.A,{component:"img",src:h.To.editIcon,onClick:()=>a("/update-sub-user",{state:e}),width:"35px"})})})]},t)}))})]})})}),(0,R.jsx)(y.A,{currentPage:Z,pageSize:V,onPageSizeChange:e=>ce(1,e.target.value),tableCount:null===$||void 0===$?void 0:$.length,totalCount:H,onPageChange:e=>ce(e,"")})]}),N&&(0,R.jsx)(f.$,{})]})})]})]})}}}]);
//# sourceMappingURL=7210.fed003f7.chunk.js.map