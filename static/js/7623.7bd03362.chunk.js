"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[7623],{38968:(e,i,t)=>{t.d(i,{A:()=>A});var s=t(98587),o=t(58168),a=t(65043),r=t(58387),l=t(98610),n=t(67266),d=t(34535),c=t(61475),p=t(98206),u=t(75429),m=t(55013),x=t(95849),h=t(51347),v=t(95434),g=t(70579);const y=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],b=(0,d.Ay)(u.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,i)=>{const{ownerState:t}=e;return[i.root,t.dense&&i.dense,"flex-start"===t.alignItems&&i.alignItemsFlexStart,t.divider&&i.divider,!t.disableGutters&&i.gutters]}})((e=>{let{theme:i,ownerState:t}=e;return(0,o.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:i.transitions.create("background-color",{duration:i.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(i.vars||i).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${v.A.selected}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / ${i.vars.palette.action.selectedOpacity})`:(0,n.X4)(i.palette.primary.main,i.palette.action.selectedOpacity),[`&.${v.A.focusVisible}`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.focusOpacity}))`:(0,n.X4)(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.focusOpacity)}},[`&.${v.A.selected}:hover`]:{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / calc(${i.vars.palette.action.selectedOpacity} + ${i.vars.palette.action.hoverOpacity}))`:(0,n.X4)(i.palette.primary.main,i.palette.action.selectedOpacity+i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:i.vars?`rgba(${i.vars.palette.primary.mainChannel} / ${i.vars.palette.action.selectedOpacity})`:(0,n.X4)(i.palette.primary.main,i.palette.action.selectedOpacity)}},[`&.${v.A.focusVisible}`]:{backgroundColor:(i.vars||i).palette.action.focus},[`&.${v.A.disabled}`]:{opacity:(i.vars||i).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(i.vars||i).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===t.alignItems&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4})})),A=a.forwardRef((function(e,i){const t=(0,p.b)({props:e,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:d=!1,component:c="div",children:u,dense:A=!1,disableGutters:f=!1,divider:C=!1,focusVisibleClassName:R,selected:j=!1,className:k}=t,w=(0,s.A)(t,y),O=a.useContext(h.A),S=a.useMemo((()=>({dense:A||O.dense||!1,alignItems:n,disableGutters:f})),[n,O.dense,A,f]),I=a.useRef(null);(0,m.A)((()=>{d&&I.current&&I.current.focus()}),[d]);const P=(0,o.A)({},t,{alignItems:n,dense:S.dense,disableGutters:f,divider:C,selected:j}),$=(e=>{const{alignItems:i,classes:t,dense:s,disabled:a,disableGutters:r,divider:n,selected:d}=e,c={root:["root",s&&"dense",!r&&"gutters",n&&"divider",a&&"disabled","flex-start"===i&&"alignItemsFlexStart",d&&"selected"]},p=(0,l.A)(c,v.Y,t);return(0,o.A)({},t,p)})(P),G=(0,x.A)(I,i);return(0,g.jsx)(h.A.Provider,{value:S,children:(0,g.jsx)(b,(0,o.A)({ref:G,href:w.href||w.to,component:(w.href||w.to)&&"div"===c?"button":c,focusVisibleClassName:(0,r.A)($.focusVisible,R),ownerState:P,className:(0,r.A)($.root,k)},w,{classes:$,children:u}))})}))},47623:(e,i,t)=>{t.r(i),t.d(i,{default:()=>I});var s=t(52101),o=t(58293),a=t(87332),r=t(35721),l=t(38968),n=t(96446),d=t(51962),c=t(48734),p=t(30279),u=t(17392),m=t(85865),x=t(68903),h=t(54620),v=t(77020),g=t(91284),y=t(23602),b=t(44563),A=t(65043),f=t(79456),C=t(73216),R=t(4841),j=t(69654),k=t(77292),w=t(22030),O=t(70579);function S(e){var i,t;let{permission:a,selectedPermissions:u,updateSelected:m,parentId:x,parentChild:g,expand:y,handleCollapse:b}=e;const A=(a.children||[]).map((e=>(0,O.jsx)(S,{parentId:a.id,parentChild:a.children,permission:e,selectedPermissions:u,updateSelected:m,expand:y,handleCollapse:e=>b(e)},e.id)));return(0,O.jsxs)(r.A,{component:"div",disablePadding:!0,sx:{pl:"13px",ml:"11px",borderLeft:"1px dashed rgba(0,0,0,0.1)"},children:[(0,O.jsxs)(l.A,{disableGutters:!0,disableRipple:!0,disableTouchRipple:!0,sx:{p:0,".MuiCheckbox-root":{p:.8},".MuiTypography-root":{fontSize:14,fontFamily:null===h.ay||void 0===h.ay?void 0:h.ay.NunitoRegular},"&:hover":{bgcolor:"transparent",cursor:"inherit"}},children:[-1!==y.indexOf(a.id)?(0,O.jsx)(s.A,{sx:{cursor:"pointer",transform:"rotate(90deg)",opacity:(null===a||void 0===a||null===(i=a.children)||void 0===i?void 0:i.length)>0?1:0},onClick:()=>b(a.id)}):(0,O.jsx)(o.A,{sx:{cursor:"pointer",opacity:(null===a||void 0===a||null===(t=a.children)||void 0===t?void 0:t.length)>0?1:0},onClick:()=>b(a.id)}),(0,O.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",borderRadius:"8px",px:.8,cursor:"pointer","&:hover":{bgcolor:v.A.primary+"4D"}},children:[(0,O.jsx)(d.A,{size:"small",defaultValue:!0,checked:-1!==u.indexOf(a.id),onClick:e=>m(x,g,a.id,a.children),sx:{color:v.A.primary+"b3",p:"0px !important",mr:.5}}),(0,O.jsx)(c.A,{primary:a.name,onClick:e=>m(x,g,a.id,a.children),sx:{color:v.A.gunMetal}})]})]}),(0,O.jsx)(p.A,{in:-1===y.indexOf(a.id),unmountOnExit:!0,children:A})]})}const I=function(){const{id:e}=(0,C.g)(),{state:i}=(0,C.zy)(),t=(0,C.Zp)(),I=(0,f.wA)(),[P,$]=(0,A.useState)(!1),[G,F]=(0,A.useState)(!1),[L,M]=(0,A.useState)([]),[N,z]=(0,A.useState)([]),[T,B]=(0,A.useState)([]),[E,V]=(0,A.useState)([]),[Y,_]=(0,A.useState)([]),J=(e,i,t,s)=>{try{let i=[...T];const o=T.indexOf(t);if(null!==e){-1===i.indexOf(e)&&i.push(e)}if(-1===o){i.push(t);const e=t=>{t&&t.map((t=>{-1===i.indexOf(t.id)&&i.push(t.id),e(t.children)}))};e(s)}else{i.splice(o,1);const e=t=>{t&&t.map((t=>{const s=i.indexOf(t.id);-1!==s&&i.splice(s,1),e(t.children)}))};e(s)}B(i)}catch(o){(0,b.LY)(o)}},D=e=>{try{let i=[];const t=e=>{e&&e.forEach((e=>{!0===e.permitted&&i.push(e.id),t(e.children)}))};t(e),B(i)}catch(i){(0,b.LY)(i)}},X=e=>{const i=Y.indexOf(e),t=[...Y];-1===i?t.push(e):t.splice(i,1),_(t)},H=async()=>{try{const{data:e}=await j.A.getSideNavigation();console.log(e),I((0,R._1)((0,w.QH)(null===e||void 0===e?void 0:e.permissions))),I((0,R.K0)((0,w.Zz)(null===e||void 0===e?void 0:e.permissions)))}catch(e){(0,b.LY)(e)}};return(0,A.useEffect)((()=>{e&&(async()=>{F(!0);try{var i;let t={role_id:e};const{data:s}=await k.A.getSubRolesPermissions(t);M(null===s||void 0===s?void 0:s.permissions),D(null===s||void 0===s?void 0:s.permissions),console.log((0,w.TJ)(null===s||void 0===s?void 0:s.permissions)),V((0,w.TJ)(null===s||void 0===s?void 0:s.permissions)),null===s||void 0===s||null===(i=s.permissions)||void 0===i||i.forEach((e=>{null!==e&&void 0!==e&&e.route&&null!==e&&void 0!==e&&e.identifier&&null!==e&&void 0!==e&&e.permitted&&I((0,R.Ft)(null===e||void 0===e?void 0:e.route))}))}catch(t){(0,b.LY)(t)}finally{F(!1)}})()}),[e]),(0,O.jsxs)(n.A,{sx:{m:4,mb:2},children:[(0,O.jsxs)(n.A,{onClick:()=>t("/sub-role-list"),sx:{width:"100px",mb:2,cursor:"pointer",display:"flex",alignItems:"center"},children:[(0,O.jsx)(u.A,{size:"small",sx:{bgcolor:v.A.primary,color:v.A.white,"&:hover":{bgcolor:v.A.primary,color:v.A.white}},children:(0,O.jsx)(a.A,{})}),(0,O.jsx)(m.A,{variant:"h5",sx:{color:v.A.charcoalGrey,fontFamily:h.ay.NunitoRegular,ml:1},children:"Back"})]}),(0,O.jsxs)(n.A,{sx:{my:1,p:5,bgcolor:v.A.white,borderRadius:2},children:[(0,O.jsxs)(m.A,{variant:"h5",sx:{color:v.A.charcoalGrey,fontFamily:h.ay.NunitoRegular,mb:3},children:["Set Permissions for ",null===i||void 0===i?void 0:i.name," role"]}),G?(0,O.jsx)(y.$,{}):(0,O.jsx)(x.Ay,{container:!0,spacing:1,sx:{mt:1},children:null===L||void 0===L?void 0:L.map(((e,i)=>{var t,a,u;return(0,O.jsx)(x.Ay,{item:!0,md:4,children:(0,O.jsxs)(r.A,{component:"nav",sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:[(0,O.jsxs)(l.A,{disableGutters:!0,disableRipple:!0,disableTouchRipple:!0,sx:{p:0,".MuiCheckbox-root":{p:.8},".MuiTypography-root":{fontSize:14},"&:hover":{bgcolor:"transparent",cursor:"inherit"}},children:[-1!==Y.indexOf(e.id)?(0,O.jsx)(s.A,{sx:{cursor:"pointer",transform:"rotate(90deg)",opacity:(null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length)>0?1:0},onClick:()=>X(e.id)}):(0,O.jsx)(o.A,{sx:{cursor:"pointer",opacity:(null===e||void 0===e||null===(a=e.children)||void 0===a?void 0:a.length)>0?1:0},onClick:()=>X(e.id)}),(0,O.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",borderRadius:"8px",px:.8,cursor:"pointer","&:hover":{bgcolor:v.A.primary+"4D"}},children:[(0,O.jsx)(d.A,{size:"small",checked:-1!==T.indexOf(e.id),onClick:i=>J(null,0,e.id,e.children),sx:{color:v.A.primary+"b3",p:"0px !important",mr:.5}}),(0,O.jsx)(c.A,{primary:e.name,onClick:i=>J(null,0,e.id,e.children),sx:{color:v.A.gunMetal}})]})]}),(0,O.jsx)(p.A,{in:-1===Y.indexOf(e.id),unmountOnExit:!0,children:null===e||void 0===e||null===(u=e.children)||void 0===u?void 0:u.map(((i,t)=>(0,O.jsx)(S,{parentId:e.id,parentChild:e.children,permission:i,selectedPermissions:T,updateSelected:J,expand:Y,handleCollapse:e=>X(e)},t)))})]})},i)}))})]}),(0,O.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:2},children:[(0,O.jsx)(n.A,{sx:{flexGrow:1}}),(0,O.jsx)(g.jn,{title:"Save",loading:P,onClick:()=>(async()=>{$(!0);try{let i={role_id:e,module_ids:T};const{message:s}=await k.A.updateRolesPermissions(i);(0,b.ee)(s),H(),t("/sub-role-list")}catch(i){(0,b.LY)(i)}finally{$(!1)}})()})]})]})}},77292:(e,i,t)=>{t.d(i,{A:()=>a});var s=t(82113);const o={createRole:"roles/add",getRoles:"roles",updateRole:"roles/update",deleteRole:"roles/delete",getRolesPermissions:"permissions",updateRolesPermissions:"permissions/update",getSubRolesPermissions:"permissions/subUser"},a={createRole:async e=>await(0,s.bE)(o.createRole,e),getRoles:async e=>await(0,s.Jt)(o.getRoles,e),updateRole:async e=>await(0,s.F6)(o.updateRole,e),deleteRole:async e=>await(0,s.KF)(o.deleteRole,e),getRolesPermissions:async e=>await(0,s.Jt)(o.getRolesPermissions,e),getSubRolesPermissions:async e=>await(0,s.Jt)(o.getSubRolesPermissions,e),updateRolesPermissions:async e=>await(0,s.bE)(o.updateRolesPermissions,e)}},87332:(e,i,t)=>{t.d(i,{A:()=>a});var s=t(66734),o=t(70579);const a=(0,s.A)((0,o.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")}}]);
//# sourceMappingURL=7623.7bd03362.chunk.js.map