"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[2200],{92200:(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var n=o(65043),i=o(28076),l=o(39652),s=o(77502),a=o(96446),r=o(68903),d=o(85865),c=o(79650),u=o(63336),x=o(71806),p=o(84882),m=o(73460),h=o(54620),g=o(45903),v=o(73216),A=o(77020),f=o(23602),j=(o(44563),o(36838),o(42165),o(66535),o(85900),o(83992)),y=o(91395),b=o(22030),S=(o(20566),o(24858)),C=o(79456),w=o(4841),k=o(29542),E=o(91284),F=(o(37230),o(72450),o(86005)),N=(o(86178),o(54667),o(99543)),R=o(95692),W=o(70255),z=o(17555),B=o(19668),T=o(70579);const $=(0,g.A)(i.A)((e=>{let{theme:t}=e;return{border:0}})),_=(0,g.A)(l.A)((e=>{let{theme:t}=e;return{[`&.${s.A.head}`]:{fontSize:14,fontFamily:"Public Sans",border:"1px solid #EEEEEE",padding:"15px",textAlign:"left",whiteSpace:"nowrap",color:"#434343",paddingRight:"50px",background:"transparent",fontWeight:"bold"},[`&.${s.A.body}`]:{fontSize:14,fontFamily:"Public Sans",textWrap:"nowrap",padding:"5px !important",paddingLeft:"15px !important",".MuiBox-root":{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",".MuiBox-root":{cursor:"pointer"}},svg:{width:"auto",height:"24px"},".MuiTypography-root":{textTransform:"capitalize",fontFamily:h.ay.NunitoRegular,textWrap:"nowrap"},".MuiButtonBase-root":{padding:"8px",width:"28px",height:"28px"}}}})),M=(0,j.A)({loaderWrap:{display:"flex",height:100,"& svg":{width:"40px !important",height:"40px !important"}}});const P=function(){const{register:e,handleSubmit:t,getValues:o,setValue:i,formState:{errors:l}}=(0,S.mN)(),s=(0,v.Zp)(),{user:g,userLogout:j}=(0,B.A)(),P=(M(),(0,C.wA)()),I=(0,n.useRef)(null);console.log(g,"ssssss");const[L,H]=(0,n.useState)(!1),[J,V]=(0,n.useState)("asc"),[Y,X]=(0,n.useState)([]),[Z,q]=(0,n.useState)(0),[D,G]=(0,n.useState)(50),[K,O]=(0,n.useState)(1),[Q,U]=(0,n.useState)(!1),[ee,te]=(0,n.useState)(),[oe,ne]=(0,n.useState)({}),[ie,le]=(0,n.useState)(),[se,ae]=(0,n.useState)(!1),[re,de]=(0,n.useState)(),ce=async(e,t,o)=>{try{var n,i;console.log(o);const l=e||K,s=t||D,a=o?{...oe,...o}:null;O(l),G(s),ne(a);let r={page:l,limit:s,customer_id:null===g||void 0===g?void 0:g.customer_id};r={...r,...a},console.log(r);const{data:d}=await W.A.getRoles(r);X(null===d||void 0===d||null===(n=d.roles)||void 0===n?void 0:n.rows),q(null===d||void 0===d||null===(i=d.roles)||void 0===i?void 0:i.count),console.log((0,b.TJ)(null===d||void 0===d?void 0:d.permissions)),le((0,b.TJ)(null===d||void 0===d?void 0:d.permissions)),null===d||void 0===d||d.permissions.forEach((e=>{null!==e&&void 0!==e&&e.route&&null!==e&&void 0!==e&&e.identifier&&null!==e&&void 0!==e&&e.permitted&&P((0,w.Ft)(null===e||void 0===e?void 0:e.route))}))}catch(l){(0,R.Ni)(l)}};return(0,n.useEffect)((()=>{ce()}),[]),(0,T.jsxs)(a.A,{sx:{p:3},children:[(0,T.jsx)(k.A,{open:Q,onClose:()=>U(!1),title:"Are You Sure?",children:(0,T.jsx)(r.Ay,{container:!0,spacing:2,children:(0,T.jsx)(r.Ay,{container:!0,sx:{justifyContent:"center"},children:(0,T.jsxs)(r.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,T.jsx)(E.jn,{bgcolor:A.A.primary,title:"Yes,Confirm",onClick:()=>(async e=>{ae(!0),U(!1),console.log(e);try{let e={role_id:re,force:!0};console.log(e);const t=W.A.deleteRole(e);(0,R.y8)(t,"Saving ...","Success","Something Went Wrong");const o=await t;200===(null===o||void 0===o?void 0:o.responseCode)&&ce()}catch(t){(0,R.Ni)(t)}finally{ae(!1)}})()}),(0,T.jsx)(E.jn,{onClick:()=>U(!1),bgcolor:"#FF1F25",title:"No,Cancel"})]})})})}),(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,T.jsx)(d.A,{sx:{fontSize:"24px",fontWeight:"bold"},children:"Role Management"}),(null===ie||void 0===ie?void 0:ie.create)&&(0,T.jsx)(E.jn,{bgcolor:A.A.buttonBg,title:"Create Role",onClick:()=>s("/create-sub-role"),loading:se})]}),(0,T.jsxs)(a.A,{children:[(0,T.jsxs)(r.Ay,{container:!0,spacing:2,children:[(0,T.jsx)(r.Ay,{item:!0,xs:6,children:(0,T.jsx)(N.A,{type:"text",bgcolor:"#FAFAFA",color:A.A.primary,border:"3px solid #FAFAFA",StartLabel:"Search",placeholder:"Search",register:e("search")})}),(0,T.jsxs)(r.Ay,{item:!0,xs:6,display:"flex",justifyContent:"flex-end",gap:2,children:[(0,T.jsx)(E.jn,{bgcolor:"#0076bf",textcolor:A.A.white,title:"Reset",onClick:()=>{i("search",""),ce(1,"",null)},loading:se}),(0,T.jsx)(E.jn,{bgcolor:A.A.buttonBg,title:"Search",onClick:()=>(()=>{let e={search:o("search")};(0,b.S$)((()=>ce(1,"",e)))})(),loading:se})]})]}),(0,T.jsx)(r.Ay,{item:!0,md:11,children:Y&&(0,T.jsxs)(a.A,{children:[(0,T.jsx)(r.Ay,{container:!0,mb:2}),Y&&(0,T.jsxs)(n.Fragment,{children:[(0,T.jsx)(F.X,{ref:I,landscape:!0,paperSize:"A4",margin:5,fileName:"Import Customers",children:(0,T.jsx)(c.A,{component:u.A,sx:{maxHeight:"calc(100vh - 200px)",mt:5,backgroundColor:"transparent",boxShadow:"none !important",borderRadius:"0px !important"},children:(0,T.jsxs)(x.A,{stickyHeader:!0,sx:{minWidth:500},children:[(0,T.jsx)(p.A,{children:(0,T.jsx)($,{children:[{name:"#",key:""},{name:"Name ",key:"name"},{name:"Actions",key:""}].map(((e,t)=>(0,T.jsx)(_,{style:{textAlign:"left !important"},className:"pdf-table",children:(0,T.jsx)(a.A,{children:null===e||void 0===e?void 0:e.name})},t)))})}),(0,T.jsx)(m.A,{children:Y.map(((e,t)=>(0,T.jsxs)($,{sx:{border:"1px solid #EEEEEE !important"},children:[(0,T.jsx)(_,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.id}),(0,T.jsx)(_,{style:{textAlign:"left"},className:"pdf-table",children:null===e||void 0===e?void 0:e.name}),(0,T.jsx)(_,{style:{textAlign:"left"},className:"pdf-table",children:null!==e&&void 0!==e&&e.system_default?(0,T.jsx)(a.A,{sx:{display:"flex !important",justifyContent:"flex-start !important"},children:(null===ie||void 0===ie?void 0:ie.permission)&&(0,T.jsx)(a.A,{component:"div",onClick:()=>{"Staff"==(null===e||void 0===e?void 0:e.name)&&"Customer"==(null===e||void 0===e?void 0:e.name)&&"Agent"==(null===e||void 0===e?void 0:e.name)||s(`/permission/${null===e||void 0===e?void 0:e.id}`)},children:(0,T.jsx)(z.A,{})})}):(0,T.jsxs)(a.A,{sx:{display:"flex !important",justifyContent:"flex-start !important"},children:[(null===ie||void 0===ie?void 0:ie.permission)&&(0,T.jsx)(a.A,{component:"div",onClick:()=>{"Staff"==(null===e||void 0===e?void 0:e.name)&&"Customer"==(null===e||void 0===e?void 0:e.name)&&"Agent"==(null===e||void 0===e?void 0:e.name)||s(`/sub-permission/${null===e||void 0===e?void 0:e.id}`)},children:(0,T.jsx)(z.A,{})}),(null===ie||void 0===ie?void 0:ie.edit)&&(0,T.jsx)(a.A,{component:"img",src:h.To.editIcon,onClick:()=>s("/update-sub-role",{state:e}),width:"35px"}),(null===ie||void 0===ie?void 0:ie.delete)&&(0,T.jsx)(a.A,{component:"img",src:h.To.deleteIcon,onClick:()=>{U(!0),de(null===e||void 0===e?void 0:e.id)},width:"35px"})]})})]},t)))})]})})}),(0,T.jsx)(y.A,{currentPage:K,pageSize:D,onPageSizeChange:e=>ce(1,e.target.value),tableCount:null===Y||void 0===Y?void 0:Y.length,totalCount:Z,onPageChange:e=>ce(e,"")})]}),L&&(0,T.jsx)(f.$,{})]})})]})]})}}}]);
//# sourceMappingURL=2200.582da6c2.chunk.js.map