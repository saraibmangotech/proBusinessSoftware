"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[6023],{36023:(e,s,l)=>{l.r(s),l.d(s,{default:()=>j});var o=l(65043),r=l(96446),a=l(85865),i=l(68903),n=l(51787),t=l(17392),d=l(24858),m=(l(54620),l(73216)),c=l(91284),p=(l(77020),l(44563),l(20566)),u=(l(77292),l(95692)),x=l(3632),g=l(43559),h=l(37230),v=l(61137),w=l(70255),y=l(22030),A=l(70579);const j=function(){var e,s,l,j,P,b,f;const S=(0,m.Zp)(),{state:R}=(0,m.zy)(),{register:C,handleSubmit:z,formState:{errors:E},control:N,getValues:U,setValue:k}=(0,d.mN)(),{register:q,handleSubmit:W,setValue:I,getValues:_,formState:{errors:V}}=(0,d.mN)(),[J,F]=(0,o.useState)(!1),[O,$]=(0,o.useState)(!1),[K,L]=(0,o.useState)(!1),[Z,B]=(0,o.useState)([]),[D,G]=(0,o.useState)(null),[H,M]=(0,o.useState)(!1),[Q,T]=(0,o.useState)(!1),[X,Y]=(0,o.useState)(!1),[ee,se]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{(async e=>{try{var s;let l={page:1,limit:1e3,search:e};const{data:o}=await w.A.getRoles(l);B(null===o||void 0===o||null===(s=o.roles)||void 0===s?void 0:s.rows)}catch(l){(0,u.Ni)(l)}})(),R&&(console.log(R),k("name",null===R||void 0===R?void 0:R.name),G(null===R||void 0===R?void 0:R.role),k("role",null===R||void 0===R?void 0:R.role),k("email",null===R||void 0===R?void 0:R.email),k("phone",null===R||void 0===R?void 0:R.phone))}),[]),(0,A.jsxs)(r.A,{sx:{p:3,borderRadius:3},children:[(0,A.jsxs)(r.A,{component:"form",onSubmit:z((async e=>{F(!0),M(!0),console.log(e);try{let e={name:U("name"),id:null===R||void 0===R?void 0:R.id,email:U("email"),phone:U("phone"),role_id:null===D||void 0===D?void 0:D.id};console.log(e);const s=v.A.updateUser(e);(0,u.y8)(s,"Saving ...","Success","Something Went Wrong");const l=await s;200===(null===l||void 0===l?void 0:l.responseCode)&&S("/user-list")}catch(s){M(!1)}finally{F(!1)}})),children:[(0,A.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"flex-end"},children:[(0,A.jsx)(a.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:"Update User"}),(0,A.jsx)(r.A,{sx:{display:"flex",gap:"10px"},children:(0,A.jsx)(c.jn,{bgcolor:"#bd9b4a",title:"Save",type:"submit",disabled:H})})]}),(0,A.jsxs)(i.Ay,{container:!0,spacing:0,mt:5,p:1,gap:3,children:[(0,A.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,A.jsx)(p.A,{label:" Name :*",size:"small",placeholder:" Name",error:null===E||void 0===E||null===(e=E.name)||void 0===e?void 0:e.message,register:C("name",{required:"Please enter name."})})}),(0,A.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,A.jsx)(p.A,{label:"Email :*",size:"small",placeholder:"Email",error:null===E||void 0===E||null===(s=E.email)||void 0===s?void 0:s.message,register:C("email",{required:"Please enter your email.",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})}),(0,A.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,A.jsx)(p.A,{label:"Phone :*",size:"small",placeholder:"Phone ",type:"number",error:null===E||void 0===E||null===(l=E.phone)||void 0===l?void 0:l.message,register:C("phone",{required:"Please enter phone.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."}})})}),(0,A.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,A.jsx)(h.A,{size:"small",label:"Select Role :*",options:Z,selected:D,onSelect:e=>G(e),error:null===E||void 0===E||null===(j=E.role)||void 0===j?void 0:j.message,register:C("role",{required:"Please select role"})})})]})]}),(0,A.jsxs)(r.A,{component:"form",onSubmit:W((async e=>{F(!0),M(!0),console.log(e);try{let e={email:U("email"),old_password:(0,y.yv)(_("oldPassword")),new_password:(0,y.yv)(_("newPassword"))};console.log(e);const s=v.A.UpdatePassword(e);(0,u.y8)(s,"Saving ...","Success","Something Went Wrong")}catch(s){M(!1)}finally{F(!1)}})),children:[(0,A.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",alignItems:"flex-end"},children:[(0,A.jsx)(a.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:"Update User Password"}),(0,A.jsx)(r.A,{sx:{display:"flex",gap:"10px"},children:(0,A.jsx)(c.jn,{bgcolor:"#bd9b4a",title:"Change Password",type:"submit"})})]}),(0,A.jsxs)(i.Ay,{container:!0,spacing:0,mt:5,p:1,gap:3,children:[(0,A.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,A.jsx)(p.A,{size:"small",label:"Old Password :*",type:Q?"text":"password",placeholder:"Enter Old Password",InputProps:{endAdornment:(0,A.jsx)(n.A,{position:"end",children:(0,A.jsx)(t.A,{edge:"end",onClick:()=>T(!Q),children:Q?(0,A.jsx)(x.A,{color:"primary"}):(0,A.jsx)(g.A,{color:"primary"})})})},error:null===V||void 0===V||null===(P=V.oldPassword)||void 0===P?void 0:P.message,register:q("oldPassword",{required:"Please enter your old password."})})}),(0,A.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,A.jsx)(p.A,{size:"small",label:"New Password :*",type:X?"text":"password",placeholder:"Enter New Password",InputProps:{endAdornment:(0,A.jsx)(n.A,{position:"end",children:(0,A.jsx)(t.A,{edge:"end",onClick:()=>Y(!X),children:X?(0,A.jsx)(x.A,{color:"primary"}):(0,A.jsx)(g.A,{color:"primary"})})})},error:null===V||void 0===V||null===(b=V.newPassword)||void 0===b?void 0:b.message,register:q("newPassword",{required:"Please enter your new password.",minLength:{value:8,message:"Password must be at least 8 characters long."}})})}),(0,A.jsx)(i.Ay,{item:!0,xs:12,sm:5,children:(0,A.jsx)(p.A,{size:"small",label:"Confirm Password :*",type:ee?"text":"password",placeholder:"Confirm New Password",InputProps:{endAdornment:(0,A.jsx)(n.A,{position:"end",children:(0,A.jsx)(t.A,{edge:"end",onClick:()=>se(!ee),children:ee?(0,A.jsx)(x.A,{color:"primary"}):(0,A.jsx)(g.A,{color:"primary"})})})},error:null===V||void 0===V||null===(f=V.confirmPassword)||void 0===f?void 0:f.message,register:q("confirmPassword",{required:"Please confirm your new password.",validate:e=>e===_("newPassword")||"Passwords do not match."})})})]})]})]})}},77292:(e,s,l)=>{l.d(s,{A:()=>a});var o=l(82113);const r={createRole:"roles/add",getRoles:"roles",updateRole:"roles/update",deleteRole:"roles/delete",getRolesPermissions:"permissions",updateRolesPermissions:"permissions/update",getSubRolesPermissions:"permissions/subUser"},a={createRole:async e=>await(0,o.bE)(r.createRole,e),getRoles:async e=>await(0,o.Jt)(r.getRoles,e),updateRole:async e=>await(0,o.F6)(r.updateRole,e),deleteRole:async e=>await(0,o.KF)(r.deleteRole,e),getRolesPermissions:async e=>await(0,o.Jt)(r.getRolesPermissions,e),getSubRolesPermissions:async e=>await(0,o.Jt)(r.getSubRolesPermissions,e),updateRolesPermissions:async e=>await(0,o.bE)(r.updateRolesPermissions,e)}}}]);
//# sourceMappingURL=6023.94088b4d.chunk.js.map