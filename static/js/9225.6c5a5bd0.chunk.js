"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[9225],{59225:(e,t,o)=>{o.r(t),o.d(t,{default:()=>D});var i=o(65043),l=o(28076),n=o(39652),s=o(77502),r=o(96446),a=o(43845),d=o(68903),c=o(85865),u=o(54620),p=o(45903),m=o(73216),x=o(77020),g=(o(23602),o(44563)),v=(o(36838),o(42165),o(66535),o(85900)),h=o(83992),y=(o(91395),o(22030)),f=(o(20566),o(24858)),A=o(79456),S=o(4841),j=o(29542),C=o(91284),b=o(37230),w=(o(72450),o(86178)),k=o.n(w),_=(o(99543),o(95692)),E=(o(14398),o(3584)),I=o(51593),W=o(70579);(0,p.A)(l.A)((e=>{let{theme:t}=e;return{border:0}})),(0,p.A)(n.A)((e=>{let{theme:t}=e;return{[`&.${s.A.head}`]:{fontSize:14,fontFamily:"Public Sans",border:"1px solid #EEEEEE",padding:"15px",textAlign:"left",whiteSpace:"nowrap",color:"#434343",paddingRight:"50px",background:"transparent",fontWeight:"bold"},[`&.${s.A.body}`]:{fontSize:14,fontFamily:"Public Sans",textWrap:"nowrap",padding:"5px !important",paddingLeft:"15px !important",".MuiBox-root":{display:"flex",gap:"6px",alignItems:"center",justifyContent:"center",".MuiBox-root":{cursor:"pointer"}},svg:{width:"auto",height:"24px"},".MuiTypography-root":{textTransform:"capitalize",fontFamily:u.ay.NunitoRegular,textWrap:"nowrap"},".MuiButtonBase-root":{padding:"8px",width:"28px",height:"28px"}}}}));const Y=(0,h.A)({loaderWrap:{display:"flex",height:100,"& svg":{width:"40px !important",height:"40px !important"}}});const D=function(){var e;const t=(0,m.Zp)(),o=(Y(),(0,A.wA)()),[l,n]=((0,i.useRef)(null),(0,i.useState)(null)),[s,p]=(0,i.useState)(!1),[h,w]=(0,i.useState)(null),[D,F]=(0,i.useState)(!1),{register:M,handleSubmit:T,formState:{errors:N},setValue:z,getValues:R,reset:B}=(0,f.mN)(),[K,$]=(0,i.useState)(!1),[J,P]=(0,i.useState)(!1),[U,L]=(0,i.useState)([]),[V,q]=(0,i.useState)(0),[Q,Z]=(0,i.useState)(50),[G,H]=(0,i.useState)(1),[O,X]=(0,i.useState)({}),[ee,te]=(0,i.useState)(),[oe,ie]=(0,i.useState)(!1),[le,ne]=(0,i.useState)("desc"),se=async(e,t,i)=>{$(!0);try{const l=e||G,n=t||Q,s=i?{...O,...i}:null;H(l),Z(n),X(s);let r={page:l,limit:n,sort_order:le};r={...r,...s};const{data:a}=await v.A.getCustomerQueue(r);L(null===a||void 0===a?void 0:a.rows),q(null===a||void 0===a?void 0:a.count),te((0,y.TJ)(null===a||void 0===a?void 0:a.permissions)),console.log((0,y.TJ)(null===a||void 0===a?void 0:a.permissions)),te((0,y.TJ)(null===a||void 0===a?void 0:a.permissions)),null===a||void 0===a||a.permissions.forEach((e=>{null!==e&&void 0!==e&&e.route&&null!==e&&void 0!==e&&e.identifier&&null!==e&&void 0!==e&&e.permitted&&o((0,S.Ft)(null===e||void 0===e?void 0:e.route))}))}catch(l){(0,_.Ni)(l)}finally{$(!1)}},re=[{header:"SR No.",accessorKey:"id"},{header:"Customer",accessorKey:"name"},{header:"Email",accessorKey:"email"},{header:"Cost Center",accessorKey:"cost_center"},{id:"created_at",header:"Registration Date",accessorFn:e=>k()(e.created_at).format("MM-DD-YYYY"),cell:e=>{let{row:t}=e;return(0,W.jsx)(r.A,{variant:"contained",color:"primary",sx:{cursor:"pointer",display:"flex",gap:2},children:k()(t.original.created_at).format("MM-DD-YYYY")})}},{header:"Status",cell:e=>{var t,o;let{row:i}=e;return(0,W.jsx)(r.A,{component:"div",sx:{cursor:"pointer"},onClick:()=>{null!==ee&&void 0!==ee&&ee.status_update&&p(!0)},children:(0,W.jsx)(a.A,{sx:{backgroundColor:null!==i&&void 0!==i&&null!==(t=i.original)&&void 0!==t&&t.is_active?"#05c105":"#a13605",color:"white"},label:null!==i&&void 0!==i&&null!==(o=i.original)&&void 0!==o&&o.is_active?"Enabled":"Disabled"})})}},{header:"Actions",cell:e=>{var o,i,l;let{row:n}=e;return(0,W.jsxs)(r.A,{sx:{display:"flex",gap:1},children:["Walk-In Customer"!=(null===n||void 0===n||null===(o=n.original)||void 0===o?void 0:o.name)&&(0,W.jsx)(r.A,{component:"img",sx:{cursor:"pointer"},onClick:()=>{var e;t(`/customer-detail/${null===n||void 0===n||null===(e=n.original)||void 0===e?void 0:e.id}`),localStorage.setItem("currentUrl","/customer-detail")},src:u.To.detailIcon,width:"35px"}),"Walk-In Customer"!=(null===n||void 0===n||null===(i=n.original)||void 0===i?void 0:i.name)&&(0,W.jsx)(r.A,{component:"img",sx:{cursor:"pointer"},onClick:()=>{var e;t(`/update-customer/${null===n||void 0===n||null===(e=n.original)||void 0===e?void 0:e.id}`),localStorage.setItem("currentUrl","/update-customer")},src:u.To.editIcon,width:"35px"}),(0,W.jsx)(r.A,{children:"Walk-In Customer"!=(null===n||void 0===n||null===(l=n.original)||void 0===l?void 0:l.name)&&(0,W.jsx)(r.A,{sx:{cursor:"pointer"},component:"img",src:u.To.deleteIcon,onClick:()=>{w(null===n||void 0===n?void 0:n.original),P(!0)},width:"35px"})})]})}}];return(0,i.useEffect)((()=>{se()}),[]),(0,W.jsxs)(r.A,{sx:{p:3},children:[(0,W.jsx)(I.A,{open:J,onClose:()=>P(!1),message:"Are You Sure?",action:()=>{P(!1),(async()=>{try{let e={customer_id:null===h||void 0===h?void 0:h.id};const{message:t}=await v.A.handleDeleteCustomer(e);(0,g.ee)(t),se()}catch(e){(0,_.Ni)(e)}})()}}),(0,W.jsx)(j.A,{open:s,onClose:()=>p(!1),title:"Change Status?",children:(0,W.jsx)(r.A,{component:"form",onSubmit:T((async()=>{try{let e={customer_id:null===h||void 0===h?void 0:h.id,is_active:null===l||void 0===l?void 0:l.id};const t=v.A.CustomerStatus(e);console.log(t),(0,_.y8)(t,"Saving...","Added Successfully","Something Went Wrong");const o=await t;200===(null===o||void 0===o?void 0:o.responseCode)&&(p(!1),n(null),se())}catch(e){console.log(e)}})),children:(0,W.jsxs)(d.Ay,{container:!0,spacing:2,children:[(0,W.jsx)(d.Ay,{item:!0,xs:12,sm:12,children:(0,W.jsx)(b.A,{size:"small",label:"Select Status :",options:[{id:!1,name:"Disabled"},{id:!0,name:"Enabled"}],selected:l,onSelect:e=>{n(e)},error:null===N||void 0===N||null===(e=N.status)||void 0===e?void 0:e.message,register:M("status",{required:"Please select status."})})}),(0,W.jsx)(d.Ay,{container:!0,sx:{justifyContent:"center"},children:(0,W.jsxs)(d.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,W.jsx)(C.jn,{bgcolor:x.A.primary,title:"Yes,Confirm",type:"submit"}),(0,W.jsx)(C.jn,{onClick:()=>p(!1),bgcolor:"#FF1F25",title:"No,Cancel"})]})})]})})}),(0,W.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,W.jsx)(c.A,{sx:{fontSize:"24px",fontWeight:"bold"},children:"Customer List"}),(0,W.jsx)(C.jn,{bgcolor:"#bd9b4a",title:"Create Customer",onClick:()=>{t("/create-customer"),localStorage.setItem("currentUrl","/create-customer")},loading:oe})]}),(0,W.jsx)(r.A,{children:(0,W.jsx)(E.A,{loading:K,data:U,columns:re})})]})}}}]);
//# sourceMappingURL=9225.6c5a5bd0.chunk.js.map