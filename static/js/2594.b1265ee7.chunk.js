"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[2594],{72594:(e,l,o)=>{o.r(l),o.d(l,{default:()=>h});var i=o(65043),s=o(96446),n=o(68903),r=o(85865),d=o(91284),a=o(77020),t=o(20566),m=o(37230),u=o(24858),c=(o(22030),o(85900)),v=o(95692),g=o(29542),b=o(44563),x=o(73216),p=o(70579);const h=function(){var e,l,o,h,y,A,j,f,C,N,S,_,k;const w=(0,x.Zp)(),{id:z}=(0,x.g)(),[P,E]=(0,i.useState)("individual"),[R,q]=(0,i.useState)(!1),[W,V]=(0,i.useState)(!0),[D,M]=(0,i.useState)([]),[T,Y]=(0,i.useState)(null),[$,F]=(0,i.useState)(null),[L,U]=(0,i.useState)([]),[I,Q]=(0,i.useState)(!1),[Z,B]=(0,i.useState)(null),[G,H]=(0,i.useState)(!1),{register:J,handleSubmit:K,getValues:O,setValue:X,formState:{errors:ee}}=(0,u.mN)(),{register:le,handleSubmit:oe,setValue:ie,getValues:se,control:ne,watch:re,formState:{errors:de}}=(0,u.mN)(),{register:ae,handleSubmit:te,setValue:me,getValues:ue,formState:{errors:ce}}=(0,u.mN)();return console.log($,"selectedCustomer"),(0,i.useEffect)((()=>{(async()=>{try{let e={reception_id:z};const{data:l}=await c.A.getReceptionDetail(e);let o=null===l||void 0===l?void 0:l.token,i={name:null===o||void 0===o?void 0:o.customer_name,id:null===o||void 0===o?void 0:o.id,location:null===o||void 0===o?void 0:o.address};F(i),B(o),E(null!==o&&void 0!==o&&o.is_company?"company":"individual"),null!==o&&void 0!==o&&o.is_company?(ie("mobile",null===o||void 0===o?void 0:o.mobile),ie("customerName",null===o||void 0===o?void 0:o.customer_name),ie("tokenNumber",null===o||void 0===o?void 0:o.token_number),ie("reference",null===o||void 0===o?void 0:o.reference),ie("email",null===o||void 0===o?void 0:o.email)):(X("mobile",null===o||void 0===o?void 0:o.mobile),X("customerName",null===o||void 0===o?void 0:o.customer_name),X("tokenNumber",null===o||void 0===o?void 0:o.token_number),X("reference",null===o||void 0===o?void 0:o.reference),X("email",null===o||void 0===o?void 0:o.email))}catch(e){console.error("Error fetching location:",e)}})(),(async()=>{try{let e={page:1,limit:1e3};const{data:l}=await c.A.getCustomerQueue(e);M(null===l||void 0===l?void 0:l.rows)}catch(e){(0,v.Ni)(e)}})()}),[]),(0,i.useEffect)((()=>{const e=L.find((e=>(null===e||void 0===e?void 0:e.id)==(null===Z||void 0===Z?void 0:Z.company_id))),l=D.find((e=>(null===e||void 0===e?void 0:e.id)==(null===Z||void 0===Z?void 0:Z.customer_id)));e&&l&&(console.log("Company:",e),console.log("Customer:",l),X("company",e),Y(e))}),[D,L,Z]),(0,p.jsxs)(s.A,{m:3,sx:{backgroundColor:"white",borderRadius:"12px"},children:[(0,p.jsx)(g.A,{open:I,onClose:()=>Q(!1),title:"Change Status?",children:(0,p.jsx)(s.A,{component:"form",onSubmit:te((async e=>{console.log(e);try{let l={code:null===e||void 0===e?void 0:e.code,name:null===e||void 0===e?void 0:e.name,customer_id:null===$||void 0===$?void 0:$.id};const o=c.A.addCompany(l);(0,v.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const i=await o;200===(null===i||void 0===i?void 0:i.responseCode)&&((async e=>{try{let l={customer_id:e||(null===$||void 0===$?void 0:$.id)};const{data:o}=await c.A.getCompanies(l);U(null===o||void 0===o?void 0:o.companies)}catch(l){console.error("Error fetching location:",l)}})(),Q(!1))}catch(l){(0,b.LY)(l)}})),children:(0,p.jsx)(n.Ay,{container:!0,spacing:2,children:(0,p.jsxs)(n.Ay,{container:!0,sx:{justifyContent:"center"},children:[(0,p.jsx)(n.Ay,{item:!0,xs:12,children:(0,p.jsx)(t.A,{label:"Name *:",size:"small",placeholder:" Name",error:null===ce||void 0===ce||null===(e=ce.name)||void 0===e?void 0:e.message,register:ae("name",{required:"Please enter  name."})})}),(0,p.jsx)(n.Ay,{item:!0,xs:12,children:(0,p.jsx)(t.A,{label:"Code *:",size:"small",placeholder:" Code",error:null===ce||void 0===ce||null===(l=ce.code)||void 0===l?void 0:l.message,register:ae("code",{required:"Please enter  code."})})}),(0,p.jsxs)(n.Ay,{item:!0,xs:6,sm:6,sx:{mt:2,display:"flex",justifyContent:"space-between",gap:"25px"},children:[(0,p.jsx)(d.jn,{bgcolor:a.A.primary,title:"Yes,Confirm",type:"submit"}),(0,p.jsx)(d.jn,{onClick:()=>Q(!1),bgcolor:"#FF1F25",title:"No,Cancel"})]})]})})})}),(0,p.jsx)(s.A,{sx:{display:"flex",justifyContent:"space-between",gap:"10px",p:3,alignItems:"flex-end"},children:(0,p.jsx)(r.A,{sx:{fontSize:"22px",fontWeight:"bold"},children:" Reception Detail"})}),"individual"==P?(0,p.jsx)(s.A,{component:"form",onSubmit:K((async e=>{console.log(e);try{let l={id:z,is_company:"individual"!=P,customer_name:null===e||void 0===e?void 0:e.customerName,customer_id:null===$||void 0===$?void 0:$.id,mobile:null===e||void 0===e?void 0:e.mobile,token_number:null===e||void 0===e?void 0:e.tokenNumber,reference:null===e||void 0===e?void 0:e.reference,company_id:null===T||void 0===T?void 0:T.id};const o=c.A.ReceptionDetail(l);(0,v.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const i=await o;200===(null===i||void 0===i?void 0:i.responseCode)&&w("/reception-list")}catch(l){(0,b.LY)(l)}})),children:(0,p.jsx)(s.A,{sx:{p:3},children:(0,p.jsxs)(n.Ay,{container:!0,sx:{gap:"5px 25px"},children:[(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(t.A,{label:"Mobile *:",disabled:!0,size:"small",type:"number",placeholder:"Mobile",error:null===ee||void 0===ee||null===(o=ee.mobile)||void 0===o?void 0:o.message,register:J("mobile",{required:"Please enter your mobile.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."},onChange:e=>{console.log("asdas")}})})}),(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(t.A,{label:"Token Number *:",size:"small",disabled:!0,placeholder:"Token Number",error:null===ee||void 0===ee||null===(h=ee.tokenNumber)||void 0===h?void 0:h.message,register:J("tokenNumber",{onChange:e=>{console.log("asdas")}})})}),(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(t.A,{label:"Customer Name *:",size:"small",disabled:!0,placeholder:"Customer Name",error:null===ee||void 0===ee||null===(y=ee.customerName)||void 0===y?void 0:y.message,register:J("customerName",{required:"Please enter customer name."})})}),(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(t.A,{label:"Reference *:",size:"small",disabled:!0,placeholder:"Reference",error:null===ee||void 0===ee||null===(A=ee.reference)||void 0===A?void 0:A.message,register:J("reference")})}),(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(t.A,{label:"Email *:",size:"small",disabled:!0,type:"email",placeholder:"Email",error:null===ee||void 0===ee||null===(j=ee.email)||void 0===j?void 0:j.message,register:J("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})})]})})}):(0,p.jsx)(s.A,{component:"form",onSubmit:oe((async e=>{console.log(e);try{let l={is_company:"individual"!=P,customer_name:null===e||void 0===e?void 0:e.customerName,customer_id:null===$||void 0===$?void 0:$.id,mobile:null===e||void 0===e?void 0:e.mobile,token_number:null===e||void 0===e?void 0:e.tokenNumber,reference:null===e||void 0===e?void 0:e.reference,company_id:null===T||void 0===T?void 0:T.id};const o=c.A.ReceptionDetail(l);(0,v.y8)(o,"Saving...","Added Successfully","Something Went Wrong");const i=await o;200===(null===i||void 0===i?void 0:i.responseCode)&&w("/reception-list")}catch(l){(0,b.LY)(l)}})),children:(0,p.jsx)(s.A,{sx:{p:3},children:(0,p.jsxs)(n.Ay,{container:!0,sx:{gap:"5px 25px"},children:[(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(t.A,{label:"Mobile *:",size:"small",type:"number",disabled:!0,placeholder:"Mobile",error:null===de||void 0===de||null===(f=de.mobile)||void 0===f?void 0:f.message,register:le("mobile",{required:"Please enter your mobile.",pattern:{value:/^05[0-9]{8}$/,message:"Please enter a valid UAE phone number (starting with 05 and 8 digits)."},onChange:e=>{console.log("asdas")}})})}),(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(t.A,{label:"Token Number *:",size:"small",disabled:!0,placeholder:"Token Number",error:null===de||void 0===de||null===(C=de.tokenNumber)||void 0===C?void 0:C.message,register:le("tokenNumber",{onChange:e=>{console.log("asdas")}})})}),(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(t.A,{label:"Customer Name *:",size:"small",disabled:!0,placeholder:"Customer Name",error:null===de||void 0===de||null===(N=de.customerName)||void 0===N?void 0:N.message,register:le("customerName",{required:"Please enter customer name."})})}),(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(t.A,{label:"Reference *:",size:"small",disabled:!0,placeholder:"Reference",error:null===de||void 0===de||null===(S=de.reference)||void 0===S?void 0:S.message,register:le("reference")})}),(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(t.A,{label:"Email *:",size:"small",disabled:!0,type:"email",placeholder:"Email",error:null===de||void 0===de||null===(_=de.email)||void 0===_?void 0:_.message,register:le("email",{pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address."}})})}),(0,p.jsx)(n.Ay,{item:!0,xs:2.8,children:(0,p.jsx)(m.A,{size:"small",label:"Customer *:",disabled:!0,options:D,selected:$,onSelect:e=>{},error:null===de||void 0===de||null===(k=de.customer)||void 0===k?void 0:k.message,register:le("customer",{required:"Please select customer account."})})})]})})})]})}}}]);
//# sourceMappingURL=2594.b1265ee7.chunk.js.map