"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[9278],{79278:(e,l,i)=>{i.r(l),i.d(l,{default:()=>_});var t=i(65043),o=i(96446),n=i(85865),a=i(68903),s=i(53193),r=i(78492),d=i(74605),c=i(14256),u=i(24858),v=i(73216),m=i(37230),y=i(91284),A=i(77020),g=i(54620),b=i(44563),p=i(20566),x=i(2010),j=i(93445),h=(i(70255),i(95692)),S=i(14398),C=i(70579);const _=function(){var e,l,i,_,f,N,w;const[z]=(0,S.Z)(!1),D=(0,v.Zp)(),{register:P,handleSubmit:q,formState:{errors:B},setValue:U,resetField:k}=(0,u.mN)(),[E,F]=(0,t.useState)(!1),[I,M]=(0,t.useState)([]),[O,R]=(0,t.useState)(),[Z,G]=(0,t.useState)("primary"),[V,W]=(0,t.useState)([]),[H,J]=(0,t.useState)(),[K,L]=(0,t.useState)([]),[Q,T]=(0,t.useState)(null),[X,Y]=(0,t.useState)("debit"),[$,ee]=(0,t.useState)(null),[le,ie]=(0,t.useState)([]),[te,oe]=(0,t.useState)(null),[ne,ae]=(0,t.useState)([]),[se,re]=(0,t.useState)(),[de,ce]=(0,t.useState)(),[ue,ve]=(0,t.useState)(),[me,ye]=(0,t.useState)(),[Ae,ge]=(0,t.useState)(),[be,pe]=(0,t.useState)(),[xe,je]=(0,t.useState)(),he=async(e,l,i)=>{try{var t;let o={type_code:e,type_series:l};"subAccount"===Z&&(o.primary_series=i);const{data:n}=await x.A.getAccountCode(o);U("accountCode",null===n||void 0===n||null===(t=n.code)||void 0===t?void 0:t.account_code)}catch(o){(0,h.Ni)(o)}};return(0,t.useEffect)((()=>{(async()=>{try{const{data:e}=await x.A.getMajorCategories();W(null===e||void 0===e?void 0:e.categories)}catch(e){(0,h.Ni)(e)}})()}),[]),(0,t.useEffect)((()=>{"subAccount"===Z&&null!==te&&void 0!==te&&te.id?((async e=>{try{var l;let i={sub_category:e};const{data:t}=await x.A.getAccountBySubCategory(i);ae(null===t||void 0===t||null===(l=t.accounts)||void 0===l?void 0:l.rows)}catch(i){(0,h.Ni)(i)}})(null===te||void 0===te?void 0:te.id),re(""),k("accountCode")):"primary"===Z&&null!==te&&void 0!==te&&te.id&&he(me,Ae)}),[te,Z]),(0,C.jsx)(o.A,{sx:{p:3,borderRadius:3},children:(0,C.jsxs)(o.A,{component:"form",onSubmit:q((async e=>{F(!0),console.log(X),console.log($);try{let l={name:null===e||void 0===e?void 0:e.accountName,head_id:de,sub_head:ue,category:null===H||void 0===H?void 0:H.id,sub_category:null===te||void 0===te?void 0:te.id,type_code:me,type_series:Ae,unit:null===O||void 0===O?void 0:O.id,opening_balance:parseInt(null===e||void 0===e?void 0:e.openingBalance),balance_date:xe,nature:null===$||void 0===$?void 0:$.id,currency:null===Q||void 0===Q?void 0:Q.id,comments:null===e||void 0===e?void 0:e.comments};"subAccount"===Z&&(l.primary_series=be,l.primary_account_id=null===se||void 0===se?void 0:se.id);const{message:i}=await x.A.createAccount(l);(0,b.ee)(i),D("/account-list")}catch(l){(0,h.Ni)(l)}finally{F(!1)}})),children:[(0,C.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,C.jsx)(n.A,{sx:{fontSize:"24px",fontWeight:"bold"},children:"Create Account"}),(0,C.jsx)(o.A,{sx:{display:"flex",gap:"5px"},children:(0,C.jsx)(y.jn,{bgcolor:"#bd9b4a",title:"Save",type:"submit"})})]}),(0,C.jsxs)(a.Ay,{container:!0,spacing:2,children:[(0,C.jsxs)(a.Ay,{item:!0,xs:12,sm:12,children:[(0,C.jsx)(n.A,{variant:"subtitle1",sx:{color:A.A.charcoalGrey,fontFamily:g.ay.NunitoRegular},children:"Nature"}),(0,C.jsx)(s.A,{children:(0,C.jsxs)(r.A,{row:!0,value:Z,onChange:e=>G(e.target.value),children:[(0,C.jsx)(d.A,{value:"primary",control:(0,C.jsx)(c.A,{}),label:"Primary"}),(0,C.jsx)(d.A,{value:"subAccount",control:(0,C.jsx)(c.A,{}),label:"Sub Account"})]})})]}),(0,C.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,C.jsx)(m.A,{label:"Major Category",size:"small",options:V,selected:H,onSelect:e=>{J(e),(async e=>{try{let l={category_id:e};const{data:i}=await x.A.getSubCategories(l);ie(null===i||void 0===i?void 0:i.categories)}catch(l){(0,h.Ni)(l)}})(null===e||void 0===e?void 0:e.id),oe(null)},error:null===B||void 0===B||null===(e=B.majorCategory)||void 0===e?void 0:e.message,register:P("majorCategory",{required:"Please select major category."})})}),(0,C.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,C.jsx)(m.A,{disabled:!H,label:"Sub Category",size:"small",options:le,selected:te,onSelect:e=>(e=>{oe(e);const{type:l}=le.find((l=>l.id===(null===e||void 0===e?void 0:e.id)));ce(null===l||void 0===l?void 0:l.head_id),ve(null===l||void 0===l?void 0:l.id),ye((null===l||void 0===l?void 0:l.type_code)+(null===l||void 0===l?void 0:l.type_number)),ge(null===l||void 0===l?void 0:l.series)})(e),error:null===B||void 0===B||null===(l=B.subCategory)||void 0===l?void 0:l.message,register:P("subCategory",{required:"Please select sub category."})})}),(0,C.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:"subAccount"===Z&&(0,C.jsx)(m.A,{disabled:!te,label:"Parent Account",size:"small",options:ne,selected:se,onSelect:e=>{var l,i,t,o;(e=>{re(e);const l=ne.find((l=>l.id===(null===e||void 0===e?void 0:e.id)));pe(null===l||void 0===l?void 0:l.primary_series),he(me,Ae,null===l||void 0===l?void 0:l.primary_series)})(e),console.log(e),U("currency",null!==e&&void 0!==e&&e.currency?null===e||void 0===e||null===(l=e.currency)||void 0===l?void 0:l.toUpperCase():"USD"),U("nature",null!==e&&void 0!==e&&e.nature?null===e||void 0===e||null===(i=e.nature)||void 0===i?void 0:i.toUpperCase():"Debit"),ee({id:null!==e&&void 0!==e&&e.nature?null===e||void 0===e?void 0:e.nature:"debit",name:null!==e&&void 0!==e&&e.nature?null===e||void 0===e||null===(t=e.nature)||void 0===t?void 0:t.toUpperCase():"Debit"}),T({id:null!==e&&void 0!==e&&e.currency?null===e||void 0===e?void 0:e.currency:"usd",name:null!==e&&void 0!==e&&e.currency?null===e||void 0===e||null===(o=e.currency)||void 0===o?void 0:o.toUpperCase():"USD"})},error:null===B||void 0===B||null===(i=B.parentAccount)||void 0===i?void 0:i.message,register:P("parentAccount",{required:"subAccount"===Z&&"Please select parent account."})})}),(0,C.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,C.jsx)(p.A,{disabled:!0,label:"Account Code",size:"small",placeholder:"Account Code",register:P("accountCode")})}),(0,C.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,C.jsx)(p.A,{label:"Account Name",placeholder:"Account Name",size:"small",error:null===B||void 0===B||null===(_=B.accountName)||void 0===_?void 0:_.message,register:P("accountName",{required:"Please enter account name."})})}),(0,C.jsx)(a.Ay,{item:!0,xs:12,sm:4}),(0,C.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,C.jsx)(p.A,{label:"Opening Balance (AED)",placeholder:"Opening Balance (AED)",size:"small",error:null===B||void 0===B||null===(f=B.openingBalance)||void 0===f?void 0:f.message,register:P("openingBalance",{required:"Please enter opening balance."})})}),(0,C.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,C.jsx)(j.A,{label:"Balance Date",size:"small",value:xe,onChange:e=>(e=>{try{if("Invalid Date"==e)return void je("invalid");je(new Date(e))}catch(l){(0,h.Ni)(l)}})(e)})}),(0,C.jsxs)(a.Ay,{item:!0,xs:12,sm:2,children:[console.log(Z),(0,C.jsx)(m.A,{label:"Nature",size:"small",disabled:"subAccount"==Z,options:[{id:"debit",name:"Debit"},{id:"credit",name:"Credit"}],selected:$,onSelect:e=>ee(e),error:null===B||void 0===B||null===(N=B.currency)||void 0===N?void 0:N.message,register:P("nature",{required:"Please select nature."})})]}),(0,C.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,C.jsx)(p.A,{label:"Comments",size:"small",placeholder:"Comments",error:null===B||void 0===B||null===(w=B.comments)||void 0===w?void 0:w.message,register:P("comments",{required:"Please enter comments."})})})]})]})})}}}]);
//# sourceMappingURL=9278.e7d7c7ee.chunk.js.map