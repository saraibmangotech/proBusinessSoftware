"use strict";(self.webpackChunkgalaxy_web=self.webpackChunkgalaxy_web||[]).push([[9500],{19500:(e,i,s)=>{s.r(i),s.d(i,{default:()=>P});var t=s(65043),o=s(96446),l=s(68903),a=s(85865),n=s(53193),d=s(78492),r=s(74605),c=s(14256),u=s(17392),v=s(79190),h=s(51962),p=s(51387),x=s(24858),A=s(73216),m=s(37230),g=s(44563),y=s(91284),j=s(77020),b=s(54620),f=s(20566),S=s(88073),w=s(22030),k=s(18285),D=s(16008),_=s(63475),H=s(89133),C=s(50857),B=s(85900),q=s(19668),F=(s(70255),s(83835)),R=s(3326),E=s(2010),I=s(49602),T=s(70579);const P=function(){var e,i,s,P,z,L,N;const Y=(0,A.Zp)(),{user:U}=(0,q.A)(),{id:G}=(0,A.g)(),{state:M}=(0,A.zy)(),{setStorageItem:V}=(0,F.A)(),K=(0,t.useRef)(),J=null===b.To||void 0===b.To?void 0:b.To.guidelinePDF;console.log(J);const{register:O,handleSubmit:W,formState:{errors:Z},setValue:$,getValues:Q}=(0,x.mN)(),[X,ee]=(0,t.useState)(!1),ie=["image/png","image/jpg","image/jpeg"],[se,te]=(0,t.useState)(!1),[oe,le]=(0,t.useState)([]),[ae,ne]=(0,t.useState)(),[de,re]=(0,t.useState)("bank"),[ce,ue]=(0,t.useState)("aed"),[ve,he]=(0,t.useState)([]),[pe,xe]=(0,t.useState)(null),[Ae,me]=(0,t.useState)(0),[ge,ye]=(0,t.useState)(0),[je,be]=(0,t.useState)([]),[fe,Se]=(0,t.useState)(""),[we,ke]=(0,t.useState)(!1),[De,_e]=(0,t.useState)(),[He,Ce]=(0,t.useState)([]),[Be,qe]=(0,t.useState)(0),[Fe,Re]=(0,t.useState)([]),[Ee,Ie]=(0,t.useState)(null),[Te,Pe]=(0,t.useState)(),ze=async e=>{try{let i={page:1,limit:50,search:e};const{data:s}=await H.A.getAuctionHouses(i);le(null===s||void 0===s?void 0:s.auction_houses.rows)}catch(i){(0,g.LY)(i)}},Le=async(e,i)=>{me(0);try{const o=new FormData;o.append("document",e);const{data:l}=await S.A.post(C.A.uploadDocuments,o,{onUploadProgress:e=>{const i=e.loaded,s=Math.round(100*i/e.total);me(s),ye((0,w.KU)(i))}});var s,t;if(l)i[0].isUpload=!0,i[0].file=null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.nations,be(i),console.log(i,"asdasdasd"),Se(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.nations)}catch(o){(0,g.LY)(o)}},Ne=()=>{try{be([]),Se(""),$("depositSlip","")}catch(e){(0,g.LY)(e)}},Ye=()=>{te(!1),Y(G?"/customer-queue":"/dashboard")};return(0,t.useEffect)((()=>{if(ce){const e=Fe.find((e=>e.currency===ce));$("cash",null===e||void 0===e?void 0:e.name),Ie(e)}}),[ce]),(0,t.useEffect)((()=>{ze(),(async()=>{try{var e;let l={customerID:null===M||void 0===M?void 0:M.customerId};const{data:a}=await B.A.getBuyerIdDetail(l);if(null!==a&&void 0!==a&&null!==(e=a.details)&&void 0!==e&&e.request){var i,s,t,o;const e=[];let l=0;_e(null===a||void 0===a||null===(i=a.details)||void 0===i||null===(s=i.request)||void 0===s?void 0:s.id),null===a||void 0===a||null===(t=a.details)||void 0===t||null===(o=t.request)||void 0===o||o.details.forEach((i=>{var s;e.push(null===i||void 0===i||null===(s=i.auction)||void 0===s?void 0:s.id),null!==i&&void 0!==i&&i.allocated_buyer_id&&(l+=1)})),qe(l),Ce(e)}}catch(l){}})(),(async()=>{try{var e,i;let s={page:1,limit:1e3};const{data:t}=await E.A.getPaymentAccounts(s),o=null===t||void 0===t||null===(e=t.cashierAccounts)||void 0===e||null===(i=e.rows)||void 0===i?void 0:i.filter((e=>"Vehicle"===e.unit&&"aed"==(null===e||void 0===e?void 0:e.currency)));if(1003===(null===U||void 0===U?void 0:U.role_id)){const e=null===U||void 0===U?void 0:U.ref_id.split("-")[1],i=o.filter((i=>i.user_id==e));Re(i);const s=i.find((e=>e.currency===ce));$("cash",null===s||void 0===s?void 0:s.name),Ie(s)}else{Re(o);const e=o.find((e=>e.currency===ce));$("cash",null===e||void 0===e?void 0:e.name),Ie(e)}}catch(s){(0,g.LY)(s)}})(),(async()=>{try{var e;let i={page:1,limit:1e3};const{data:s}=await I.A.getBanks(i),t=[];null===s||void 0===s||null===(e=s.banks)||void 0===e||e.rows.filter((e=>"aed"==e.currency)).forEach((e=>{let i={...e,name:(null===e||void 0===e?void 0:e.name)+" "+(null===e||void 0===e?void 0:e.currency.toUpperCase())};t.push(i)})),console.log(t),he(t),"C"==(null===U||void 0===U?void 0:U.user_type)&&(xe(t[0]),$("bank",t[0]),$("bidDeposit",1e4))}catch(i){(0,g.LY)(i)}})()}),[]),(0,T.jsxs)(o.A,{sx:{m:4,p:5,bgcolor:j.A.white,borderRadius:3,boxShadow:"0px 8px 18px 0px #9B9B9B1A"},children:[(0,T.jsx)(_.A,{open:se,onClose:()=>Ye(),message1:"Thank you",message2:"Request for Buyer ID is in progress"}),(0,T.jsx)(o.A,{component:"form",onSubmit:W((async()=>{console.log("sdaasdjaas"),ee(!0);try{var e;const i=[];ae.forEach((e=>{i.push(null===e||void 0===e?void 0:e.id)}));let s,t={auction_houses:i};G&&(t.customer_id=G),De?(t.request_id=De,t.allocated_ids=Be,s=await B.A.requestBuyerIdAgain(t)):(t.deposit_slip=fe,t.deposit_medium=de,"cash"===de?(t.account_id=null===Ee||void 0===Ee?void 0:Ee.id,t.deposit_amount=Q("bidDeposit")):(t.account_id=Te,t.deposit_amount=Q("bidDeposit")),console.log(t),s=await B.A.requestBuyerId(t)),V("journey",null===(e=s)||void 0===e?void 0:e.data),te(!0),setTimeout((()=>{Ye()}),2e3)}catch(i){(0,g.LY)(i)}finally{ee(!1)}})),children:(0,T.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:12,children:(0,T.jsx)(a.A,{variant:"h5",sx:{color:j.A.charcoalGrey,fontFamily:b.ay.NunitoRegular,mb:4},children:"Request Buyer ID"})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:(0,T.jsx)(m.A,{multiple:!0,onSearch:e=>ze(e),label:"Auctions Houses",options:oe,selected:ae,onSelect:e=>{ne(e)},error:null===Z||void 0===Z||null===(e=Z.auctionHouses)||void 0===e?void 0:e.message,register:O("auctionHouses")})}),!De&&(0,T.jsxs)(t.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:12,children:(0,T.jsx)(a.A,{variant:"subtitle1",sx:{color:j.A.charcoalGrey,fontFamily:b.ay.NunitoRegular},children:"Payment Method"})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:12,children:(0,T.jsx)(n.A,{children:(0,T.jsxs)(d.A,{row:!0,value:de,onChange:e=>re(e.target.value),children:["C"!==(null===U||void 0===U?void 0:U.user_type)&&(0,T.jsx)(r.A,{value:"cash",control:(0,T.jsx)(c.A,{}),label:"Cash"}),(0,T.jsx)(r.A,{value:"bank",control:(0,T.jsx)(c.A,{}),label:"Bank"})]})})}),"bank"===de&&(0,T.jsxs)(t.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:(0,T.jsx)(m.A,{disabled:"C"==(null===U||void 0===U?void 0:U.user_type),label:"Bank Account",options:ve,selected:pe,onSelect:e=>{xe(e),Pe(null===e||void 0===e?void 0:e.guc_account_id)},register:O("bank",{required:"bank"===de&&"Please enter your bank."})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:(0,T.jsx)(f.A,{disabled:!0,label:"Account Title",placeholder:"Account Title",value:null===pe||void 0===pe?void 0:pe.account_title,error:null===Z||void 0===Z||null===(i=Z.accountTitle)||void 0===i?void 0:i.message,register:O("accountTitle")})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:(0,T.jsx)(f.A,{disabled:!0,label:"IBN",placeholder:"IBN",value:null===pe||void 0===pe?void 0:pe.account_ibn,error:null===Z||void 0===Z||null===(s=Z.ibn)||void 0===s?void 0:s.message,register:O("ibn")})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:(0,T.jsx)(f.A,{disabled:"C"==(null===U||void 0===U?void 0:U.user_type),label:"Bidding Activation Deposit (AED)",placeholder:"Bidding Activation Deposit (AED)",error:null===Z||void 0===Z||null===(P=Z.bidDeposit)||void 0===P?void 0:P.message,register:O("bidDeposit",{required:"Please enter your activation deposit."})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:8}),(0,T.jsxs)(l.Ay,{item:!0,xs:12,sm:5,children:[(0,T.jsx)(o.A,{sx:{display:"flex",gap:1},children:(0,T.jsx)(a.A,{variant:"body1",sx:{color:j.A.charcoalGrey,mb:1},children:"Deposit Slip (Only Jpeg,png & pdf Allow)"})}),(0,T.jsx)(k.A,{accept:"image/png, image/jpg, image/jpeg",error:null===Z||void 0===Z||null===(z=Z.depositSlip)||void 0===z?void 0:z.message,register:O("depositSlip",{required:"bank"===de&&"Please upload you deposit slip.",onChange:e=>(async e=>{try{e.preventDefault();const i=e.target.files[0];let s=[{name:null===i||void 0===i?void 0:i.name,file:"",type:null===i||void 0===i?void 0:i.type.split("/")[1],size:(0,w.KU)(i.size),isUpload:!1}];ie.includes(i.type)?(be(s),Le(i,s)):(0,g.LY)(`Only ${(0,w.zc)(ie)} formats is supported`)}catch(i){(0,g.LY)(i)}})(e)})})]}),(0,T.jsxs)(l.Ay,{item:!0,xs:12,sm:6,children:[je.length>0&&(0,T.jsx)(a.A,{variant:"body1",sx:{color:j.A.charcoalGrey,mb:1},children:"Uploaded Files"}),(0,T.jsx)(o.A,{sx:{maxHeight:300,overflow:"auto",pr:1},children:null===je||void 0===je?void 0:je.map(((e,i)=>(0,T.jsx)(D.A,{data:e,uploadedSize:ge,progress:Ae,removeDoc:()=>Ne()},i)))})]}),fe&&(0,T.jsxs)(l.Ay,{item:!0,xs:12,sm:12,children:[(0,T.jsx)(R.A,{viewerRef:K}),(0,T.jsx)(o.A,{sx:{display:"flex",flexWrap:"wrap",gap:"8px"},children:(0,T.jsxs)(o.A,{sx:{position:"relative"},children:[(0,T.jsx)(o.A,{ref:K,onClick:()=>K.current&&K.current.click(),component:"img",src:"https://pro.mangotech-api.com/"+fe,sx:{height:180,width:"auto"}}),(0,T.jsx)(u.A,{sx:{position:"absolute",top:"0",right:"0",width:20,height:20,ml:.5},onClick:()=>Ne(),children:(0,T.jsx)(p.A,{sx:{color:j.A.danger,fontSize:20}})})]})})]})]}),"cash"===de&&(0,T.jsxs)(t.Fragment,{children:[(0,T.jsxs)(l.Ay,{item:!0,xs:12,sm:4,children:[(0,T.jsx)(v.A,{children:"Cash in Hand"}),(0,T.jsx)(n.A,{children:(0,T.jsx)(d.A,{row:!0,value:ce,onChange:e=>ue(e.target.value),children:(0,T.jsx)(r.A,{value:"aed",control:(0,T.jsx)(c.A,{}),label:"AED"})})})]}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:(0,T.jsx)(m.A,{disabled:1003===(null===U||void 0===U?void 0:U.role_id),label:"Cashier Account",options:Fe,selected:Ee,onSelect:e=>Ie(e),error:null===Z||void 0===Z||null===(L=Z.cash)||void 0===L?void 0:L.message,register:O("cash",{required:"cash"===de&&"Please select cash account."})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:(0,T.jsx)(f.A,{disabled:"bank"===de,type:"number",label:"Bidding Activation Deposit (AED)",placeholder:"Bidding Activation Deposit (AED)",error:null===Z||void 0===Z||null===(N=Z.bidDeposit)||void 0===N?void 0:N.message,register:O("bidDeposit",{required:"Please enter your activation deposit."})})})]})]}),(0,T.jsxs)(l.Ay,{item:!0,xs:12,sm:12,children:[(0,T.jsx)(h.A,{checked:we,onChange:()=>ke(!we)}),(0,T.jsx)(a.A,{component:"span",variant:"body2",sx:{color:j.A.black,fontFamily:b.ay.NunitoRegular,mb:1},children:"T&C * Bidding activation deposit will be used for booking vehicles"})]}),(0,T.jsxs)(l.Ay,{item:!0,xs:12,sm:12,sx:{mt:2,textAlign:"right"},children:[(0,T.jsx)(y.jn,{title:"Back",style:{backgroundColor:j.A.greyShade,marginRight:"8px"},onClick:()=>Y(-1)}),(0,T.jsx)(y.jn,{title:"Submit",type:"submit",loading:X,disabled:!we})]})]})})]})}},51387:(e,i,s)=>{s.d(i,{A:()=>l});var t=s(66734),o=s(70579);const l=(0,t.A)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},63475:(e,i,s)=>{s.d(i,{A:()=>u});var t=s(28924),o=s(90035),l=s(17392),a=s(96446),n=s(85865),d=s(54620),r=s(77020),c=s(70579);const u=function(e){let{open:i,onClose:s,message1:u,message2:v}=e;return(0,c.jsxs)(o.A,{open:i,sx:{"& .MuiDialog-paper":{width:"25%",height:"auto",borderRadius:2,py:{xs:2,md:4},px:{xs:3,md:6}}},children:[(0,c.jsx)(l.A,{onClick:()=>s(),sx:{position:"absolute",right:13,top:13},children:(0,c.jsx)(t.A,{})}),(0,c.jsxs)(a.A,{sx:{textAlign:"center"},children:[(0,c.jsx)(d.M4,{}),(0,c.jsx)(n.A,{variant:"h3",sx:{color:r.A.charcoalGrey,fontFamily:d.ay.NunitoRegular,mt:1,mb:1.5},children:u}),(0,c.jsx)(n.A,{variant:"h6",sx:{color:r.A.smokeyGrey,fontFamily:d.ay.NunitoRegular},children:v})]})]})}},89133:(e,i,s)=>{s.d(i,{A:()=>l});var t=s(82113);const o={getAuctionHouses:"auctionHouses",createAuctionHouse:"auctionHouses/add",updateAuctionHouse:"auctionHouses/update",deleteAuctionHouse:"auctionHouses/delete"},l={getAuctionHouses:async e=>await(0,t.Jt)(o.getAuctionHouses,e),createAuctionHouse:async e=>await(0,t.bE)(o.createAuctionHouse,e),updateAuctionHouse:async e=>await(0,t.F6)(o.updateAuctionHouse,e),deleteAuctionHouse:async e=>await(0,t.KF)(o.deleteAuctionHouse,e)}}}]);
//# sourceMappingURL=9500.e02df13e.chunk.js.map